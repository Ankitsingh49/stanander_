/*!
* tabbable 5.3.3
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):(e="undefined"!=typeof globalThis?globalThis:e||self,function(){var n=e.tabbable,o=e.tabbable={};t(o),o.noConflict=function(){return e.tabbable=n,o}}())}(this,(function(e){"use strict";var t=["input","select","textarea","a[href]","button","[tabindex]:not(slot)","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details"],n=t.join(","),o="undefined"==typeof Element,r=o?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,i=!o&&Element.prototype.getRootNode?function(e){return e.getRootNode()}:function(e){return e.ownerDocument},a=function(e,t,o){var i=Array.prototype.slice.apply(e.querySelectorAll(n));return t&&r.call(e,n)&&i.unshift(e),i=i.filter(o)},l=function e(t,o,i){for(var a=[],l=Array.from(t);l.length;){var u=l.shift();if("SLOT"===u.tagName){var c=u.assignedElements(),d=e(c.length?c:u.children,!0,i);i.flatten?a.push.apply(a,d):a.push({scope:u,candidates:d})}else{r.call(u,n)&&i.filter(u)&&(o||!t.includes(u))&&a.push(u);var f=u.shadowRoot||"function"==typeof i.getShadowRoot&&i.getShadowRoot(u),s=!i.shadowRootFilter||i.shadowRootFilter(u);if(f&&s){var p=e(!0===f?u.children:f.children,!0,i);i.flatten?a.push.apply(a,p):a.push({scope:u,candidates:p})}else l.unshift.apply(l,u.children)}}return a},u=function(e,t){return e.tabIndex<0&&(t||/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||e.isContentEditable)&&isNaN(parseInt(e.getAttribute("tabindex"),10))?0:e.tabIndex},c=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},d=function(e){return"INPUT"===e.tagName},f=function(e){return function(e){return d(e)&&"radio"===e.type}(e)&&!function(e){if(!e.name)return!0;var t,n=e.form||i(e),o=function(e){return n.querySelectorAll('input[type="radio"][name="'+e+'"]')};if("undefined"!=typeof window&&void 0!==window.CSS&&"function"==typeof window.CSS.escape)t=o(window.CSS.escape(e.name));else try{t=o(e.name)}catch(e){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",e.message),!1}var r=function(e,t){for(var n=0;n<e.length;n++)if(e[n].checked&&e[n].form===t)return e[n]}(t,e.form);return!r||r===e}(e)},s=function(e){var t=e.getBoundingClientRect(),n=t.width,o=t.height;return 0===n&&0===o},p=function(e,t){return!(t.disabled||function(e){return d(e)&&"hidden"===e.type}(t)||function(e,t){var n=t.displayCheck,o=t.getShadowRoot;if("hidden"===getComputedStyle(e).visibility)return!0;var a=r.call(e,"details>summary:first-of-type")?e.parentElement:e;if(r.call(a,"details:not([open]) *"))return!0;var l=i(e).host,u=(null==l?void 0:l.ownerDocument.contains(l))||e.ownerDocument.contains(e);if(n&&"full"!==n){if("non-zero-area"===n)return s(e)}else{if("function"==typeof o){for(var c=e;e;){var d=e.parentElement,f=i(e);if(d&&!d.shadowRoot&&!0===o(d))return s(e);e=e.assignedSlot?e.assignedSlot:d||f===e.ownerDocument?d:f.host}e=c}if(u)return!e.getClientRects().length}return!1}(t,e)||function(e){return"DETAILS"===e.tagName&&Array.prototype.slice.apply(e.children).some((function(e){return"SUMMARY"===e.tagName}))}(t)||function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if("FIELDSET"===t.tagName&&t.disabled){for(var n=0;n<t.children.length;n++){var o=t.children.item(n);if("LEGEND"===o.tagName)return!!r.call(t,"fieldset[disabled] *")||!o.contains(e)}return!0}t=t.parentElement}return!1}(t))},h=function(e,t){return!(f(t)||u(t)<0||!p(e,t))},b=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},m=t.concat("iframe").join(",");e.focusable=function(e,t){return(t=t||{}).getShadowRoot?l([e],t.includeContainer,{filter:p.bind(null,t),flatten:!0,getShadowRoot:t.getShadowRoot}):a(e,t.includeContainer,p.bind(null,t))},e.isFocusable=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return!1!==r.call(e,m)&&p(t,e)},e.isTabbable=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return!1!==r.call(e,n)&&h(t,e)},e.tabbable=function(e,t){return function e(t){var n=[],o=[];return t.forEach((function(t,r){var i=!!t.scope,a=i?t.scope:t,l=u(a,i),c=i?e(t.candidates):a;0===l?i?n.push.apply(n,c):n.push(a):o.push({documentOrder:r,tabIndex:l,item:t,isScope:i,content:c})})),o.sort(c).reduce((function(e,t){return t.isScope?e.push.apply(e,t.content):e.push(t.content),e}),[]).concat(n)}((t=t||{}).getShadowRoot?l([e],t.includeContainer,{filter:h.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:b}):a(e,t.includeContainer,h.bind(null,t)))},Object.defineProperty(e,"__esModule",{value:!0})}));;(function(Drupal){'use strict';Drupal.behaviors.addToAny={attach:function(context,settings){if(context!==document&&window.a2a)a2a.init_all()}}})(Drupal);/*!js-cookie v3.0.1 | MIT*/!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self,function(){var n=e.Cookies,o=e.Cookies=t();o.noConflict=function(){return e.Cookies=n,o}}())}(this,(function(){"use strict";function e(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)e[o]=n[o]}return e}return function t(n,o){function r(t,r,i){if("undefined"!=typeof document){"number"==typeof(i=e({},o,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),t=encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var c="";for(var u in i)i[u]&&(c+="; "+u,!0!==i[u]&&(c+="="+i[u].split(";")[0]));return document.cookie=t+"="+n.write(r,t)+c}}return Object.create({set:r,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var t=document.cookie?document.cookie.split("; "):[],o={},r=0;r<t.length;r++){var i=t[r].split("="),c=i.slice(1).join("=");try{var u=decodeURIComponent(i[0]);if(o[u]=n.read(c,u),e===u)break}catch(e){}}return e?o[e]:o}},remove:function(t,n){r(t,"",e({},n,{expires:-1}))},withAttributes:function(n){return t(this.converter,e({},this.attributes,n))},withConverter:function(n){return t(e({},this.converter,n),this.attributes)}},{attributes:{value:Object.freeze(o)},converter:{value:Object.freeze(n)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}));;function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}
function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)};return keys}
function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})};return target}
function _defineProperty(obj,key,value){key=_toPropertyKey(key);if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else obj[key]=value;return obj}
function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return _typeof(key)==="symbol"?key:String(key)}
function _toPrimitive(input,hint){if(_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")};return(hint==="string"?String:Number)(input)};(function($,Drupal,cookies){var deprecatedMessageSuffix="is deprecated in Drupal 9.0.0 and will be removed in Drupal 10.0.0. Use the core/js-cookie library instead. See https://www.drupal.org/node/3104677",isFunction=function isFunction(obj){return Object.prototype.toString.call(obj)==='[object Function]'},parseCookieValue=function parseCookieValue(value,parseJson){if(value.indexOf('"')===0)value=value.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,'\\');try{value=decodeURIComponent(value.replace(/\+/g,' '));return parseJson?JSON.parse(value):value}catch(e){}},reader=function reader(cookieValue,cookieName,converter,readUnsanitized,parseJson){var value=readUnsanitized?cookieValue:parseCookieValue(cookieValue,parseJson);if(converter!==undefined&&isFunction(converter))return converter(value,cookieName);return value};$.cookie=function(key){var value=arguments.length>1&&arguments[1]!==undefined?arguments[1]:undefined,options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:undefined;Drupal.deprecationError({message:"jQuery.cookie() ".concat(deprecatedMessageSuffix)});if(value!==undefined&&!isFunction(value)){var attributes=_objectSpread(_objectSpread({},$.cookie.defaults),options);if(typeof attributes.expires==='string'&&attributes.expires!=='')attributes.expires=new Date(attributes.expires);var cookieSetter=cookies.withConverter({write:function write(cookieValue){return encodeURIComponent(cookieValue)}});value=$.cookie.json&&!$.cookie.raw?JSON.stringify(value):String(value);return cookieSetter.set(key,value,attributes)};var userProvidedConverter=value,cookiesShim=cookies.withConverter({read:function read(cookieValue,cookieName){return reader(cookieValue,cookieName,userProvidedConverter,$.cookie.raw,$.cookie.json)}});if(key!==undefined)return cookiesShim.get(key);var results=cookiesShim.get();Object.keys(results).forEach(function(resultKey){if(results[resultKey]===undefined)delete results[resultKey]});return results};$.cookie.defaults=_objectSpread({path:''},cookies.defaults);$.cookie.json=false;$.cookie.raw=false;$.removeCookie=function(key,options){Drupal.deprecationError({message:"jQuery.removeCookie() ".concat(deprecatedMessageSuffix)});cookies.remove(key,_objectSpread(_objectSpread({},$.cookie.defaults),options));return!cookies.get(key)}})(jQuery,Drupal,window.Cookies);let userFiboId;let userFiboName;let userFiboEmail;var StopSubmission=false;var allBranchesData=[];var feedbackQuestions=[];var cityOptions="";var restaurantOptions="";var APIformData=[];var FormValidationSuccess=false;let FeedbackApiTriggered=false;function testEmailFormat(email){if(/^([a-z0-9_\.-]+\@[\da-z\.-]+\.[a-z\.]{2,6})$/.test(email)){return true;}
else{return false;}}
function testMobileFormat(mobile){if(/^[6-9]\d{9}$/.test(mobile)){return true;}
else{return false;}}
(function($,Drupal){Drupal.behaviors.bbqCommon={attach:function(context,settings){userFiboId=settings.user.uid;$(document).ready(function(){function loaderStop(){$('.fakeLoader').removeClass('display-block');$('.fakeLoader').addClass('hide');}
function loaderStart(){$('.fakeLoader').removeClass('hide');$('.fakeLoader').addClass('display-block');}
if(userFiboId){if(userFiboId!=1){$.ajax({method:'GET',url:'/api/v1/user',headers:getHeaders(),beforeSend:function(){loaderStart();},complete:function(){loaderStop();},success:function(data){Moengage.add_unique_user_id(data.mobile_number);Moengage.add_mobile(data.mobile_number);Moengage.add_email(data.email);var obj={userId:userFiboId,name:data.name,email:data.email};if(window.fibo)
window.fibo.login(obj);else
window.fibotalkSettings=obj;}});}}else{var obj={userId:'',name:'Anonymous User',email:''};if(window.fibo)
window.fibo.login(obj);else
window.fibotalkSettings=obj;}
if(jQuery('form.webform-submission-feedback-form').length>0){jQuery('input.feedback-subject-field').val('');jQuery('input.feedback-subject-field').hide();if(jQuery('#feedback_subject_select').length==0){jQuery('.feedback-subject-wrapper').append('<select id="feedback_subject_select" required="required" class="feedback-subject-select " title="Please select a feedback subject" ><option value="">- Select -</option></select>');}
jQuery(".restaurant-select").children().remove();jQuery(".restaurant-select").append('<option value="" selected="selected">- Select -</option>');jQuery(".city-select").children().remove();jQuery(".city-select").append('<option value="" selected="selected">- Select -</option>');$("#edit-mobile-no-").keypress(function(e){var pressedKey=e.which;if(pressedKey<48||pressedKey>57)
e.preventDefault();if(this.value.length>=10)
e.preventDefault();});$.ajax({method:"GET",url:"/api/v1/delivery/feedback-question",headers:getHeaders(),beforeSend:function(){loaderStart();},complete:function(){loaderStop();},success:function(data){if(data.message_type=="success"){feedbackQuestions=data.feedBackQuestionMaster;var feedbackSubjectSelect='<option value="">- Select -</option>';feedbackQuestions.forEach(element=>{feedbackSubjectSelect+='<option value='+element.feed_back_question_id+'>'+element.feed_back_question+'</option>';});jQuery('.feedback-subject-select').children().remove();jQuery('.feedback-subject-select').append(feedbackSubjectSelect);jQuery('select#feedback_subject_select').on('change',function(e){let feedbackQuestion=this.value;if(feedbackQuestion.length!=0){feedbackQuestions.forEach(element=>{if(feedbackQuestion==element.feed_back_question_id){jQuery('input.feedback-subject-field').val(element.feed_back_question);}});}else{jQuery('input.feedback-subject-field').val("");}});}}});$.ajax({method:'GET',url:'/api/v1/get-all-branches',headers:getHeaders(),beforeSend:function(){loaderStart();},complete:function(){loaderStop();},success:function(data){allBranchesData=data.data;if(jQuery(".city-select").length>0){cityOptions='<option value="" selected="selected">- Select -</option>';var preRestaurantOptions='<option value="" selected="selected">- Select -</option>';allBranchesData.forEach(element=>{cityOptions+="<option value="+element.city_id+">"+element.city_name+"</option>"});jQuery(".city-select").children().remove();jQuery(".city-select").append(cityOptions);}
jQuery('select.city-select').on('change',function(){let cityId=this.value;if(0){}else{var restaurantOptions='<option value="" selected="selected">- Select -</option>';allBranchesData.forEach(element=>{if(element.city_id==cityId){element.branches.forEach(branch=>{restaurantOptions+="<option value="+branch.branch_id+">"+branch.branch_name+"</option>"});}});jQuery(".restaurant-select").children().remove();jQuery(".restaurant-select").append(restaurantOptions);}});},});jQuery('div.main-submit input').on('click',function(e){e.preventDefault();jQuery('.error-red').remove();if(jQuery('input#edit-name').val()==""||jQuery('input#edit-name').val().length<=3){jQuery('input#edit-name').after('<p class="error-red" style="color:red; padding: 3px 1px">Please enter name.</p>');}
else if(testMobileFormat(jQuery('input#edit-mobile-no-').val())==false){jQuery('input#edit-mobile-no-').after('<p class="error-red" style="color:red; padding: 3px 1px">Please enter valid mobile no.</p>');}
else if(jQuery('input#edit-your-email').val()==""){jQuery('input#edit-your-email').after('<p class="error-red" style="color:red; padding: 3px 1px">Please enter valid email.</p>');}
else{let mail=jQuery('input#edit-your-email').val();if(testEmailFormat(mail)){if(document.getElementById('feedback_subject_select').value==""){jQuery('#feedback_subject_select').after('<p class="error-red" style="color:red; padding: 3px 1px">Please select feedback Subject</p>');}
else if(jQuery("form.webform-submission-feedback-form select#edit-city :selected").val()==""){jQuery('select#edit-city').after('<p class="error-red" style="color:red; padding: 3px 1px">Please select a city</p>');}
else if(jQuery("form.webform-submission-feedback-form select#edit-restaurant :selected").val()==""){jQuery('select#edit-restaurant').after('<p class="error-red" style="color:red; padding: 3px 1px">Please select a restaurant</p>');}
else if(jQuery(" input[name='rate_your_experience_with_us']:checked").val()==""||jQuery(" input[name='rate_your_experience_with_us']:checked").val()==undefined){jQuery('#edit-rate-your-experience-with-us').after('<p class="error-red" style="color:red; padding: 3px 1px">Please select a rating</p>');}
else if(jQuery("form.webform-submission-feedback-form textarea#edit-your-queries").val()==""){jQuery('textarea#edit-your-queries').after('<p class="error-red" style="color:red; padding: 3px 1px">Please enter some feedback / Comments</p>');}
else if(jQuery("input#edit-authorization").prop('checked')!==true){jQuery('input#edit-authorization').parent().after('<p class="error-red" style="color:red; padding: 3px 1px">Please authorize us to contact you</p>');}else{FormValidationSuccess=true;}}
else{jQuery('input#edit-your-email').after('<p class="error-red" style="color:red; padding: 3px 1px">Please enter valid email.</p>');}}
if(FormValidationSuccess){let FQ_ID=jQuery('form.webform-submission-feedback-form select#feedback_subject_select').val();let FT_ID=undefined;feedbackQuestions.forEach(element=>{if(FQ_ID==element.feed_back_question_id){FT_ID=element.feed_back_type_id;}});let storeId='';let restaurantId=jQuery("form.webform-submission-feedback-form select#edit-restaurant :selected").val();allBranchesData.forEach(element=>{element.branches.forEach(branch=>{if(branch.branch_id==restaurantId){storeId=branch.store_id;}});});APIformData={source:"web",user_name:jQuery('form.webform-submission-feedback-form input#edit-name').val()??"",user_email:jQuery('form.webform-submission-feedback-form input#edit-your-email').val()??"",user_phone:jQuery('form.webform-submission-feedback-form input#edit-mobile-no-').val().substr(-10)??"",feedback_type_id:parseInt(FT_ID)??"",feedback_question_id:parseInt(FQ_ID)??"",city:jQuery("form.webform-submission-feedback-form select#edit-city :selected").val()?jQuery("form.webform-submission-feedback-form select#edit-city :selected").text():"",outlet:jQuery("form.webform-submission-feedback-form select#edit-restaurant :selected").text()?jQuery("form.webform-submission-feedback-form select#edit-restaurant :selected").text():"",branch_id:storeId??"",order_id:jQuery("form.webform-submission-feedback-form input#edit-order-no-reservation-no").val()??"",images_url:[],rating:parseInt(jQuery("form.webform-submission-feedback-form input[name='rate_your_experience_with_us']:checked").val())??"",feedback_message:jQuery("form.webform-submission-feedback-form textarea#edit-your-queries").val()??"",user_auth_key:jQuery("form.webform-submission-feedback-form input#edit-authorization").prop('checked')?1:0,};if(APIformData['source']!=""&&APIformData['user_name']!=""&&testEmailFormat(APIformData['user_email'])&&testMobileFormat(APIformData['user_phone'])&&APIformData['feedback_type_id']!==""&&APIformData['feedback_question_id']!==""&&APIformData['city']!=""&&APIformData['outlet']!=""&&APIformData['branch_id']!=""&&APIformData['rating']!=""&&APIformData['feedback_message']!=""&&APIformData['user_auth_key']!==0){if(!FeedbackApiTriggered){$.ajax({url:'/api/v1/delivery/feedback',method:'POST',headers:getHeaders(),data:JSON.stringify(APIformData),beforeSend:function(){loaderStart();FeedbackApiTriggered=true;},complete:function(){},success:function(data){jQuery('input.response-from-feedback-api').val('Response => '+JSON.stringify(data)+' Payload => '+JSON.stringify(APIformData));if(StopSubmission==false){jQuery('div.submit-2 input').click();}},error:function(data){jQuery('input.response-from-feedback-api').val('Response => '+JSON.stringify(data)+' Payload => '+JSON.stringify(APIformData));if(StopSubmission==false){jQuery('div.submit-2 input').click();}}});}}
else{jQuery('#edit-actions-submit').before('<p class="error-red" style="color:red; padding: 3px 1px">Something went wrong, Please valid values in all fields.</p>');}}});}
$('.contact-slider').not('.slick-initialized').slick({infinite:true,slidesToShow:4,slidesToScroll:1,prevArrow:false,nextArrow:false,dots:true,responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:1,mobileFirst:true,}},{breakpoint:680,settings:{slidesToShow:2,slidesToScroll:2,mobileFirst:true,}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1,mobileFirst:true,swipeToSlide:true,infinite:true,speed:500,}}]});$('.updates-carousel .view-content').not('.slick-initialized').slick({infinite:true,slidesToShow:3,slidesToScroll:1,prevArrow:false,nextArrow:false,dots:true,responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:1,mobileFirst:true,}},{breakpoint:680,settings:{slidesToShow:2,slidesToScroll:2,mobileFirst:true,}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1,mobileFirst:true,swipeToSlide:true,infinite:true,speed:500,}}]});$('.menuToggle').click(function(){if($(window).width()>=1024){$('.menu-wrap').slideDown();$('body').addClass('show');return;}else{$('.menu-wrap').addClass('show');}});$(document).mouseup(function(e){var container=$('.menu-wrap--container');if(!container.is(e.target)&&container.has(e.target).length===0)
{$('.menu-wrap').removeClass('show');$('.notifications-snackbar').removeClass('notifications-snackbar-active');}
var user_nav=$('.user-nav');if(!user_nav.is(e.target)&&user_nav.has(e.target).length===0){$('.user').removeClass('user-show');}});var path=window.location.href.split('#')[0];$('.main-nav li a').each(function(){if(this.href===path){$(this).addClass('active');}});var promotionpopup=localStorage.getItem('promotion-popup');if(promotionpopup==null){localStorage.setItem('promotion-popup',1);$('#promotion-popup-container').addClass('show-promotion');}
$('#promotion-close-popup').click(function(){$('#promotion-popup-container').removeClass('show-promotion');});var promotionfooterpopup=localStorage.getItem('promotion-footer-popup');if(promotionfooterpopup==null){localStorage.setItem('promotion-footer-popup',1);setTimeout(function(){$('#promotion-featured-footer').addClass('show-promotion');},10000);}
$('#promotion-footer-close-popup').click(function(e){$('#promotion-featured-footer').removeClass('show-promotion');localStorage.setItem('promotion-footer-popup',0);e.preventDefault();});$('#promotion-rightside-sticky-title').click(function(){$('.promotion-rightside-sticky-content').toggleClass('show-promotion');$('.promotion-rightside-sticky-title').toggleClass('rightside-title-expanded');$('.promotion-rightside-sticky-arrow-collapsed').toggleClass('rightside-expanded');});if($('.ui-front').children().children().hasClass('webform--current-job-opening')){$('.ui-dialog').once().wrap("<div class='career-page'></div>");}
$('.career-page .ui-icon-closethick').click(function(){$('.career-page .ui-dialog').unwrap();});$('.menu-close').click(function(){if($(window).width()>=1024){$('.menu-wrap').slideUp();$('body').removeClass('show');return;}else{$('.menu-wrap').removeClass('show');}});$('.banner-carousel').slick({infinite:true,slidesToShow:1,slidesToScroll:1,dots:true,arrows:false,fade:true,speed:1000,autoplay:true,});$(document,context).once('bbqCommon').on('click','.accordion-header',function(e){e.preventDefault();var $this=$(this);if($this.next().hasClass('show')){$this.next().removeClass('show');$this.next().slideUp(200);$this.parent().removeClass('active');}else{$this.next().toggleClass('show');$this.next().slideToggle(400);$this.parent().addClass('active');$this.toggleClass('active');}});$('.refund__card input:radio').click(function(){$('.refund__card').removeClass('selected');$(this).parent().addClass('selected');});});$('.navbar__toggler').click(function(){$(this).toggleClass('is-open');$(this).next().toggleClass('is-open');});$('.user').click(function(){$(this).toggleClass('user-show');$('.login--modal').addClass('show');});$('.login--modal-close').click(function(){$('.login--modal').removeClass('show');});$('.card--voucher .button--atc').click(function(e){e.preventDefault();$(this).next().show();$(this).hide();});$('.voucher--details .button--atc').click(function(e){e.preventDefault();$(this).next().show();$(this).hide();});$('.card--promotion .button--atc').click(function(e){e.preventDefault();$(this).next().show();$(this).hide();});function increaseValue(){var value=parseInt($(this).prev().value,10);value=isNaN(value)?0:value;if(value<10){value++;}
$(this).prev().value=value;}
function decreaseValue(){var value=parseInt($(this).next().value,10);value=isNaN(value)?0:value;value<1?value=1:'';value--;$(this).next().value=value;}
$('.checkbox-list').each(function(){var count=$(this).children().length;if(count>5&&!$(this).hasClass('checkbox-list--expanded')){$(this).addClass('checkbox-list--collapsed');var remaining=count-5;$(this).append('<a href=\'#\' class=\'checkbox-list__button\'>+'+remaining+' More</a>')}else{$(this).addClass('checkbox-list--expanded');}});$('.checkbox-list__button').click(function(e){e.preventDefault();$(this).parent().removeClass('checkbox-list--collapsed');$(this).parent().addClass('checkbox-list--expanded');$(this).hide();});$('.button--m-filter').click(function(){$('.l-filter').addClass('l-filter--show-m');$('.promotions-search--sidebar--content .sidebar-first').addClass('l-filter--show-m');});$('.l-filter__submit .button').click(function(){$('.l-filter').removeClass('l-filter--show-m');$('.promotions-search--sidebar--content .sidebar-first').removeClass('l-filter--show-m');});$('.button--m-sort').click(function(){if($(this).hasClass('button--m-sort--asc')){$(this).removeClass('button--m-sort--asc');$(this).addClass('button--m-sort--desc');}else{$(this).removeClass('button--m-sort--desc');$(this).addClass('button--m-sort--asc');}});$('.button--signin').click(function(){$('#signin-dialog').load('signin.html',function(){$('.form--signin .form__suffix a').click(function(e){$('.form--signin').hide();$('.form--signup').show();e.preventDefault();});$('.form--signup .form__suffix a').click(function(e){$('.form--signup').hide();$('.form--signin').show();e.preventDefault();});$('.button--submit-next').click(function(e){$('.form--signup').hide();$('.form--signin').show();setTimeout(function(){e.preventDefault();},3000);})
$('.button--form-signin').click(function(e){if($('.form--signin').submit()){e.preventDefault();$('.signin__form-wrapper').hide();$('.signin__success').show();transferC}
setTimeout(function(){$('.form--signin').submit();},1000);});$('#timer').html('03:00');startTimer();$('#signin-dialog .close').click(function(e){$('#signin-dialog').children().remove();e.preventDefault();});});});function startTimer(){var presentTime=document.getElementById('timer').innerHTML;var timeArray=presentTime.split(/[:]+/);var m=timeArray[0];var s=checkSecond((timeArray[1]-1));if(s==59){m=m-1}
document.getElementById('timer').innerHTML=m+':'+s;setTimeout(startTimer,1000);}
function checkSecond(sec){if(sec<10&&sec>=0){sec='0'+sec};if(sec<0){sec='59'};return sec;}
$(document).on('click','.reservation--curtain .reservation__heading-action',function(e){$('.reservation--curtain').removeClass('reservation--visible');$('input[name="reason"]').prop('checked',false);$('input[name="refund"]').prop('checked',false);e.preventDefault();});$('#buffet-link').click(function(e){e.preventDefault();$('#a-la-carte').hide();$('#buffet').show();$('#beverages').hide();})
$('#a-la-carte-link').click(function(e){e.preventDefault();$('#a-la-carte').show();$('#buffet').hide();$('#beverages').hide();})
$('#beverages-link').click(function(e){e.preventDefault();$('#a-la-carte').hide();$('#buffet').hide();$('#beverages').show();})
$('.voucher--info .info__content .info h3',context).click(function(){$(this).toggleClass('dropdown--expand');$(this).next().slideToggle(500);})
$('.promotion--info .info__content .info h3',context).click(function(){$(this).toggleClass('dropdown--expand');$(this).next().slideToggle(500);})
function isOnScreen(elem){if(elem.length==0){return;}
var $window=jQuery(window)
var viewport_top=$window.scrollTop()
var viewport_height=$window.height()
var viewport_bottom=viewport_top+viewport_height
var $elem=jQuery(elem)
var top=$elem.offset().top
var height=$elem.height()
var bottom=top+height
return(top>=viewport_top&&top<viewport_bottom)||(bottom>viewport_top&&bottom<=viewport_bottom)||(height>viewport_height&&top<=viewport_top&&bottom>=viewport_bottom)}
$(document).ready(function(){window.addEventListener('scroll',function(e){if(isOnScreen(jQuery('.s-offers .layout-container'))){$(".store-reservation-form").addClass("store-reservation-form--static");}else{$(".store-reservation-form").removeClass("store-reservation-form--static");}});});var imageCountmob=$('.views-field-branch-gallery-target-id .field-content .colorbox').length;var imageCount=imageCountmob-5;for(var i=0;i<=4;i++){$('.views-field-branch-gallery-target-id .field-content a').eq(i).addClass('s-gallery-item');}
$('.views-field-branch-gallery-target-id .field-content a').eq(0).addClass('s-gallery-item--first').append('<span>'+imageCountmob+' PHOTOS </span>');$('.views-field-branch-gallery-target-id .field-content a',context).eq(4).addClass('s-gallery-item s-gallery-item--last').wrap('<div class= "wrapper-right"> </div>');if(imageCountmob>5){$('.views-field-branch-gallery-target-id .field-content a').eq(4).append('<span>'+imageCount+' PHOTOS </span>');}
var imageCountmobMenu=$('.branch-menu-row .views-field-branch-menu-image-target-id .field-content .colorbox').length;var imageCountMenu=imageCountmobMenu-5;for(var i=0;i<=4;i++){$('.branch-menu-row .views-field-branch-menu-image-target-id .field-content a').eq(i).addClass('s-gallery-item');}
$('.branch-menu-row .views-field-branch-menu-image-target-id .field-content a').eq(0).addClass('s-gallery-item--first').append('<span>'+imageCountmobMenu+' PHOTOS </span>');$('.branch-menu-row .views-field-branch-menu-image-target-id .field-content a',context).eq(4).addClass('s-gallery-item s-gallery-item--last').wrap('<div class= "wrapper-right"> </div>');if(imageCountmobMenu>5){$('.branch-menu-row .views-field-branch-menu-image-target-id .field-content a').eq(4).append('<span>'+imageCountMenu+' PHOTOS </span>');}
$("#target_gallery",context).click(function(e){e.preventDefault();$('html, body').animate({scrollTop:$("#gallery").offset().top-100},1000);});$("#target_offers",context).click(function(e){e.preventDefault();$('html, body').animate({scrollTop:$("#offers").offset().top-100},1000);});$("#target_overview",context).click(function(e){e.preventDefault();$('html, body').animate({scrollTop:$("#overview").offset().top-100},1000);});$("#target_restaurant",context).click(function(e){e.preventDefault();$('html, body').animate({scrollTop:$("#about-restaurant").offset().top-100},1000);});$('.c-form__country-code,.c-form__mobile',context).wrapAll('<div class="c-form__phone"></div>');$('.paragraph__gallery-slider').slick({slidesToShow:1,slidesToScroll:1,fade:false,arrows:true,adaptiveHeight:true,infinite:false,useTransform:true,speed:500,cssEase:'cubic-bezier(0.77, 0, 0.18, 1)',responsive:[{breakpoint:1024,settings:{slidesToShow:1,slidesToScroll:1,mobileFirst:true,}},{breakpoint:680,settings:{slidesToShow:1,slidesToScroll:1,mobileFirst:true,}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1,mobileFirst:true,swipeToSlide:true,}}]});$('.paragraph__gallery-nav').on('init',function(event,slick){$('.paragraph__gallery-nav .slick-slide.slick-current').addClass('is-active');}).slick({slidesToShow:9,slidesToScroll:9,dots:false,focusOnSelect:false,infinite:false,arrows:false,responsive:[{breakpoint:1024,settings:{slidesToShow:5,slidesToScroll:5,}},{breakpoint:640,settings:{slidesToShow:4,slidesToScroll:4,}},{breakpoint:420,settings:{slidesToShow:3,slidesToScroll:3,}}]});$('.paragraph__gallery-slider').on('afterChange',function(event,slick,currentSlide){$('.paragraph__gallery-nav').slick('slickGoTo',currentSlide);var currrentNavSlideElem='.paragraph__gallery-nav .slick-slide[data-slick-index="'+currentSlide+'"]';$('.paragraph__gallery-nav .slick-slide.is-active').removeClass('is-active');$(currrentNavSlideElem).addClass('is-active');});$('.paragraph__gallery-nav').on('click','.slick-slide',function(event){event.preventDefault();var goToSingleSlide=$(this).data('slick-index');$('.paragraph__gallery-slider').slick('slickGoTo',goToSingleSlide);});$('.paragraph__testimonial-section').slick({infinite:true,slidesToShow:3,slidesToScroll:1,dots:true,responsive:[{breakpoint:1024,settings:{slidesToShow:2,slidesToScroll:1,mobileFirst:true,}},{breakpoint:680,settings:{slidesToShow:1,slidesToScroll:1,mobileFirst:true,}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1,mobileFirst:true,swipeToSlide:true,speed:500,}}]});$("#apply-job-posting",context).click(function(e){e.preventDefault();$('html, body').animate({scrollTop:$("#webform-job-posting").offset().top-100},1000);});$("#enquire-now-button",context).click(function(e){e.preventDefault();$('html, body').animate({scrollTop:$("#enquire-now").offset().top-100},1000);});$(".mobile-reserve-button .input--group-button",context).click(function(e){$('.form--banner').css({"display":"block","margin-top":"0px"});$('#header').css("display","none");$('.mobile-reserve-button').hide();});$(".form--banner .close",context).click(function(e){$('.form--banner').css({"display":"none","margin-top":"60px"});$('#header').css("display","flex");$('.mobile-reserve-button').show();});$("#target_menu",context).click(function(e){e.preventDefault();$('html, body').animate({scrollTop:$("#s-branch-menu-tab").offset().top-100},1000);});$("#target_gallery",context).click(function(e){e.preventDefault();$('html, body').animate({scrollTop:$("#gallery").offset().top-100},1000);});$("#target_offers",context).click(function(e){e.preventDefault();$('html, body').animate({scrollTop:$("#offers").offset().top-100},1000);});var links=$('.s-menu__item > .s-menu__link');links.on('click',function(){links.closest('.s-menu__item').removeClass('active');$(this).closest('.s-menu__item').addClass('active');});$('.social-links .social-media-links--platforms li  a').attr('target','_blank');$(".promotion-copy-code",context).click(function(e){var $temp=$("<input>");$("body").append($temp);$temp.val($('#promotion-coupon').text()).select();document.execCommand("copy");$temp.remove();});var element=document.getElementsByClassName('messages--status');if(element[0]){document.querySelector(".messages--status h2").style.display="none";if((element[0].innerText=='Your message has been sent.')||(element[0].innerText=='Your message sent successfully')){toastr.success(element[0].innerText);}
element[0].setAttribute("style","display:none;");}
$(".branch-dropdown-options",context).click(function(e){$(this).find('.select2-selection').toggleClass('show');});$('.s-voucher__header .header__m-filter .button--m-sort',context).click(function(){if($(this).hasClass('button--m-sort--asc')){$('.form-item-sort-by select').val('number').trigger('change');}else{$('.form-item-sort-by select').val('number_1').trigger('change');}});}};$('#accordian > ul li').eq(0).addClass('active');$('#accordian > ul li ul li').eq(0).addClass('active');$('#accordian > ul li ul li ul li').eq(0).addClass('active');$('#accordian-data > ul li').eq(0).addClass('active');$("#accordian #investor-link").click(function(e){e.preventDefault();var link=$(this);var closest_ul=link.closest("ul");var parallel_active_links=closest_ul.find(".active")
var closest_li=link.closest("li");var link_status=closest_li.hasClass("active");var count=0;closest_ul.find("ul").slideUp(function(){if(++count==closest_ul.find("ul").length)
parallel_active_links.removeClass("active");$("#accordian ul li.active ul li.active ul.year-container li").eq(0).addClass('active');});if(!link_status){closest_li.children("ul").slideDown();closest_li.addClass("active");$("#accordian ul li.active ul li.active ul.year-container li").eq(0).addClass('active');}});$('#accordian > ul li ul li ul li').click(function(e){$("#accordian > ul li ul li ul li").not($(this)).removeClass('active');});$('.blogs--detailed-share-button .addtoany_share').append('<span>Share</span>');$('.news--detailed-share-button .addtoany_share').append('<span>Share</span>');$(document.body).on('click','.layout-container-financails .tabs-list > li > a',function(){event.preventDefault();var tabid=$(this).attr('href');$(".tabs-list li,.tabs div.tab").removeClass("active");$(".tab").hide();$(tabid).css('display','block');$(this).parents("li").addClass('active');});$(document.body).on('click','.yearly-tab > li > a',function(event){event.preventDefault();let anchor_el=$(this);let tabId=anchor_el.attr('href');$(tabId).find('.tabs-list li').removeClass('active').eq(0).addClass('active');$(tabId).find('.tab').hide().eq(0).css('display','block');return true;});$(document).ready(function(){$(".tabs-list-first li a").click(function(e){e.preventDefault();});$(".tabs-list-first li").click(function(){var tabid=$(this).find("a").attr("href");$(".tabs-list-first li,.tabs-first div.tab-first").removeClass("active");$(".tab-first").hide();$(tabid).show();$(this).addClass("active");});});$(function(){var current=location.pathname;$('.menu--investor ul.menu li a').each(function(){var $this=$(this);if($this.attr('href').indexOf(current)!==-1){$this.addClass('active');}})})
$(function(){$('.menu--investor .menu').find('> li.menu-item--expanded').click(function(){$(this).find('ul.menu').stop(true,true).slideToggle(400);return false;});$('.menu--investor > .menu > li > ul > li').click(function(e){e.stopPropagation();});});$('.webform-submission-feedback-form .webform-section fieldset input[type="radio"]').click(function(){$(this).parent().parent().parent().parent().parent().parent().toggleClass('stepForm',this.checked);});$('.webform-submission-partner-with-us-form .webform-section fieldset input[type="radio"]').click(function(){$(this).parent().parent().parent().parent().parent().parent().toggleClass('stepForm',this.checked);});$('.webform-submission-partner-with-us-form #edit-step-2-section fieldset input[type="radio"]').click(function(){$(this).parent().parent().parent().parent().toggleClass('stepFormPartner',this.checked);});$('.webform-submission-feedback-form .webform-section#edit-step-2-section fieldset input[type="radio"]').click(function(){$('#edit-step-3-section ').toggleClass('third-step-form',this.checked);});$('.webform-submission-feedback-form #edit-step-1 input[type="radio"]').on('change',function()
{$('.webform-submission-feedback-form #edit-step-2-section').removeClass('stepForm',this.checked);});$('.selectbtn').click(function(){$('.select2-selection__rendered').each(function(){if($(this).text()=='Select Location'){$('.select-validate-box').addClass('enableValidation');}});});$('select.form-control').on('change',function(){$('.select-validate-box').removeClass('enableValidation');});$(document).on('click','.webform-options-display-buttons-label',function(){$(".webform-options-display-buttons-label").removeClass("feedback-rading-icon");$(this).addClass("feedback-rading-icon");});})(jQuery,Drupal);;!function(e){e(["jquery"],function(e){return function(){function t(e,t,n){return g({type:O.error,iconClass:m().iconClasses.error,message:e,optionsOverride:n,title:t})}function n(t,n){return t||(t=m()),v=e("#"+t.containerId),v.length?v:(n&&(v=d(t)),v)}function o(e,t,n){return g({type:O.info,iconClass:m().iconClasses.info,message:e,optionsOverride:n,title:t})}function s(e){C=e}function i(e,t,n){return g({type:O.success,iconClass:m().iconClasses.success,message:e,optionsOverride:n,title:t})}function a(e,t,n){return g({type:O.warning,iconClass:m().iconClasses.warning,message:e,optionsOverride:n,title:t})}function r(e,t){var o=m();v||n(o),u(e,o,t)||l(o)}function c(t){var o=m();return v||n(o),t&&0===e(":focus",t).length?void h(t):void(v.children().length&&v.remove())}function l(t){for(var n=v.children(),o=n.length-1;o>=0;o--)u(e(n[o]),t)}function u(t,n,o){var s=!(!o||!o.force)&&o.force;return!(!t||!s&&0!==e(":focus",t).length)&&(t[n.hideMethod]({duration:n.hideDuration,easing:n.hideEasing,complete:function(){h(t)}}),!0)}function d(t){return v=e("<div/>").attr("id",t.containerId).addClass(t.positionClass),v.appendTo(e(t.target)),v}function p(){return{tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:void 0,closeMethod:!1,closeDuration:!1,closeEasing:!1,closeOnHover:!0,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",escapeHtml:!1,target:"body",closeHtml:'<button type="button">&times;</button>',closeClass:"toast-close-button",newestOnTop:!0,preventDuplicates:!1,progressBar:!1,progressClass:"toast-progress",rtl:!1}}function f(e){C&&C(e)}function g(t){function o(e){return null==e&&(e=""),e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function s(){c(),u(),d(),p(),g(),C(),l(),i()}function i(){var e="";switch(t.iconClass){case"toast-success":case"toast-info":e="polite";break;default:e="assertive"}I.attr("aria-live",e)}function a(){E.closeOnHover&&I.hover(H,D),!E.onclick&&E.tapToDismiss&&I.click(b),E.closeButton&&j&&j.click(function(e){e.stopPropagation?e.stopPropagation():void 0!==e.cancelBubble&&e.cancelBubble!==!0&&(e.cancelBubble=!0),E.onCloseClick&&E.onCloseClick(e),b(!0)}),E.onclick&&I.click(function(e){E.onclick(e),b()})}function r(){I.hide(),I[E.showMethod]({duration:E.showDuration,easing:E.showEasing,complete:E.onShown}),E.timeOut>0&&(k=setTimeout(b,E.timeOut),F.maxHideTime=parseFloat(E.timeOut),F.hideEta=(new Date).getTime()+F.maxHideTime,E.progressBar&&(F.intervalId=setInterval(x,10)))}function c(){t.iconClass&&I.addClass(E.toastClass).addClass(y)}function l(){E.newestOnTop?v.prepend(I):v.append(I)}function u(){if(t.title){var e=t.title;E.escapeHtml&&(e=o(t.title)),M.append(e).addClass(E.titleClass),I.append(M)}}function d(){if(t.message){var e=t.message;E.escapeHtml&&(e=o(t.message)),B.append(e).addClass(E.messageClass),I.append(B)}}function p(){E.closeButton&&(j.addClass(E.closeClass).attr("role","button"),I.prepend(j))}function g(){E.progressBar&&(q.addClass(E.progressClass),I.prepend(q))}function C(){E.rtl&&I.addClass("rtl")}function O(e,t){if(e.preventDuplicates){if(t.message===w)return!0;w=t.message}return!1}function b(t){var n=t&&E.closeMethod!==!1?E.closeMethod:E.hideMethod,o=t&&E.closeDuration!==!1?E.closeDuration:E.hideDuration,s=t&&E.closeEasing!==!1?E.closeEasing:E.hideEasing;if(!e(":focus",I).length||t)return clearTimeout(F.intervalId),I[n]({duration:o,easing:s,complete:function(){h(I),clearTimeout(k),E.onHidden&&"hidden"!==P.state&&E.onHidden(),P.state="hidden",P.endTime=new Date,f(P)}})}function D(){(E.timeOut>0||E.extendedTimeOut>0)&&(k=setTimeout(b,E.extendedTimeOut),F.maxHideTime=parseFloat(E.extendedTimeOut),F.hideEta=(new Date).getTime()+F.maxHideTime)}function H(){clearTimeout(k),F.hideEta=0,I.stop(!0,!0)[E.showMethod]({duration:E.showDuration,easing:E.showEasing})}function x(){var e=(F.hideEta-(new Date).getTime())/F.maxHideTime*100;q.width(e+"%")}var E=m(),y=t.iconClass||E.iconClass;if("undefined"!=typeof t.optionsOverride&&(E=e.extend(E,t.optionsOverride),y=t.optionsOverride.iconClass||y),!O(E,t)){T++,v=n(E,!0);var k=null,I=e("<div/>"),M=e("<div/>"),B=e("<div/>"),q=e("<div/>"),j=e(E.closeHtml),F={intervalId:null,hideEta:null,maxHideTime:null},P={toastId:T,state:"visible",startTime:new Date,options:E,map:t};return s(),r(),a(),f(P),E.debug&&console&&console.log(P),I}}function m(){return e.extend({},p(),b.options)}function h(e){v||(v=n()),e.is(":visible")||(e.remove(),e=null,0===v.children().length&&(v.remove(),w=void 0))}var v,C,w,T=0,O={error:"error",info:"info",success:"success",warning:"warning"},b={clear:r,remove:c,error:t,getContainer:n,info:o,options:{},subscribe:s,success:i,version:"2.1.4",warning:a};return b}()})}("function"==typeof define&&define.amd?define:function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("jquery")):window.toastr=t(window.jQuery)});;(function($,Drupal){Drupal.theme.progressBar=function(id){return"<div id=\"".concat(id,"\" class=\"progress\" aria-live=\"polite\">")+'<div class="progress__label">&nbsp;</div><div class="progress__track"><div class="progress__bar"></div></div><div class="progress__percentage"></div><div class="progress__description">&nbsp;</div></div>'};Drupal.ProgressBar=function(id,updateCallback,method,errorCallback){this.id=id;this.method=method||'GET';this.updateCallback=updateCallback;this.errorCallback=errorCallback;this.element=$(Drupal.theme('progressBar',id))};$.extend(Drupal.ProgressBar.prototype,{setProgress:function setProgress(percentage,message,label){if(percentage>=0&&percentage<=100){$(this.element).find('div.progress__bar').css('width',"".concat(percentage,"%"));$(this.element).find('div.progress__percentage').html("".concat(percentage,"%"))};$('div.progress__description',this.element).html(message);$('div.progress__label',this.element).html(label);if(this.updateCallback)this.updateCallback(percentage,message,this)},startMonitoring:function startMonitoring(uri,delay){this.delay=delay;this.uri=uri;this.sendPing()},stopMonitoring:function stopMonitoring(){clearTimeout(this.timer);this.uri=null},sendPing:function sendPing(){if(this.timer)clearTimeout(this.timer);if(this.uri){var pb=this,uri=this.uri;if(uri.indexOf('?')===-1){uri+='?'}else uri+='&';uri+='_format=json';$.ajax({type:this.method,url:uri,data:'',dataType:'json',success:function success(progress){if(progress.status===0){pb.displayError(progress.data);return};pb.setProgress(progress.percentage,progress.message,progress.label);pb.timer=setTimeout(function(){pb.sendPing()},pb.delay)},error:function error(xmlhttp){var e=new Drupal.AjaxError(xmlhttp,pb.uri);pb.displayError("<pre>".concat(e.message,"</pre>"))}})}},displayError:function displayError(string){var error=$('<div class="messages messages--error"></div>').html(string);$(this.element).before(error).hide();if(this.errorCallback)this.errorCallback(this)}})})(jQuery,Drupal);(function($,once){var deprecatedMessageSuffix="is deprecated in Drupal 9.3.0 and will be removed in Drupal 10.0.0. Use the core/once library instead. See https://www.drupal.org/node/3158256",originalJQOnce=$.fn.once,originalJQRemoveOnce=$.fn.removeOnce;$.fn.once=function jQueryOnce(id){Drupal.deprecationError({message:"jQuery.once() ".concat(deprecatedMessageSuffix)});return originalJQOnce.apply(this,[id])};$.fn.removeOnce=function jQueryRemoveOnce(id){Drupal.deprecationError({message:"jQuery.removeOnce() ".concat(deprecatedMessageSuffix)});return originalJQRemoveOnce.apply(this,[id])};var drupalOnce=once
function augmentedOnce(id,selector,context){originalJQOnce.apply($(selector,context),[id]);return drupalOnce(id,selector,context)}
function remove(id,selector,context){originalJQRemoveOnce.apply($(selector,context),[id]);return drupalOnce.remove(id,selector,context)};window.once=Object.assign(augmentedOnce,drupalOnce,{remove:remove})})(jQuery,once);loadjs=function(){var h=function(){},c={},u={},f={};function o(e,n){if(e){var r=f[e];if(u[e]=n,r)for(;r.length;)r[0](e,n),r.splice(0,1)}}function l(e,n){e.call&&(e={success:e}),n.length?(e.error||h)(n):(e.success||h)(e)}function d(r,t,s,i){var c,o,e=document,n=s.async,u=(s.numRetries||0)+1,f=s.before||h,l=r.replace(/[\?|#].*$/,""),a=r.replace(/^(css|img)!/,"");i=i||0,/(^css!|\.css$)/.test(l)?((o=e.createElement("link")).rel="stylesheet",o.href=a,(c="hideFocus"in o)&&o.relList&&(c=0,o.rel="preload",o.as="style")):/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(l)?(o=e.createElement("img")).src=a:((o=e.createElement("script")).src=r,o.async=void 0===n||n),!(o.onload=o.onerror=o.onbeforeload=function(e){var n=e.type[0];if(c)try{o.sheet.cssText.length||(n="e")}catch(e){18!=e.code&&(n="e")}if("e"==n){if((i+=1)<u)return d(r,t,s,i)}else if("preload"==o.rel&&"style"==o.as)return o.rel="stylesheet";t(r,n,e.defaultPrevented)})!==f(r,o)&&e.head.appendChild(o)}function r(e,n,r){var t,s;if(n&&n.trim&&(t=n),s=(t?r:n)||{},t){if(t in c)throw"LoadJS";c[t]=!0}function i(n,r){!function(e,t,n){var r,s,i=(e=e.push?e:[e]).length,c=i,o=[];for(r=function(e,n,r){if("e"==n&&o.push(e),"b"==n){if(!r)return;o.push(e)}--i||t(o)},s=0;s<c;s++)d(e[s],r,n)}(e,function(e){l(s,e),n&&l({success:n,error:r},e),o(t,e)},s)}if(s.returnPromise)return new Promise(i);i()}return r.ready=function(e,n){return function(e,r){e=e.push?e:[e];var n,t,s,i=[],c=e.length,o=c;for(n=function(e,n){n.length&&i.push(e),--o||r(i)};c--;)t=e[c],(s=u[t])?n(t,s):(f[t]=f[t]||[]).push(n)}(e,function(e){l(n,e)}),r},r.done=function(e){o(e,[])},r.reset=function(){c={},u={},f={}},r.isDefined=function(e){return e in c},r}();;function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread()}
function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}
function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}
function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter)}
function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}
function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2};(function($,window,Drupal,drupalSettings,loadjs,_ref){var isFocusable=_ref.isFocusable,tabbable=_ref.tabbable;Drupal.behaviors.AJAX={attach:function attach(context,settings){function loadAjaxBehavior(base){var elementSettings=settings.ajax[base];if(typeof elementSettings.selector==='undefined')elementSettings.selector="#".concat(base);once('drupal-ajax',$(elementSettings.selector)).forEach(function(el){elementSettings.element=el;elementSettings.base=base;Drupal.ajax(elementSettings)})};Object.keys(settings.ajax||{}).forEach(function(base){return loadAjaxBehavior(base)});Drupal.ajax.bindAjaxLinks(document.body);once('ajax','.use-ajax-submit').forEach(function(el){var elementSettings={};elementSettings.url=$(el.form).attr('action');elementSettings.setClick=true;elementSettings.event='click';elementSettings.progress={type:'throbber'};elementSettings.base=el.id;elementSettings.element=el;Drupal.ajax(elementSettings)})},detach:function detach(context,settings,trigger){if(trigger==='unload')Drupal.ajax.expired().forEach(function(instance){Drupal.ajax.instances[instance.instanceIndex]=null})}};Drupal.AjaxError=function(xmlhttp,uri,customMessage){var statusCode,statusText,responseText;if(xmlhttp.status){statusCode="\n".concat(Drupal.t('An AJAX HTTP error occurred.'),"\n").concat(Drupal.t('HTTP Result Code: !status',{'!status':xmlhttp.status}))}else statusCode="\n".concat(Drupal.t('An AJAX HTTP request terminated abnormally.'));statusCode+="\n".concat(Drupal.t('Debugging information follows.'));var pathText="\n".concat(Drupal.t('Path: !uri',{'!uri':uri}));statusText='';try{statusText="\n".concat(Drupal.t('StatusText: !statusText',{'!statusText':xmlhttp.statusText.trim()}))}catch(e){};responseText='';try{responseText="\n".concat(Drupal.t('ResponseText: !responseText',{'!responseText':xmlhttp.responseText.trim()}))}catch(e){};responseText=responseText.replace(/<("[^"]*"|'[^']*'|[^'">])*>/gi,'');responseText=responseText.replace(/[\n]+\s+/g,'\n');var readyStateText=xmlhttp.status===0?"\n".concat(Drupal.t('ReadyState: !readyState',{'!readyState':xmlhttp.readyState})):'';customMessage=customMessage?"\n".concat(Drupal.t('CustomMessage: !customMessage',{'!customMessage':customMessage})):'';this.message=statusCode+pathText+statusText+customMessage+responseText+readyStateText;this.name='AjaxError'};Drupal.AjaxError.prototype=new Error();Drupal.AjaxError.prototype.constructor=Drupal.AjaxError;Drupal.ajax=function(settings){if(arguments.length!==1)throw new Error('Drupal.ajax() function must be called with one configuration object only');var base=settings.base||false,element=settings.element||false;delete settings.base;delete settings.element;if(!settings.progress&&!element)settings.progress=false;var ajax=new Drupal.Ajax(base,element,settings);ajax.instanceIndex=Drupal.ajax.instances.length;Drupal.ajax.instances.push(ajax);return ajax};Drupal.ajax.instances=[];Drupal.ajax.expired=function(){return Drupal.ajax.instances.filter(function(instance){return instance&&instance.element!==false&&!document.body.contains(instance.element)})};Drupal.ajax.bindAjaxLinks=function(element){once('ajax','.use-ajax',element).forEach(function(ajaxLink){var $linkElement=$(ajaxLink),elementSettings={progress:{type:'throbber'},dialogType:$linkElement.data('dialog-type'),dialog:$linkElement.data('dialog-options'),dialogRenderer:$linkElement.data('dialog-renderer'),base:$linkElement.attr('id'),element:ajaxLink},href=$linkElement.attr('href');if(href){elementSettings.url=href;elementSettings.event='click'};Drupal.ajax(elementSettings)})};Drupal.Ajax=function(base,element,elementSettings){var defaults={event:element?'mousedown':null,keypress:true,selector:base?"#".concat(base):null,effect:'none',speed:'none',method:'replaceWith',progress:{type:'throbber',message:Drupal.t('Please wait...')},submit:{js:true}};$.extend(this,defaults,elementSettings);this.commands=new Drupal.AjaxCommands();this.instanceIndex=false;if(this.wrapper)this.wrapper="#".concat(this.wrapper);this.element=element;this.element_settings=elementSettings;this.elementSettings=elementSettings;if(this.element&&this.element.form)this.$form=$(this.element.form);if(!this.url){var $element=$(this.element);if($element.is('a')){this.url=$element.attr('href')}else if(this.element&&element.form)this.url=this.$form.attr('action')};var originalUrl=this.url;this.url=this.url.replace(/\/nojs(\/|$|\?|#)/,'/ajax$1');if(drupalSettings.ajaxTrustedUrl[originalUrl])drupalSettings.ajaxTrustedUrl[this.url]=true;var ajax=this;ajax.options={url:ajax.url,data:ajax.submit,isInProgress:function isInProgress(){return ajax.ajaxing},beforeSerialize:function beforeSerialize(elementSettings,options){return ajax.beforeSerialize(elementSettings,options)},beforeSubmit:function beforeSubmit(formValues,elementSettings,options){ajax.ajaxing=true;return ajax.beforeSubmit(formValues,elementSettings,options)},beforeSend:function beforeSend(xmlhttprequest,options){ajax.ajaxing=true;return ajax.beforeSend(xmlhttprequest,options)},success:function success(response,status,xmlhttprequest){var _this=this;if(typeof response==='string')response=$.parseJSON(response);if(response!==null&&!drupalSettings.ajaxTrustedUrl[ajax.url])if(xmlhttprequest.getResponseHeader('X-Drupal-Ajax-Token')!=='1'){var customMessage=Drupal.t('The response failed verification so will not be processed.');return ajax.error(xmlhttprequest,ajax.url,customMessage)};return Promise.resolve(ajax.success(response,status)).then(function(){ajax.ajaxing=false;$(document).trigger('ajaxSuccess',[xmlhttprequest,_this]);$(document).trigger('ajaxComplete',[xmlhttprequest,_this]);if(--$.active===0)$(document).trigger('ajaxStop')})},error:function error(xmlhttprequest,status,_error){ajax.ajaxing=false},complete:function complete(xmlhttprequest,status){if(status==='error'||status==='parsererror')return ajax.error(xmlhttprequest,ajax.url)},dataType:'json',jsonp:false,type:'POST'};if(elementSettings.dialog)ajax.options.data.dialogOptions=elementSettings.dialog;if(ajax.options.url.indexOf('?')===-1){ajax.options.url+='?'}else ajax.options.url+='&';var wrapper="drupal_".concat(elementSettings.dialogType||'ajax');if(elementSettings.dialogRenderer)wrapper+=".".concat(elementSettings.dialogRenderer);ajax.options.url+="".concat(Drupal.ajax.WRAPPER_FORMAT,"=").concat(wrapper);$(ajax.element).on(elementSettings.event,function(event){if(!drupalSettings.ajaxTrustedUrl[ajax.url]&&!Drupal.url.isLocal(ajax.url))throw new Error(Drupal.t('The callback URL is not local and not trusted: !url',{'!url':ajax.url}));return ajax.eventResponse(this,event)});if(elementSettings.keypress)$(ajax.element).on('keypress',function(event){return ajax.keypressResponse(this,event)});if(elementSettings.prevent)$(ajax.element).on(elementSettings.prevent,false)};Drupal.ajax.WRAPPER_FORMAT='_wrapper_format';Drupal.Ajax.AJAX_REQUEST_PARAMETER='_drupal_ajax';Drupal.Ajax.prototype.execute=function(){if(this.ajaxing)return;try{this.beforeSerialize(this.element,this.options);return $.ajax(this.options)}catch(e){this.ajaxing=false;window.alert("An error occurred while attempting to process ".concat(this.options.url,": ").concat(e.message));return $.Deferred().reject()}};Drupal.Ajax.prototype.keypressResponse=function(element,event){var ajax=this;if(event.which===13||event.which===32&&element.type!=='text'&&element.type!=='textarea'&&element.type!=='tel'&&element.type!=='number'){event.preventDefault();event.stopPropagation();$(element).trigger(ajax.elementSettings.event)}};Drupal.Ajax.prototype.eventResponse=function(element,event){event.preventDefault();event.stopPropagation();var ajax=this;if(ajax.ajaxing)return;try{if(ajax.$form){if(ajax.setClick)element.form.clk=element;ajax.$form.ajaxSubmit(ajax.options)}else{ajax.beforeSerialize(ajax.element,ajax.options);$.ajax(ajax.options)}}catch(e){ajax.ajaxing=false;window.alert("An error occurred while attempting to process ".concat(ajax.options.url,": ").concat(e.message))}};Drupal.Ajax.prototype.beforeSerialize=function(element,options){if(this.$form&&document.body.contains(this.$form.get(0))){var settings=this.settings||drupalSettings;Drupal.detachBehaviors(this.$form.get(0),settings,'serialize')};options.data[Drupal.Ajax.AJAX_REQUEST_PARAMETER]=1;var pageState=drupalSettings.ajaxPageState;options.data['ajax_page_state[theme]']=pageState.theme;options.data['ajax_page_state[theme_token]']=pageState.theme_token;options.data['ajax_page_state[libraries]']=pageState.libraries};Drupal.Ajax.prototype.beforeSubmit=function(formValues,element,options){};Drupal.Ajax.prototype.beforeSend=function(xmlhttprequest,options){if(this.$form){options.extraData=options.extraData||{};options.extraData.ajax_iframe_upload='1';var v=$.fieldValue(this.element);if(v!==null)options.extraData[this.element.name]=v};$(this.element).prop('disabled',true);if(!this.progress||!this.progress.type)return;var progressIndicatorMethod="setProgressIndicator".concat(this.progress.type.slice(0,1).toUpperCase()).concat(this.progress.type.slice(1).toLowerCase());if(progressIndicatorMethod in this&&typeof this[progressIndicatorMethod]==='function')this[progressIndicatorMethod].call(this)};Drupal.theme.ajaxProgressThrobber=function(message){var messageMarkup=typeof message==='string'?Drupal.theme('ajaxProgressMessage',message):'',throbber='<div class="throbber">&nbsp;</div>';return"<div class=\"ajax-progress ajax-progress-throbber\">".concat(throbber).concat(messageMarkup,"</div>")};Drupal.theme.ajaxProgressIndicatorFullscreen=function(){return'<div class="ajax-progress ajax-progress-fullscreen">&nbsp;</div>'};Drupal.theme.ajaxProgressMessage=function(message){return"<div class=\"message\">".concat(message,"</div>")};Drupal.theme.ajaxProgressBar=function($element){return $('<div class="ajax-progress ajax-progress-bar"></div>').append($element)};Drupal.Ajax.prototype.setProgressIndicatorBar=function(){var progressBar=new Drupal.ProgressBar("ajax-progress-".concat(this.element.id),$.noop,this.progress.method,$.noop);if(this.progress.message)progressBar.setProgress(-1,this.progress.message);if(this.progress.url)progressBar.startMonitoring(this.progress.url,this.progress.interval||1500);this.progress.element=$(Drupal.theme('ajaxProgressBar',progressBar.element));this.progress.object=progressBar;$(this.element).after(this.progress.element)};Drupal.Ajax.prototype.setProgressIndicatorThrobber=function(){this.progress.element=$(Drupal.theme('ajaxProgressThrobber',this.progress.message));$(this.element).after(this.progress.element)};Drupal.Ajax.prototype.setProgressIndicatorFullscreen=function(){this.progress.element=$(Drupal.theme('ajaxProgressIndicatorFullscreen'));$('body').append(this.progress.element)};Drupal.Ajax.prototype.commandExecutionQueue=function(response,status){var _this2=this,ajaxCommands=this.commands;return Object.keys(response||{}).reduce(function(executionQueue,key){return executionQueue.then(function(){var command=response[key].command;if(command&&ajaxCommands[command])return ajaxCommands[command](_this2,response[key],status)})},Promise.resolve())};Drupal.Ajax.prototype.success=function(response,status){var _this3=this;if(this.progress.element)$(this.progress.element).remove();if(this.progress.object)this.progress.object.stopMonitoring();$(this.element).prop('disabled',false);var elementParents=$(this.element).parents('[data-drupal-selector]').addBack().toArray(),focusChanged=Object.keys(response||{}).some(function(key){var _response$key=response[key],command=_response$key.command,method=_response$key.method;return command==='focusFirst'||command==='invoke'&&method==='focus'});return this.commandExecutionQueue(response,status).then(function(){if(!focusChanged&&_this3.element&&!$(_this3.element).data('disable-refocus')){var target=false;for(var n=elementParents.length-1;!target&&n>=0;n--)target=document.querySelector("[data-drupal-selector=\"".concat(elementParents[n].getAttribute('data-drupal-selector'),"\"]"));if(target)$(target).trigger('focus')};if(_this3.$form&&document.body.contains(_this3.$form.get(0))){var settings=_this3.settings||drupalSettings;Drupal.attachBehaviors(_this3.$form.get(0),settings)};_this3.settings=null}).catch(function(error){return console.error(Drupal.t('An error occurred during the execution of the Ajax response: !error',{'!error':error}))})};Drupal.Ajax.prototype.getEffect=function(response){var type=response.effect||this.effect,speed=response.speed||this.speed,effect={};if(type==='none'){effect.showEffect='show';effect.hideEffect='hide';effect.showSpeed=''}else if(type==='fade'){effect.showEffect='fadeIn';effect.hideEffect='fadeOut';effect.showSpeed=speed}else{effect.showEffect="".concat(type,"Toggle");effect.hideEffect="".concat(type,"Toggle");effect.showSpeed=speed};return effect};Drupal.Ajax.prototype.error=function(xmlhttprequest,uri,customMessage){if(this.progress.element)$(this.progress.element).remove();if(this.progress.object)this.progress.object.stopMonitoring();$(this.wrapper).show();$(this.element).prop('disabled',false);if(this.$form&&document.body.contains(this.$form.get(0))){var settings=this.settings||drupalSettings;Drupal.attachBehaviors(this.$form.get(0),settings)};throw new Drupal.AjaxError(xmlhttprequest,uri,customMessage)};Drupal.theme.ajaxWrapperNewContent=function($newContent,ajax,response){return(response.effect||ajax.effect)!=='none'&&$newContent.filter(function(i){return!($newContent[i].nodeName==='#comment'||$newContent[i].nodeName==='#text'&&/^(\s|\n|\r)*$/.test($newContent[i].textContent))}).length>1?Drupal.theme('ajaxWrapperMultipleRootElements',$newContent):$newContent};Drupal.theme.ajaxWrapperMultipleRootElements=function($elements){return $('<div></div>').append($elements)};Drupal.AjaxCommands=function(){};Drupal.AjaxCommands.prototype={insert:function insert(ajax,response){var $wrapper=response.selector?$(response.selector):$(ajax.wrapper),method=response.method||ajax.method,effect=ajax.getEffect(response),settings=response.settings||ajax.settings||drupalSettings,$newContent=$($.parseHTML(response.data,document,true));$newContent=Drupal.theme('ajaxWrapperNewContent',$newContent,ajax,response);switch(method){case'html':case'replaceWith':case'replaceAll':case'empty':case'remove':Drupal.detachBehaviors($wrapper.get(0),settings);break;default:break};$wrapper[method]($newContent);if(effect.showEffect!=='show')$newContent.hide();var $ajaxNewContent=$newContent.find('.ajax-new-content');if($ajaxNewContent.length){$ajaxNewContent.hide();$newContent.show();$ajaxNewContent[effect.showEffect](effect.showSpeed)}else if(effect.showEffect!=='show')$newContent[effect.showEffect](effect.showSpeed);if($newContent.parents('html').length)$newContent.each(function(index,element){if(element.nodeType===Node.ELEMENT_NODE)Drupal.attachBehaviors(element,settings)})},remove:function remove(ajax,response,status){var settings=response.settings||ajax.settings||drupalSettings;$(response.selector).each(function(){Drupal.detachBehaviors(this,settings)}).remove()},changed:function changed(ajax,response,status){var $element=$(response.selector);if(!$element.hasClass('ajax-changed')){$element.addClass('ajax-changed');if(response.asterisk)$element.find(response.asterisk).append(" <abbr class=\"ajax-changed\" title=\"".concat(Drupal.t('Changed'),"\">*</abbr> "))}},alert:function alert(ajax,response,status){window.alert(response.text)},announce:function announce(ajax,response){if(response.priority){Drupal.announce(response.text,response.priority)}else Drupal.announce(response.text)},redirect:function redirect(ajax,response,status){window.location=response.url},css:function css(ajax,response,status){$(response.selector).css(response.argument)},settings:function settings(ajax,response,status){var ajaxSettings=drupalSettings.ajax;if(ajaxSettings)Drupal.ajax.expired().forEach(function(instance){if(instance.selector){var selector=instance.selector.replace('#','');if(selector in ajaxSettings)delete ajaxSettings[selector]}});if(response.merge){$.extend(true,drupalSettings,response.settings)}else ajax.settings=response.settings},data:function data(ajax,response,status){$(response.selector).data(response.name,response.value)},focusFirst:function focusFirst(ajax,response,status){var focusChanged=false,container=document.querySelector(response.selector);if(container){var tabbableElements=tabbable(container);if(tabbableElements.length){tabbableElements[0].focus();focusChanged=true}else if(isFocusable(container)){container.focus();focusChanged=true}};if(ajax.hasOwnProperty('element')&&!focusChanged)ajax.element.focus()},invoke:function invoke(ajax,response,status){var $element=$(response.selector);$element[response.method].apply($element,_toConsumableArray(response.args))},restripe:function restripe(ajax,response,status){$(response.selector).find('> tbody > tr:visible, > tr:visible').removeClass('odd even').filter(':even').addClass('odd').end().filter(':odd').addClass('even')},update_build_id:function update_build_id(ajax,response,status){document.querySelectorAll("input[name=\"form_build_id\"][value=\"".concat(response.old,"\"]")).forEach(function(item){item.value=response.new})},add_css:function add_css(ajax,response,status){$('head').prepend(response.data)},message:function message(ajax,response){var messages=new Drupal.Message(document.querySelector(response.messageWrapperQuerySelector));if(response.clearPrevious)messages.clear();messages.add(response.message,response.messageOptions)},add_js:function add_js(ajax,response,status){var parentEl=document.querySelector(response.selector||'body'),settings=ajax.settings||drupalSettings,allUniqueBundleIds=response.data.map(function(script){var uniqueBundleId=script.src+ajax.instanceIndex;loadjs(script.src,uniqueBundleId,{async:false,before:function before(path,scriptEl){Object.keys(script).forEach(function(attributeKey){scriptEl.setAttribute(attributeKey,script[attributeKey])});parentEl.appendChild(scriptEl);return false}});return uniqueBundleId});return new Promise(function(resolve,reject){loadjs.ready(allUniqueBundleIds,{success:function success(){Drupal.attachBehaviors(parentEl,settings);resolve()},error:function error(depsNotFound){var message=Drupal.t("The following files could not be loaded: @dependencies",{'@dependencies':depsNotFound.join(', ')});reject(message)}})})}};var stopEvent=function stopEvent(xhr,settings){return xhr.getResponseHeader('X-Drupal-Ajax-Token')==='1'&&settings.isInProgress&&settings.isInProgress()};$.extend(true,$.event.special,{ajaxSuccess:{trigger:function trigger(event,xhr,settings){if(stopEvent(xhr,settings))return false}},ajaxComplete:{trigger:function trigger(event,xhr,settings){if(stopEvent(xhr,settings)){$.active++;return false}}}})})(jQuery,window,Drupal,drupalSettings,loadjs,window.tabbable);(function(Drupal){Drupal.theme.ajaxProgressBar=function($element){return $element.addClass('ajax-progress ajax-progress-bar')}})(Drupal);Drupal.debounce=function(func,wait,immediate){var timeout,result;return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];var context=this,later=function later(){timeout=null;if(!immediate)result=func.apply(context,args)},callNow=immediate&&!timeout;clearTimeout(timeout);timeout=setTimeout(later,wait);if(callNow)result=func.apply(context,args);return result}};(function($,Drupal,debounce){var offsets={top:0,right:0,bottom:0,left:0}
function getRawOffset(el,edge){var $el=$(el),documentElement=document.documentElement,displacement=0,horizontal=edge==='left'||edge==='right',placement=$el.offset()[horizontal?'left':'top'];placement-=window["scroll".concat(horizontal?'X':'Y')]||document.documentElement["scroll".concat(horizontal?'Left':'Top')]||0;switch(edge){case'top':displacement=placement+$el.outerHeight();break;case'left':displacement=placement+$el.outerWidth();break;case'bottom':displacement=documentElement.clientHeight-placement;break;case'right':displacement=documentElement.clientWidth-placement;break;default:displacement=0};return displacement}
function calculateOffset(edge){var edgeOffset=0,displacingElements=document.querySelectorAll("[data-offset-".concat(edge,"]")),n=displacingElements.length;for(var i=0;i<n;i++){var el=displacingElements[i];if(el.style.display==='none')continue;var displacement=parseInt(el.getAttribute("data-offset-".concat(edge)),10);if(isNaN(displacement))displacement=getRawOffset(el,edge);edgeOffset=Math.max(edgeOffset,displacement)};return edgeOffset}
function calculateOffsets(){return{top:calculateOffset('top'),right:calculateOffset('right'),bottom:calculateOffset('bottom'),left:calculateOffset('left')}}
function displace(broadcast){offsets=calculateOffsets();Drupal.displace.offsets=offsets;if(typeof broadcast==='undefined'||broadcast)$(document).trigger('drupalViewportOffsetChange',offsets);return offsets};Drupal.behaviors.drupalDisplace={attach:function attach(){if(this.displaceProcessed)return;this.displaceProcessed=true;$(window).on('resize.drupalDisplace',debounce(displace,200))}};Drupal.displace=displace;$.extend(Drupal.displace,{offsets:offsets,calculateOffset:calculateOffset})})(jQuery,Drupal,Drupal.debounce);(function($,Drupal,_ref){var isTabbable=_ref.isTabbable;$.extend($.expr[':'],{tabbable:function tabbable(element){Drupal.deprecationError({message:'The :tabbable selector is deprecated in Drupal 9.2.0 and will be removed in Drupal 11.0.0. Use the core/tabbable library instead. See https://www.drupal.org/node/3183730'});if(element.tagName==='SUMMARY'||element.tagName==='DETAILS'){var tabIndex=element.getAttribute('tabIndex');if(tabIndex===null||tabIndex<0)return false};return isTabbable(element)}})})(jQuery,Drupal,window.tabbable);(function($){var cachedScrollbarWidth=null,max=Math.max,abs=Math.abs,regexHorizontal=/left|center|right/,regexVertical=/top|center|bottom/,regexOffset=/[+-]\d+(\.[\d]+)?%?/,regexPosition=/^\w+/,regexPercent=/%$/,_position=$.fn.position
function getOffsets(offsets,width,height){return[parseFloat(offsets[0])*(regexPercent.test(offsets[0])?width/100:1),parseFloat(offsets[1])*(regexPercent.test(offsets[1])?height/100:1)]}
function parseCss(element,property){return parseInt($.css(element,property),10)||0}
function getDimensions(elem){var raw=elem[0];if(raw.nodeType===9)return{width:elem.width(),height:elem.height(),offset:{top:0,left:0}};if($.isWindow(raw))return{width:elem.width(),height:elem.height(),offset:{top:elem.scrollTop(),left:elem.scrollLeft()}};if(raw.preventDefault)return{width:0,height:0,offset:{top:raw.pageY,left:raw.pageX}};return{width:elem.outerWidth(),height:elem.outerHeight(),offset:elem.offset()}};var collisions={fit:{left:function left(position,data){var within=data.within,withinOffset=within.isWindow?within.scrollLeft:within.offset.left,outerWidth=within.width,collisionPosLeft=position.left-data.collisionPosition.marginLeft,overLeft=withinOffset-collisionPosLeft,overRight=collisionPosLeft+data.collisionWidth-outerWidth-withinOffset,newOverRight;if(data.collisionWidth>outerWidth){if(overLeft>0&&overRight<=0){newOverRight=position.left+overLeft+data.collisionWidth-outerWidth-withinOffset;position.left+=overLeft-newOverRight}else if(overRight>0&&overLeft<=0){position.left=withinOffset}else if(overLeft>overRight){position.left=withinOffset+outerWidth-data.collisionWidth}else position.left=withinOffset}else if(overLeft>0){position.left+=overLeft}else if(overRight>0){position.left-=overRight}else position.left=max(position.left-collisionPosLeft,position.left)},top:function top(position,data){var within=data.within,withinOffset=within.isWindow?within.scrollTop:within.offset.top,outerHeight=data.within.height,collisionPosTop=position.top-data.collisionPosition.marginTop,overTop=withinOffset-collisionPosTop,overBottom=collisionPosTop+data.collisionHeight-outerHeight-withinOffset,newOverBottom;if(data.collisionHeight>outerHeight){if(overTop>0&&overBottom<=0){newOverBottom=position.top+overTop+data.collisionHeight-outerHeight-withinOffset;position.top+=overTop-newOverBottom}else if(overBottom>0&&overTop<=0){position.top=withinOffset}else if(overTop>overBottom){position.top=withinOffset+outerHeight-data.collisionHeight}else position.top=withinOffset}else if(overTop>0){position.top+=overTop}else if(overBottom>0){position.top-=overBottom}else position.top=max(position.top-collisionPosTop,position.top)}},flip:{left:function left(position,data){var within=data.within,withinOffset=within.offset.left+within.scrollLeft,outerWidth=within.width,offsetLeft=within.isWindow?within.scrollLeft:within.offset.left,collisionPosLeft=position.left-data.collisionPosition.marginLeft,overLeft=collisionPosLeft-offsetLeft,overRight=collisionPosLeft+data.collisionWidth-outerWidth-offsetLeft,myOffset=data.my[0]==='left'?-data.elemWidth:data.my[0]==='right'?data.elemWidth:0,atOffset=data.at[0]==='left'?data.targetWidth:data.at[0]==='right'?-data.targetWidth:0,offset=-2*data.offset[0],newOverRight,newOverLeft;if(overLeft<0){newOverRight=position.left+myOffset+atOffset+offset+data.collisionWidth-outerWidth-withinOffset;if(newOverRight<0||newOverRight<abs(overLeft))position.left+=myOffset+atOffset+offset}else if(overRight>0){newOverLeft=position.left-data.collisionPosition.marginLeft+myOffset+atOffset+offset-offsetLeft;if(newOverLeft>0||abs(newOverLeft)<overRight)position.left+=myOffset+atOffset+offset}},top:function top(position,data){var within=data.within,withinOffset=within.offset.top+within.scrollTop,outerHeight=within.height,offsetTop=within.isWindow?within.scrollTop:within.offset.top,collisionPosTop=position.top-data.collisionPosition.marginTop,overTop=collisionPosTop-offsetTop,overBottom=collisionPosTop+data.collisionHeight-outerHeight-offsetTop,top=data.my[1]==='top',myOffset=top?-data.elemHeight:data.my[1]==='bottom'?data.elemHeight:0,atOffset=data.at[1]==='top'?data.targetHeight:data.at[1]==='bottom'?-data.targetHeight:0,offset=-2*data.offset[1],newOverTop,newOverBottom;if(overTop<0){newOverBottom=position.top+myOffset+atOffset+offset+data.collisionHeight-outerHeight-withinOffset;if(newOverBottom<0||newOverBottom<abs(overTop))position.top+=myOffset+atOffset+offset}else if(overBottom>0){newOverTop=position.top-data.collisionPosition.marginTop+myOffset+atOffset+offset-offsetTop;if(newOverTop>0||abs(newOverTop)<overBottom)position.top+=myOffset+atOffset+offset}}},flipfit:{left:function left(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];collisions.flip.left.apply(this,args);collisions.fit.left.apply(this,args)},top:function top(){for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++)args[_key2]=arguments[_key2];collisions.flip.top.apply(this,args);collisions.fit.top.apply(this,args)}}};$.position={scrollbarWidth:function scrollbarWidth(){if(cachedScrollbarWidth!==undefined)return cachedScrollbarWidth;var div=$('<div '+"style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),innerDiv=div.children()[0];$('body').append(div);var w1=innerDiv.offsetWidth;div.css('overflow','scroll');var w2=innerDiv.offsetWidth;if(w1===w2)w2=div[0].clientWidth;div.remove();cachedScrollbarWidth=w1-w2;return cachedScrollbarWidth},getScrollInfo:function getScrollInfo(within){var overflowX=within.isWindow||within.isDocument?'':within.element.css('overflow-x'),overflowY=within.isWindow||within.isDocument?'':within.element.css('overflow-y'),hasOverflowX=overflowX==='scroll'||overflowX==='auto'&&within.width<within.element[0].scrollWidth,hasOverflowY=overflowY==='scroll'||overflowY==='auto'&&within.height<within.element[0].scrollHeight;return{width:hasOverflowY?$.position.scrollbarWidth():0,height:hasOverflowX?$.position.scrollbarWidth():0}},getWithinInfo:function getWithinInfo(element){var withinElement=$(element||window),isWindow=$.isWindow(withinElement[0]),isDocument=!!withinElement[0]&&withinElement[0].nodeType===9,hasOffset=!isWindow&&!isDocument;return{element:withinElement,isWindow:isWindow,isDocument:isDocument,offset:hasOffset?$(element).offset():{left:0,top:0},scrollLeft:withinElement.scrollLeft(),scrollTop:withinElement.scrollTop(),width:withinElement.outerWidth(),height:withinElement.outerHeight()}}};$.fn.position=function(options){if(!options||!options.of)return _position.apply(this,arguments);options=$.extend({},options);var within=$.position.getWithinInfo(options.within),scrollInfo=$.position.getScrollInfo(within),collision=(options.collision||'flip').split(' '),offsets={},target=typeof options.of==='string'?$(document).find(options.of):$(options.of),dimensions=getDimensions(target),targetWidth=dimensions.width,targetHeight=dimensions.height,targetOffset=dimensions.offset;if(target[0].preventDefault)options.at='left top';var basePosition=$.extend({},targetOffset);$.each(['my','at'],function(){var pos=(options[this]||'').split(' ');if(pos.length===1)pos=regexHorizontal.test(pos[0])?pos.concat(['center']):regexVertical.test(pos[0])?['center'].concat(pos):['center','center'];pos[0]=regexHorizontal.test(pos[0])?pos[0]:'center';pos[1]=regexVertical.test(pos[1])?pos[1]:'center';var horizontalOffset=regexOffset.exec(pos[0]),verticalOffset=regexOffset.exec(pos[1]);offsets[this]=[horizontalOffset?horizontalOffset[0]:0,verticalOffset?verticalOffset[0]:0];options[this]=[regexPosition.exec(pos[0])[0],regexPosition.exec(pos[1])[0]]});if(collision.length===1)collision[1]=collision[0];if(options.at[0]==='right'){basePosition.left+=targetWidth}else if(options.at[0]==='center')basePosition.left+=targetWidth/2;if(options.at[1]==='bottom'){basePosition.top+=targetHeight}else if(options.at[1]==='center')basePosition.top+=targetHeight/2;var atOffset=getOffsets(offsets.at,targetWidth,targetHeight);basePosition.left+=atOffset[0];basePosition.top+=atOffset[1];return this.each(function(){var using,elem=$(this),elemWidth=elem.outerWidth(),elemHeight=elem.outerHeight(),marginLeft=parseCss(this,'marginLeft'),marginTop=parseCss(this,'marginTop'),collisionWidth=elemWidth+marginLeft+parseCss(this,'marginRight')+scrollInfo.width,collisionHeight=elemHeight+marginTop+parseCss(this,'marginBottom')+scrollInfo.height,position=$.extend({},basePosition),myOffset=getOffsets(offsets.my,elem.outerWidth(),elem.outerHeight());if(options.my[0]==='right'){position.left-=elemWidth}else if(options.my[0]==='center')position.left-=elemWidth/2;if(options.my[1]==='bottom'){position.top-=elemHeight}else if(options.my[1]==='center')position.top-=elemHeight/2;position.left+=myOffset[0];position.top+=myOffset[1];var collisionPosition={marginLeft:marginLeft,marginTop:marginTop};$.each(['left','top'],function(i,dir){if(collisions[collision[i]])collisions[collision[i]][dir](position,{targetWidth:targetWidth,targetHeight:targetHeight,elemWidth:elemWidth,elemHeight:elemHeight,collisionPosition:collisionPosition,collisionWidth:collisionWidth,collisionHeight:collisionHeight,offset:[atOffset[0]+myOffset[0],atOffset[1]+myOffset[1]],my:options.my,at:options.at,within:within,elem:elem})});if(options.using)using=function using(props){var left=targetOffset.left-position.left,right=left+targetWidth-elemWidth,top=targetOffset.top-position.top,bottom=top+targetHeight-elemHeight,feedback={target:{element:target,left:targetOffset.left,top:targetOffset.top,width:targetWidth,height:targetHeight},element:{element:elem,left:position.left,top:position.top,width:elemWidth,height:elemHeight},horizontal:right<0?'left':left>0?'right':'center',vertical:bottom<0?'top':top>0?'bottom':'middle'};if(targetWidth<elemWidth&&abs(left+right)<targetWidth)feedback.horizontal='center';if(targetHeight<elemHeight&&abs(top+bottom)<targetHeight)feedback.vertical='middle';if(max(abs(left),abs(right))>max(abs(top),abs(bottom))){feedback.important='horizontal'}else feedback.important='vertical';options.using.call(this,props,feedback)};elem.offset($.extend(position,{using:using}))})};if(!$.hasOwnProperty('ui'))$.ui={};$.ui.position=collisions})(jQuery);(function($,Drupal,drupalSettings){drupalSettings.dialog={autoOpen:true,dialogClass:'',buttonClass:'button',buttonPrimaryClass:'button--primary',close:function close(event){Drupal.dialog(event.target).close();Drupal.detachBehaviors(event.target,null,'unload')}};Drupal.dialog=function(element,options){var undef,$element=$(element),dialog={open:false,returnValue:undef}
function openDialog(settings){settings=$.extend({},drupalSettings.dialog,options,settings);$(window).trigger('dialog:beforecreate',[dialog,$element,settings]);$element.dialog(settings);dialog.open=true;$(window).trigger('dialog:aftercreate',[dialog,$element,settings])}
function closeDialog(value){$(window).trigger('dialog:beforeclose',[dialog,$element]);$element.dialog('close');dialog.returnValue=value;dialog.open=false;$(window).trigger('dialog:afterclose',[dialog,$element])};dialog.show=function(){openDialog({modal:false})};dialog.showModal=function(){openDialog({modal:true})};dialog.close=closeDialog;return dialog}})(jQuery,Drupal,drupalSettings);(function($,Drupal,drupalSettings,debounce,displace){drupalSettings.dialog=$.extend({autoResize:true,maxHeight:'95%'},drupalSettings.dialog)
function resetPosition(options){var offsets=displace.offsets,left=offsets.left-offsets.right,top=offsets.top-offsets.bottom,leftString="".concat((left>0?'+':'-')+Math.abs(Math.round(left/2)),"px"),topString="".concat((top>0?'+':'-')+Math.abs(Math.round(top/2)),"px");options.position={my:"center".concat(left!==0?leftString:''," center").concat(top!==0?topString:''),of:window};return options}
function resetSize(event){var positionOptions=['width','height','minWidth','minHeight','maxHeight','maxWidth','position'],adjustedOptions={},windowHeight=$(window).height(),option,optionValue,adjustedValue;for(var n=0;n<positionOptions.length;n++){option=positionOptions[n];optionValue=event.data.settings[option];if(optionValue)if(typeof optionValue==='string'&&/%$/.test(optionValue)&&/height/i.test(option)){windowHeight-=displace.offsets.top+displace.offsets.bottom;adjustedValue=parseInt(0.01*parseInt(optionValue,10)*windowHeight,10);if(option==='height'&&event.data.$element.parent().outerHeight()<adjustedValue)adjustedValue='auto';adjustedOptions[option]=adjustedValue}};if(!event.data.settings.modal)adjustedOptions=resetPosition(adjustedOptions);event.data.$element.dialog('option',adjustedOptions).trigger('dialogContentResize')};$(window).on({'dialog:aftercreate':function dialogAftercreate(event,dialog,$element,settings){var autoResize=debounce(resetSize,20),eventData={settings:settings,$element:$element};if(settings.autoResize===true||settings.autoResize==='true'){$element.dialog('option',{resizable:false,draggable:false}).dialog('widget').css('position','fixed');$(window).on('resize.dialogResize scroll.dialogResize',eventData,autoResize).trigger('resize.dialogResize');$(document).on('drupalViewportOffsetChange.dialogResize',eventData,autoResize)}},'dialog:beforeclose':function dialogBeforeclose(event,dialog,$element){$(window).off('.dialogResize');$(document).off('.dialogResize')}})})(jQuery,Drupal,drupalSettings,Drupal.debounce,Drupal.displace);(function($,_ref){var tabbable=_ref.tabbable,isTabbable=_ref.isTabbable;$.widget('ui.dialog',$.ui.dialog,{options:{buttonClass:'button',buttonPrimaryClass:'button--primary'},_createButtons:function _createButtons(){var opts=this.options,primaryIndex,index,il=opts.buttons.length;for(index=0;index<il;index++)if(opts.buttons[index].primary&&opts.buttons[index].primary===true){primaryIndex=index;delete opts.buttons[index].primary;break};this._super();var $buttons=this.uiButtonSet.children().addClass(opts.buttonClass);if(typeof primaryIndex!=='undefined')$buttons.eq(index).addClass(opts.buttonPrimaryClass)},_focusTabbable:function _focusTabbable(){var hasFocus=this._focusedElement?this._focusedElement.get(0):null;if(!hasFocus)hasFocus=this.element.find('[autofocus]').get(0);if(!hasFocus){var $elements=[this.element,this.uiDialogButtonPane];for(var i=0;i<$elements.length;i++){var element=$elements[i].get(0);if(element){var elementTabbable=tabbable(element);hasFocus=elementTabbable.length?elementTabbable[0]:null};if(hasFocus)break}};if(!hasFocus){var closeBtn=this.uiDialogTitlebarClose.get(0);hasFocus=closeBtn&&isTabbable(closeBtn)?closeBtn:null};if(!hasFocus)hasFocus=this.uiDialog.get(0);$(hasFocus).eq(0).trigger('focus')}})})(jQuery,window.tabbable);(function($,Drupal){Drupal.behaviors.dialog={attach:function attach(context,settings){var $context=$(context);if(!$('#drupal-modal').length)$('<div id="drupal-modal" class="ui-front"></div>').hide().appendTo('body');var $dialog=$context.closest('.ui-dialog-content');if($dialog.length){if($dialog.dialog('option','drupalAutoButtons'))$dialog.trigger('dialogButtonsChange');$dialog.dialog('widget').trigger('focus')};var originalClose=settings.dialog.close;settings.dialog.close=function(event){for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];originalClose.apply(settings.dialog,[event].concat(args));$(event.target).remove()}},prepareDialogButtons:function prepareDialogButtons($dialog){var buttons=[],$buttons=$dialog.find('.form-actions input[type=submit], .form-actions a.button');$buttons.each(function(){var $originalButton=$(this).css({display:'none'});buttons.push({text:$originalButton.html()||$originalButton.attr('value'),class:$originalButton.attr('class'),click:function click(e){if($originalButton.is('a')){$originalButton[0].click()}else{$originalButton.trigger('mousedown').trigger('mouseup').trigger('click');e.preventDefault()}}})});return buttons}};Drupal.AjaxCommands.prototype.openDialog=function(ajax,response,status){if(!response.selector)return false;var $dialog=$(response.selector);if(!$dialog.length)$dialog=$("<div id=\"".concat(response.selector.replace(/^#/,''),"\" class=\"ui-front\"></div>")).appendTo('body');if(!ajax.wrapper)ajax.wrapper=$dialog.attr('id');response.command='insert';response.method='html';ajax.commands.insert(ajax,response,status);if(!response.dialogOptions.buttons){response.dialogOptions.drupalAutoButtons=true;response.dialogOptions.buttons=Drupal.behaviors.dialog.prepareDialogButtons($dialog)};$dialog.on('dialogButtonsChange',function(){var buttons=Drupal.behaviors.dialog.prepareDialogButtons($dialog);$dialog.dialog('option','buttons',buttons)});response.dialogOptions=response.dialogOptions||{};var dialog=Drupal.dialog($dialog.get(0),response.dialogOptions);if(response.dialogOptions.modal){dialog.showModal()}else dialog.show();$dialog.parent().find('.ui-dialog-buttonset').addClass('form-actions')};Drupal.AjaxCommands.prototype.closeDialog=function(ajax,response,status){var $dialog=$(response.selector);if($dialog.length){Drupal.dialog($dialog.get(0)).close();if(!response.persist)$dialog.remove()};$dialog.off('dialogButtonsChange')};Drupal.AjaxCommands.prototype.setDialogOption=function(ajax,response,status){var $dialog=$(response.selector);if($dialog.length)$dialog.dialog('option',response.optionName,response.optionValue)};$(window).on('dialog:aftercreate',function(e,dialog,$element,settings){$element.on('click.dialog','.dialog-cancel',function(e){dialog.close('cancel');e.preventDefault();e.stopPropagation()})});$(window).on('dialog:beforeclose',function(e,dialog,$element){$element.off('.dialog')})})(jQuery,Drupal);!function(d){d.fakeLoader=function(i){var s=d.extend({targetClass:"fakeLoader",timeToHide:1200,bgColor:"#2ecc71",spinner:"spinner2"},i),c='<div class="fl fl-spinner spinner1"><div class="double-bounce1"></div><div class="double-bounce2"></div></div>',e=d("body").find("."+s.targetClass);e.each(function(){switch(s.spinner){case"spinner1":e.html(c);break;case"spinner2":e.html('<div class="fl fl-spinner spinner2"><div class="spinner-container container1"><div class="circle1"></div><div class="circle2"></div><div class="circle3"></div><div class="circle4"></div></div><div class="spinner-container container2"><div class="circle1"></div><div class="circle2"></div><div class="circle3"></div><div class="circle4"></div></div><div class="spinner-container container3"><div class="circle1"></div><div class="circle2"></div><div class="circle3"></div><div class="circle4"></div></div></div>');break;case"spinner3":e.html('<div class="fl fl-spinner spinner3"><div class="dot1"></div><div class="dot2"></div></div>');break;case"spinner4":e.html('<div class="fl fl-spinner spinner4"></div>');break;case"spinner5":e.html('<div class="fl fl-spinner spinner5"><div class="cube1"></div><div class="cube2"></div></div>');break;case"spinner6":e.html('<div class="fl fl-spinner spinner6"><div class="rect1"></div><div class="rect2"></div><div class="rect3"></div><div class="rect4"></div><div class="rect5"></div></div>');break;case"spinner7":e.html('<div class="fl fl-spinner spinner7"><div class="circ1"></div><div class="circ2"></div><div class="circ3"></div><div class="circ4"></div></div>');break;default:e.html(c)}}),e.css({backgroundColor:s.bgColor}),setTimeout(function(){d(e).fadeOut()},s.timeToHide)}}(jQuery);;/*!
* jquery-confirm v3.3.4 (http://craftpip.github.io/jquery-confirm/)
* Author: Boniface Pereira
* Website: www.craftpip.com
* Contact: hey@craftpip.com
*
* Copyright 2013-2019 jquery-confirm
* Licensed under MIT (https://github.com/craftpip/jquery-confirm/blob/master/LICENSE)
*/(function(factory){if(typeof define==="function"&&define.amd){define(["jquery"],factory);}else{if(typeof module==="object"&&module.exports){module.exports=function(root,jQuery){if(jQuery===undefined){if(typeof window!=="undefined"){jQuery=require("jquery");}else{jQuery=require("jquery")(root);}}factory(jQuery);return jQuery;};}else{factory(jQuery);}}}(function($){var w=window;$.fn.confirm=function(options,option2){if(typeof options==="undefined"){options={};}if(typeof options==="string"){options={content:options,title:(option2)?option2:false};}$(this).each(function(){var $this=$(this);if($this.attr("jc-attached")){console.warn("jConfirm has already been attached to this element ",$this[0]);return;}$this.on("click",function(e){e.preventDefault();var jcOption=$.extend({},options);if($this.attr("data-title")){jcOption.title=$this.attr("data-title");}if($this.attr("data-content")){jcOption.content=$this.attr("data-content");}if(typeof jcOption.buttons==="undefined"){jcOption.buttons={};}jcOption["$target"]=$this;if($this.attr("href")&&Object.keys(jcOption.buttons).length===0){var buttons=$.extend(true,{},w.jconfirm.pluginDefaults.defaultButtons,(w.jconfirm.defaults||{}).defaultButtons||{});var firstBtn=Object.keys(buttons)[0];jcOption.buttons=buttons;jcOption.buttons[firstBtn].action=function(){location.href=$this.attr("href");};}jcOption.closeIcon=false;var instance=$.confirm(jcOption);});$this.attr("jc-attached",true);});return $(this);};$.confirm=function(options,option2){if(typeof options==="undefined"){options={};}if(typeof options==="string"){options={content:options,title:(option2)?option2:false};}var putDefaultButtons=!(options.buttons===false);if(typeof options.buttons!=="object"){options.buttons={};}if(Object.keys(options.buttons).length===0&&putDefaultButtons){var buttons=$.extend(true,{},w.jconfirm.pluginDefaults.defaultButtons,(w.jconfirm.defaults||{}).defaultButtons||{});options.buttons=buttons;}return w.jconfirm(options);};$.alert=function(options,option2){if(typeof options==="undefined"){options={};}if(typeof options==="string"){options={content:options,title:(option2)?option2:false};}var putDefaultButtons=!(options.buttons===false);if(typeof options.buttons!=="object"){options.buttons={};}if(Object.keys(options.buttons).length===0&&putDefaultButtons){var buttons=$.extend(true,{},w.jconfirm.pluginDefaults.defaultButtons,(w.jconfirm.defaults||{}).defaultButtons||{});var firstBtn=Object.keys(buttons)[0];options.buttons[firstBtn]=buttons[firstBtn];}return w.jconfirm(options);};$.dialog=function(options,option2){if(typeof options==="undefined"){options={};}if(typeof options==="string"){options={content:options,title:(option2)?option2:false,closeIcon:function(){}};}options.buttons={};if(typeof options.closeIcon==="undefined"){options.closeIcon=function(){};}options.confirmKeys=[13];return w.jconfirm(options);};w.jconfirm=function(options){if(typeof options==="undefined"){options={};}var pluginOptions=$.extend(true,{},w.jconfirm.pluginDefaults);if(w.jconfirm.defaults){pluginOptions=$.extend(true,pluginOptions,w.jconfirm.defaults);}pluginOptions=$.extend(true,{},pluginOptions,options);var instance=new w.Jconfirm(pluginOptions);w.jconfirm.instances.push(instance);return instance;};w.Jconfirm=function(options){$.extend(this,options);this._init();};w.Jconfirm.prototype={_init:function(){var that=this;if(!w.jconfirm.instances.length){w.jconfirm.lastFocused=$("body").find(":focus");}this._id=Math.round(Math.random()*99999);this.contentParsed=$(document.createElement("div"));if(!this.lazyOpen){setTimeout(function(){that.open();},0);}},_buildHTML:function(){var that=this;this._parseAnimation(this.animation,"o");this._parseAnimation(this.closeAnimation,"c");this._parseBgDismissAnimation(this.backgroundDismissAnimation);this._parseColumnClass(this.columnClass);this._parseTheme(this.theme);this._parseType(this.type);var template=$(this.template);template.find(".jconfirm-box").addClass(this.animationParsed).addClass(this.backgroundDismissAnimationParsed).addClass(this.typeParsed);if(this.typeAnimated){template.find(".jconfirm-box").addClass("jconfirm-type-animated");}if(this.useBootstrap){template.find(".jc-bs3-row").addClass(this.bootstrapClasses.row);template.find(".jc-bs3-row").addClass("justify-content-md-center justify-content-sm-center justify-content-xs-center justify-content-lg-center");template.find(".jconfirm-box-container").addClass(this.columnClassParsed);if(this.containerFluid){template.find(".jc-bs3-container").addClass(this.bootstrapClasses.containerFluid);}else{template.find(".jc-bs3-container").addClass(this.bootstrapClasses.container);}}else{template.find(".jconfirm-box").css("width",this.boxWidth);}if(this.titleClass){template.find(".jconfirm-title-c").addClass(this.titleClass);}template.addClass(this.themeParsed);var ariaLabel="jconfirm-box"+this._id;template.find(".jconfirm-box").attr("aria-labelledby",ariaLabel).attr("tabindex",-1);template.find(".jconfirm-content").attr("id",ariaLabel);if(this.bgOpacity!==null){template.find(".jconfirm-bg").css("opacity",this.bgOpacity);}if(this.rtl){template.addClass("jconfirm-rtl");}this.$el=template.appendTo(this.container);this.$jconfirmBoxContainer=this.$el.find(".jconfirm-box-container");this.$jconfirmBox=this.$body=this.$el.find(".jconfirm-box");this.$jconfirmBg=this.$el.find(".jconfirm-bg");this.$title=this.$el.find(".jconfirm-title");this.$titleContainer=this.$el.find(".jconfirm-title-c");this.$content=this.$el.find("div.jconfirm-content");this.$contentPane=this.$el.find(".jconfirm-content-pane");this.$icon=this.$el.find(".jconfirm-icon-c");this.$closeIcon=this.$el.find(".jconfirm-closeIcon");this.$holder=this.$el.find(".jconfirm-holder");this.$btnc=this.$el.find(".jconfirm-buttons");this.$scrollPane=this.$el.find(".jconfirm-scrollpane");that.setStartingPoint();this._contentReady=$.Deferred();this._modalReady=$.Deferred();this.$holder.css({"padding-top":this.offsetTop,"padding-bottom":this.offsetBottom,});this.setTitle();this.setIcon();this._setButtons();this._parseContent();this.initDraggable();if(this.isAjax){this.showLoading(false);}$.when(this._contentReady,this._modalReady).then(function(){if(that.isAjaxLoading){setTimeout(function(){that.isAjaxLoading=false;that.setContent();that.setTitle();that.setIcon();setTimeout(function(){that.hideLoading(false);that._updateContentMaxHeight();},100);if(typeof that.onContentReady==="function"){that.onContentReady();}},50);}else{that._updateContentMaxHeight();that.setTitle();that.setIcon();if(typeof that.onContentReady==="function"){that.onContentReady();}}if(that.autoClose){that._startCountDown();}}).then(function(){that._watchContent();});if(this.animation==="none"){this.animationSpeed=1;this.animationBounce=1;}this.$body.css(this._getCSS(this.animationSpeed,this.animationBounce));this.$contentPane.css(this._getCSS(this.animationSpeed,1));this.$jconfirmBg.css(this._getCSS(this.animationSpeed,1));this.$jconfirmBoxContainer.css(this._getCSS(this.animationSpeed,1));},_typePrefix:"jconfirm-type-",typeParsed:"",_parseType:function(type){this.typeParsed=this._typePrefix+type;},setType:function(type){var oldClass=this.typeParsed;this._parseType(type);this.$jconfirmBox.removeClass(oldClass).addClass(this.typeParsed);},themeParsed:"",_themePrefix:"jconfirm-",setTheme:function(theme){var previous=this.theme;this.theme=theme||this.theme;this._parseTheme(this.theme);if(previous){this.$el.removeClass(previous);}this.$el.addClass(this.themeParsed);this.theme=theme;},_parseTheme:function(theme){var that=this;theme=theme.split(",");$.each(theme,function(k,a){if(a.indexOf(that._themePrefix)===-1){theme[k]=that._themePrefix+$.trim(a);}});this.themeParsed=theme.join(" ").toLowerCase();},backgroundDismissAnimationParsed:"",_bgDismissPrefix:"jconfirm-hilight-",_parseBgDismissAnimation:function(bgDismissAnimation){var animation=bgDismissAnimation.split(",");var that=this;$.each(animation,function(k,a){if(a.indexOf(that._bgDismissPrefix)===-1){animation[k]=that._bgDismissPrefix+$.trim(a);}});this.backgroundDismissAnimationParsed=animation.join(" ").toLowerCase();},animationParsed:"",closeAnimationParsed:"",_animationPrefix:"jconfirm-animation-",setAnimation:function(animation){this.animation=animation||this.animation;this._parseAnimation(this.animation,"o");},_parseAnimation:function(animation,which){which=which||"o";var animations=animation.split(",");var that=this;$.each(animations,function(k,a){if(a.indexOf(that._animationPrefix)===-1){animations[k]=that._animationPrefix+$.trim(a);}});var a_string=animations.join(" ").toLowerCase();if(which==="o"){this.animationParsed=a_string;}else{this.closeAnimationParsed=a_string;}return a_string;},setCloseAnimation:function(closeAnimation){this.closeAnimation=closeAnimation||this.closeAnimation;this._parseAnimation(this.closeAnimation,"c");},setAnimationSpeed:function(speed){this.animationSpeed=speed||this.animationSpeed;},columnClassParsed:"",setColumnClass:function(colClass){if(!this.useBootstrap){console.warn("cannot set columnClass, useBootstrap is set to false");return;}this.columnClass=colClass||this.columnClass;this._parseColumnClass(this.columnClass);this.$jconfirmBoxContainer.addClass(this.columnClassParsed);},_updateContentMaxHeight:function(){var height=$(window).height()-(this.$jconfirmBox.outerHeight()-this.$contentPane.outerHeight())-(this.offsetTop+this.offsetBottom);this.$contentPane.css({"max-height":height+"px"});},setBoxWidth:function(width){if(this.useBootstrap){console.warn("cannot set boxWidth, useBootstrap is set to true");return;}this.boxWidth=width;this.$jconfirmBox.css("width",width);},_parseColumnClass:function(colClass){colClass=colClass.toLowerCase();var p;switch(colClass){case"xl":case"xlarge":p="col-md-12";break;case"l":case"large":p="col-md-8 col-md-offset-2";break;case"m":case"medium":p="col-md-6 col-md-offset-3";break;case"s":case"small":p="col-md-4 col-md-offset-4";break;case"xs":case"xsmall":p="col-md-2 col-md-offset-5";break;default:p=colClass;}this.columnClassParsed=p;},initDraggable:function(){var that=this;var $t=this.$titleContainer;this.resetDrag();if(this.draggable){$t.on("mousedown",function(e){$t.addClass("jconfirm-hand");that.mouseX=e.clientX;that.mouseY=e.clientY;that.isDrag=true;});$(window).on("mousemove."+this._id,function(e){if(that.isDrag){that.movingX=e.clientX-that.mouseX+that.initialX;that.movingY=e.clientY-that.mouseY+that.initialY;that.setDrag();}});$(window).on("mouseup."+this._id,function(){$t.removeClass("jconfirm-hand");if(that.isDrag){that.isDrag=false;that.initialX=that.movingX;that.initialY=that.movingY;}});}},resetDrag:function(){this.isDrag=false;this.initialX=0;this.initialY=0;this.movingX=0;this.movingY=0;this.mouseX=0;this.mouseY=0;this.$jconfirmBoxContainer.css("transform","translate("+0+"px, "+0+"px)");},setDrag:function(){if(!this.draggable){return;}this.alignMiddle=false;var boxWidth=this.$jconfirmBox.outerWidth();var boxHeight=this.$jconfirmBox.outerHeight();var windowWidth=$(window).width();var windowHeight=$(window).height();var that=this;var dragUpdate=1;if(that.movingX%dragUpdate===0||that.movingY%dragUpdate===0){if(that.dragWindowBorder){var leftDistance=(windowWidth/2)-boxWidth/2;var topDistance=(windowHeight/2)-boxHeight/2;topDistance-=that.dragWindowGap;leftDistance-=that.dragWindowGap;if(leftDistance+that.movingX<0){that.movingX=-leftDistance;}else{if(leftDistance-that.movingX<0){that.movingX=leftDistance;}}if(topDistance+that.movingY<0){that.movingY=-topDistance;}else{if(topDistance-that.movingY<0){that.movingY=topDistance;}}}that.$jconfirmBoxContainer.css("transform","translate("+that.movingX+"px, "+that.movingY+"px)");}},_scrollTop:function(){if(typeof pageYOffset!=="undefined"){return pageYOffset;}else{var B=document.body;var D=document.documentElement;D=(D.clientHeight)?D:B;return D.scrollTop;}},_watchContent:function(){var that=this;if(this._timer){clearInterval(this._timer);}var prevContentHeight=0;this._timer=setInterval(function(){if(that.smoothContent){var contentHeight=that.$content.outerHeight()||0;if(contentHeight!==prevContentHeight){prevContentHeight=contentHeight;}var wh=$(window).height();var total=that.offsetTop+that.offsetBottom+that.$jconfirmBox.height()-that.$contentPane.height()+that.$content.height();if(total<wh){that.$contentPane.addClass("no-scroll");}else{that.$contentPane.removeClass("no-scroll");}}},this.watchInterval);},_overflowClass:"jconfirm-overflow",_hilightAnimating:false,highlight:function(){this.hiLightModal();},hiLightModal:function(){var that=this;if(this._hilightAnimating){return;}that.$body.addClass("hilight");var duration=parseFloat(that.$body.css("animation-duration"))||2;this._hilightAnimating=true;setTimeout(function(){that._hilightAnimating=false;that.$body.removeClass("hilight");},duration*1000);},_bindEvents:function(){var that=this;this.boxClicked=false;this.$scrollPane.click(function(e){if(!that.boxClicked){var buttonName=false;var shouldClose=false;var str;if(typeof that.backgroundDismiss==="function"){str=that.backgroundDismiss();}else{str=that.backgroundDismiss;}if(typeof str==="string"&&typeof that.buttons[str]!=="undefined"){buttonName=str;shouldClose=false;}else{if(typeof str==="undefined"||!!(str)===true){shouldClose=true;}else{shouldClose=false;}}if(buttonName){var btnResponse=that.buttons[buttonName].action.apply(that);shouldClose=(typeof btnResponse==="undefined")||!!(btnResponse);}if(shouldClose){that.close();}else{that.hiLightModal();}}that.boxClicked=false;});this.$jconfirmBox.click(function(e){that.boxClicked=true;});var isKeyDown=false;$(window).on("jcKeyDown."+that._id,function(e){if(!isKeyDown){isKeyDown=true;}});$(window).on("keyup."+that._id,function(e){if(isKeyDown){that.reactOnKey(e);isKeyDown=false;}});$(window).on("resize."+this._id,function(){that._updateContentMaxHeight();setTimeout(function(){that.resetDrag();},100);});},_cubic_bezier:"0.36, 0.55, 0.19",_getCSS:function(speed,bounce){return{"-webkit-transition-duration":speed/1000+"s","transition-duration":speed/1000+"s","-webkit-transition-timing-function":"cubic-bezier("+this._cubic_bezier+", "+bounce+")","transition-timing-function":"cubic-bezier("+this._cubic_bezier+", "+bounce+")"};},_setButtons:function(){var that=this;var total_buttons=0;if(typeof this.buttons!=="object"){this.buttons={};}$.each(this.buttons,function(key,button){total_buttons+=1;if(typeof button==="function"){that.buttons[key]=button={action:button};}that.buttons[key].text=button.text||key;that.buttons[key].btnClass=button.btnClass||"btn-default";that.buttons[key].action=button.action||function(){};that.buttons[key].keys=button.keys||[];that.buttons[key].isHidden=button.isHidden||false;that.buttons[key].isDisabled=button.isDisabled||false;$.each(that.buttons[key].keys,function(i,a){that.buttons[key].keys[i]=a.toLowerCase();});var button_element=$('<button type="button" class="btn"></button>').html(that.buttons[key].text).addClass(that.buttons[key].btnClass).prop("disabled",that.buttons[key].isDisabled).css("display",that.buttons[key].isHidden?"none":"").click(function(e){e.preventDefault();var res=that.buttons[key].action.apply(that,[that.buttons[key]]);that.onAction.apply(that,[key,that.buttons[key]]);that._stopCountDown();if(typeof res==="undefined"||res){that.close();}});that.buttons[key].el=button_element;that.buttons[key].setText=function(text){button_element.html(text);};that.buttons[key].addClass=function(className){button_element.addClass(className);};that.buttons[key].removeClass=function(className){button_element.removeClass(className);};that.buttons[key].disable=function(){that.buttons[key].isDisabled=true;button_element.prop("disabled",true);};that.buttons[key].enable=function(){that.buttons[key].isDisabled=false;button_element.prop("disabled",false);};that.buttons[key].show=function(){that.buttons[key].isHidden=false;button_element.css("display","");};that.buttons[key].hide=function(){that.buttons[key].isHidden=true;button_element.css("display","none");};that["$_"+key]=that["$$"+key]=button_element;that.$btnc.append(button_element);});if(total_buttons===0){this.$btnc.hide();}if(this.closeIcon===null&&total_buttons===0){this.closeIcon=true;}if(this.closeIcon){if(this.closeIconClass){var closeHtml='<i class="'+this.closeIconClass+'"></i>';this.$closeIcon.html(closeHtml);}this.$closeIcon.click(function(e){e.preventDefault();var buttonName=false;var shouldClose=false;var str;if(typeof that.closeIcon==="function"){str=that.closeIcon();}else{str=that.closeIcon;}if(typeof str==="string"&&typeof that.buttons[str]!=="undefined"){buttonName=str;shouldClose=false;}else{if(typeof str==="undefined"||!!(str)===true){shouldClose=true;}else{shouldClose=false;}}if(buttonName){var btnResponse=that.buttons[buttonName].action.apply(that);shouldClose=(typeof btnResponse==="undefined")||!!(btnResponse);}if(shouldClose){that.close();}});this.$closeIcon.show();}else{this.$closeIcon.hide();}},setTitle:function(string,force){force=force||false;if(typeof string!=="undefined"){if(typeof string==="string"){this.title=string;}else{if(typeof string==="function"){if(typeof string.promise==="function"){console.error("Promise was returned from title function, this is not supported.");}var response=string();if(typeof response==="string"){this.title=response;}else{this.title=false;}}else{this.title=false;}}}if(this.isAjaxLoading&&!force){return;}this.$title.html(this.title||"");this.updateTitleContainer();},setIcon:function(iconClass,force){force=force||false;if(typeof iconClass!=="undefined"){if(typeof iconClass==="string"){this.icon=iconClass;}else{if(typeof iconClass==="function"){var response=iconClass();if(typeof response==="string"){this.icon=response;}else{this.icon=false;}}else{this.icon=false;}}}if(this.isAjaxLoading&&!force){return;}this.$icon.html(this.icon?'<i class="'+this.icon+'"></i>':"");this.updateTitleContainer();},updateTitleContainer:function(){if(!this.title&&!this.icon){this.$titleContainer.hide();}else{this.$titleContainer.show();}},setContentPrepend:function(content,force){if(!content){return;}this.contentParsed.prepend(content);},setContentAppend:function(content){if(!content){return;}this.contentParsed.append(content);},setContent:function(content,force){force=!!force;var that=this;if(content){this.contentParsed.html("").append(content);}if(this.isAjaxLoading&&!force){return;}this.$content.html("");this.$content.append(this.contentParsed);setTimeout(function(){that.$body.find("input[autofocus]:visible:first").focus();},100);},loadingSpinner:false,showLoading:function(disableButtons){this.loadingSpinner=true;this.$jconfirmBox.addClass("loading");if(disableButtons){this.$btnc.find("button").prop("disabled",true);}},hideLoading:function(enableButtons){this.loadingSpinner=false;this.$jconfirmBox.removeClass("loading");if(enableButtons){this.$btnc.find("button").prop("disabled",false);}},ajaxResponse:false,contentParsed:"",isAjax:false,isAjaxLoading:false,_parseContent:function(){var that=this;var e="&nbsp;";if(typeof this.content==="function"){var res=this.content.apply(this);if(typeof res==="string"){this.content=res;}else{if(typeof res==="object"&&typeof res.always==="function"){this.isAjax=true;this.isAjaxLoading=true;res.always(function(data,status,xhr){that.ajaxResponse={data:data,status:status,xhr:xhr};that._contentReady.resolve(data,status,xhr);if(typeof that.contentLoaded==="function"){that.contentLoaded(data,status,xhr);}});this.content=e;}else{this.content=e;}}}if(typeof this.content==="string"&&this.content.substr(0,4).toLowerCase()==="url:"){this.isAjax=true;this.isAjaxLoading=true;var u=this.content.substring(4,this.content.length);$.get(u).done(function(html){that.contentParsed.html(html);}).always(function(data,status,xhr){that.ajaxResponse={data:data,status:status,xhr:xhr};that._contentReady.resolve(data,status,xhr);if(typeof that.contentLoaded==="function"){that.contentLoaded(data,status,xhr);}});}if(!this.content){this.content=e;}if(!this.isAjax){this.contentParsed.html(this.content);this.setContent();that._contentReady.resolve();}},_stopCountDown:function(){clearInterval(this.autoCloseInterval);if(this.$cd){this.$cd.remove();}},_startCountDown:function(){var that=this;var opt=this.autoClose.split("|");if(opt.length!==2){console.error("Invalid option for autoClose. example 'close|10000'");return false;}var button_key=opt[0];var time=parseInt(opt[1]);if(typeof this.buttons[button_key]==="undefined"){console.error("Invalid button key '"+button_key+"' for autoClose");return false;}var seconds=Math.ceil(time/1000);this.$cd=$('<span class="countdown"> ('+seconds+")</span>").appendTo(this["$_"+button_key]);this.autoCloseInterval=setInterval(function(){that.$cd.html(" ("+(seconds-=1)+") ");if(seconds<=0){that["$$"+button_key].trigger("click");that._stopCountDown();}},1000);},_getKey:function(key){switch(key){case 192:return"tilde";case 13:return"enter";case 16:return"shift";case 9:return"tab";case 20:return"capslock";case 17:return"ctrl";case 91:return"win";case 18:return"alt";case 27:return"esc";case 32:return"space";}var initial=String.fromCharCode(key);if(/^[A-z0-9]+$/.test(initial)){return initial.toLowerCase();}else{return false;}},reactOnKey:function(e){var that=this;var a=$(".jconfirm");if(a.eq(a.length-1)[0]!==this.$el[0]){return false;}var key=e.which;if(this.$content.find(":input").is(":focus")&&/13|32/.test(key)){return false;}var keyChar=this._getKey(key);if(keyChar==="esc"&&this.escapeKey){if(this.escapeKey===true){this.$scrollPane.trigger("click");}else{if(typeof this.escapeKey==="string"||typeof this.escapeKey==="function"){var buttonKey;if(typeof this.escapeKey==="function"){buttonKey=this.escapeKey();}else{buttonKey=this.escapeKey;}if(buttonKey){if(typeof this.buttons[buttonKey]==="undefined"){console.warn("Invalid escapeKey, no buttons found with key "+buttonKey);}else{this["$_"+buttonKey].trigger("click");}}}}}$.each(this.buttons,function(key,button){if(button.keys.indexOf(keyChar)!==-1){that["$_"+key].trigger("click");}});},setDialogCenter:function(){console.info("setDialogCenter is deprecated, dialogs are centered with CSS3 tables");},_unwatchContent:function(){clearInterval(this._timer);},close:function(onClosePayload){var that=this;if(typeof this.onClose==="function"){this.onClose(onClosePayload);}this._unwatchContent();$(window).unbind("resize."+this._id);$(window).unbind("keyup."+this._id);$(window).unbind("jcKeyDown."+this._id);if(this.draggable){$(window).unbind("mousemove."+this._id);$(window).unbind("mouseup."+this._id);this.$titleContainer.unbind("mousedown");}that.$el.removeClass(that.loadedClass);$("body").removeClass("jconfirm-no-scroll-"+that._id);that.$jconfirmBoxContainer.removeClass("jconfirm-no-transition");setTimeout(function(){that.$body.addClass(that.closeAnimationParsed);that.$jconfirmBg.addClass("jconfirm-bg-h");var closeTimer=(that.closeAnimation==="none")?1:that.animationSpeed;setTimeout(function(){that.$el.remove();var l=w.jconfirm.instances;var i=w.jconfirm.instances.length-1;for(i;i>=0;i--){if(w.jconfirm.instances[i]._id===that._id){w.jconfirm.instances.splice(i,1);}}if(!w.jconfirm.instances.length){if(that.scrollToPreviousElement&&w.jconfirm.lastFocused&&w.jconfirm.lastFocused.length&&$.contains(document,w.jconfirm.lastFocused[0])){var $lf=w.jconfirm.lastFocused;if(that.scrollToPreviousElementAnimate){var st=$(window).scrollTop();var ot=w.jconfirm.lastFocused.offset().top;var wh=$(window).height();if(!(ot>st&&ot<(st+wh))){var scrollTo=(ot-Math.round((wh/3)));$("html, body").animate({scrollTop:scrollTo},that.animationSpeed,"swing",function(){$lf.focus();});}else{$lf.focus();}}else{$lf.focus();}w.jconfirm.lastFocused=false;}}if(typeof that.onDestroy==="function"){that.onDestroy();}},closeTimer*0.4);},50);return true;},open:function(){if(this.isOpen()){return false;}this._buildHTML();this._bindEvents();this._open();return true;},setStartingPoint:function(){var el=false;if(this.animateFromElement!==true&&this.animateFromElement){el=this.animateFromElement;w.jconfirm.lastClicked=false;}else{if(w.jconfirm.lastClicked&&this.animateFromElement===true){el=w.jconfirm.lastClicked;w.jconfirm.lastClicked=false;}else{return false;}}if(!el){return false;}var offset=el.offset();var iTop=el.outerHeight()/2;var iLeft=el.outerWidth()/2;iTop-=this.$jconfirmBox.outerHeight()/2;iLeft-=this.$jconfirmBox.outerWidth()/2;var sourceTop=offset.top+iTop;sourceTop=sourceTop-this._scrollTop();var sourceLeft=offset.left+iLeft;var wh=$(window).height()/2;var ww=$(window).width()/2;var targetH=wh-this.$jconfirmBox.outerHeight()/2;var targetW=ww-this.$jconfirmBox.outerWidth()/2;sourceTop-=targetH;sourceLeft-=targetW;if(Math.abs(sourceTop)>wh||Math.abs(sourceLeft)>ww){return false;}this.$jconfirmBoxContainer.css("transform","translate("+sourceLeft+"px, "+sourceTop+"px)");},_open:function(){var that=this;if(typeof that.onOpenBefore==="function"){that.onOpenBefore();}this.$body.removeClass(this.animationParsed);this.$jconfirmBg.removeClass("jconfirm-bg-h");this.$body.focus();that.$jconfirmBoxContainer.css("transform","translate("+0+"px, "+0+"px)");setTimeout(function(){that.$body.css(that._getCSS(that.animationSpeed,1));that.$body.css({"transition-property":that.$body.css("transition-property")+", margin"});that.$jconfirmBoxContainer.addClass("jconfirm-no-transition");that._modalReady.resolve();if(typeof that.onOpen==="function"){that.onOpen();}that.$el.addClass(that.loadedClass);},this.animationSpeed);},loadedClass:"jconfirm-open",isClosed:function(){return!this.$el||this.$el.parent().length===0;},isOpen:function(){return!this.isClosed();},toggle:function(){if(!this.isOpen()){this.open();}else{this.close();}}};w.jconfirm.instances=[];w.jconfirm.lastFocused=false;w.jconfirm.pluginDefaults={template:'<div class="jconfirm"><div class="jconfirm-bg jconfirm-bg-h"></div><div class="jconfirm-scrollpane"><div class="jconfirm-row"><div class="jconfirm-cell"><div class="jconfirm-holder"><div class="jc-bs3-container"><div class="jc-bs3-row"><div class="jconfirm-box-container jconfirm-animated"><div class="jconfirm-box" role="dialog" aria-labelledby="labelled" tabindex="-1"><div class="jconfirm-closeIcon">&times;</div><div class="jconfirm-title-c"><span class="jconfirm-icon-c"></span><span class="jconfirm-title"></span></div><div class="jconfirm-content-pane"><div class="jconfirm-content"></div></div><div class="jconfirm-buttons"></div><div class="jconfirm-clear"></div></div></div></div></div></div></div></div></div></div>',title:"Hello",titleClass:"",type:"default",typeAnimated:true,draggable:true,dragWindowGap:15,dragWindowBorder:true,animateFromElement:true,alignMiddle:true,smoothContent:true,content:"Are you sure to continue?",buttons:{},defaultButtons:{ok:{action:function(){}},close:{action:function(){}}},contentLoaded:function(){},icon:"",lazyOpen:false,bgOpacity:null,theme:"light",animation:"scale",closeAnimation:"scale",animationSpeed:400,animationBounce:1,escapeKey:true,rtl:false,container:"body",containerFluid:false,backgroundDismiss:false,backgroundDismissAnimation:"shake",autoClose:false,closeIcon:null,closeIconClass:false,watchInterval:100,columnClass:"col-md-4 col-md-offset-4 col-sm-6 col-sm-offset-3 col-xs-10 col-xs-offset-1",boxWidth:"50%",scrollToPreviousElement:true,scrollToPreviousElementAnimate:true,useBootstrap:true,offsetTop:40,offsetBottom:40,bootstrapClasses:{container:"container",containerFluid:"container-fluid",row:"row"},onContentReady:function(){},onOpenBefore:function(){},onOpen:function(){},onClose:function(){},onDestroy:function(){},onAction:function(){}};var keyDown=false;$(window).on("keydown",function(e){if(!keyDown){var $target=$(e.target);var pass=false;if($target.closest(".jconfirm-box").length){pass=true;}if(pass){$(window).trigger("jcKeyDown");}keyDown=true;}});$(window).on("keyup",function(){keyDown=false;});w.jconfirm.lastClicked=false;$(document).on("mousedown","button, a, [jc-source]",function(){w.jconfirm.lastClicked=$(this);});}));;const voucherCartUrl='/api/v1/cart';const generateRazorpayOrderUrl='/api/v1/cart/generate-rp-order';const checkoutUrl='/api/v1/cart/checkout';const transactionCancelledUrl='/api/v1/cart/cancel-rp-order';const cartTransferUrl='/api/v1/cart/transfer/';const userCartCouponsUrl='/api/v1/vouchers?transaction_type=PURCHASE&voucher_type=GC';const getCartLoyaltyExchangeRateUrl='/api/v1/loyalty-points-value';const clientId='1207f98b-8419-4a6c-a296-5b0fb1717169';const clientSecret='Abcd@123';let orderId;let orderItems=[];let cartCurrencyCode;let cartCurrency;let taxes;let tax_amount;let userId;let cartApplyLoyalty;let cartLoyaltyPoints;let cartLoyaltyExchangeRate;let cartLoyaltyPointsApplied;let cartLoyaltyDiscountApplied;let voucherFilters;const voucherListingUrl='/api/v1/search/vouchers';const voucherDetailUrl='/api/v1/voucher-details/';let voucherPageSize;let voucherFilterObject={};let voucherTotalElements;let voucherPageNumber;let voucherCurrentPageLength;let filterMinPriceSlider;let filterMaxPriceSlider;let filterSelectedMinPrice;let filterSelectedMaxPrice;const promotionListingUrl='/api/v1/search/promotions';let cartCouponsList=new Map();let cartAppliedCoupon;let cartTotal;function isHomePage(){return window.location.pathname==='/';}
(function($,Drupal){Drupal.behaviors.bbqBooking={attach:function(context,settings){userId=settings.user.uid;}};$.fakeLoader({spinner:'spinner6',bgColor:'rgba(0, 0, 0, 0.5)'});class Voucher{constructor(voucher){this.barCode=voucher.bar_code;this.currency=voucher.currency;this.denomination=voucher.denomination;this.title=voucher.title;this.description=voucher.description;this.applicability=voucher.applicability;}}
function updateCartCount(){$('#cart-count').html(orderItems.length);}
function isVoucherPage(){return window.location.pathname==='/vouchers';}
function isPromotionPage(){return window.location.pathname==='/promotions';}
function isVoucherDetailPage(){return window.location.pathname.match(/\/(vouchers.+)/);}
function getUserLoyaltyPoints(){$.get({beforeSend:function(){loaderStart();},complete:function(){loaderStop();},url:getCartLoyaltyExchangeRateUrl,data:{amount:1,currency:cartCurrency},success(data){cartLoyaltyPoints=data.available_points;cartLoyaltyExchangeRate=data.redeem_amount/data.redeemable_points;calculateLoyaltyPoints();}});}
function calculateLoyaltyPoints(){if(cartLoyaltyPoints&&cartLoyaltyPoints>0&&cartLoyaltyExchangeRate){const applicableLoyaltyPoints=getCartTotal(true)/cartLoyaltyExchangeRate;if(cartLoyaltyPoints>=applicableLoyaltyPoints){cartLoyaltyPointsApplied=applicableLoyaltyPoints;}else{cartLoyaltyPointsApplied=cartLoyaltyPoints;}
cartLoyaltyDiscountApplied=cartLoyaltyPointsApplied*cartLoyaltyExchangeRate;setLoyaltyPointsHtml();}else{$('#cart-loyalty-points').empty();}}
$(document).on('click','#apply-cart-loyalty-points',(e)=>{cartApplyLoyalty=true;setAmountDetails();});$(document).on('click','#remove-cart-loyalty-points',(e)=>{cartApplyLoyalty=false;setAmountDetails();});function setAmountDetails(){calculateLoyaltyPoints();setCartSubTotal();calculateTaxAmount();setCartTotal();}
function setLoyaltyPointsHtml(){let anchorLink;let loyaltyText;let skipLoyalty=false;if(cartApplyLoyalty){anchorLink='<a href="#" class="remove-link" id="remove-cart-loyalty-points">Remove</a>';loyaltyText=Math.ceil(cartLoyaltyPointsApplied)+' Smiles applied for this transaction';}else{if(getCartTotal()>0){anchorLink=`<a href="#" class="add-link" id="apply-cart-loyalty-points">Add</a>`;loyaltyText=cartCurrencyCode+cartLoyaltyDiscountApplied.toFixed(2)+' discount applicable by using '+Math.ceil(cartLoyaltyPointsApplied)+' Smiles';}else{skipLoyalty=true;}}
if(!skipLoyalty){let loyaltyHtml=`<div class="left">
                          <div class="heading">
                            <h5>BBQN Smiles</h5>
                            ${anchorLink}
                          </div>
                          <span>${loyaltyText}</span>
                          <a href="#" class="t-and-c-text">*T&Cs applicable</a>
                        </div>`;if(cartApplyLoyalty){loyaltyHtml+=`<div class="right">- ${cartCurrencyCode}${cartLoyaltyDiscountApplied.toFixed(2)}</div>`;}
$('#cart-loyalty-points').html(loyaltyHtml);}else{$('#cart-loyalty-points').empty();}}
$('#cart-show-coupons').click((e)=>{$('#cart-main-info').hide();$('#cart-coupons').show();$.get({beforeSend:function(){loaderStart();},complete:function(){loaderStop();},url:userCartCouponsUrl,success(data){loadCoupons(data);}});});$(document).on('click','.t-and-c-text',(e)=>{e.preventDefault();const redirectWindow=window.open('/terms-condition','_blank');redirectWindow.location;});function loadCoupons(data){data.vouchers.forEach((coupon)=>{cartCouponsList.set(coupon.bar_code,new Voucher(coupon));});if(data.vouchers&&data.vouchers.length>0){buildCouponsHtml();}else{$('#cart-coupons-listing').html('<div>No coupons available.</div>');}}
function buildCouponsHtml(){let couponHtml='';cartCouponsList.forEach((v,k)=>{const couponItem=couponItemHtml(v.title,v.barCode,v.currency,v.denomination,getCartTotal(),v.description,v.applicability);if(couponItem){couponHtml+=couponItem;}});$('#cart-coupons-listing').html(couponHtml);}
function couponItemHtml(title,code,currency,amount,tempSubTotal,description,applicability){let couponClass='cart-apply-coupon';let couponText='Apply coupon';if(cartAppliedCoupon){if(code===cartAppliedCoupon){couponClass='coupon-applied';couponText='Applied';}else{couponClass+=' anchor-disabled';}}
if(amount>tempSubTotal){if(couponClass.substr(0,14)!=='coupon-applied'){couponClass+=' anchor-disabled';}}
if(!applicability){couponClass='anchor-disabled';}
return `<div class="coupon-card row align-center space-between">
            <div class="coupon__left">
              <div class="coupon-title">${title}</div>
              <div class="coupon-description">${getCurrencyCode(currency)}${amount.toLocaleString("en")} OFF</div>
              ${getCouponDescription(description)}
            </div>
            <div class="coupon__right">
              <div class="coupon-cta">
                <a id="${code}" class="${couponClass}" href="#">${couponText}</a>
              </div>
              <div class="coupon-code">Code:
                <span>${code}</span>
              </div>
            </div>
          </div>`}
$('.cart--curtain .close').click(function(e){$('.cart--curtain').removeClass('cart--visible');e.preventDefault();cartAppliedCoupon=undefined;cartApplyLoyalty=undefined;cartLoyaltyPointsApplied=undefined;cartLoyaltyExchangeRate=undefined;cartLoyaltyPoints=undefined;$('#cart-applied-vouchers').empty();enableCouponLink();});$('#cart-coupons-vouchers-close').click((e)=>{e.stopPropagation();$('#cart-coupons').hide();$('#cart-main-info').show();});function setCartSubTotal(){$('#cart-sub-total').html(`${cartCurrencyCode}${getCartSubTotal().toLocaleString("en")}`);}
function getCartSubTotal(loyalty=false,coupon=false){let total=cartTotal;return total;}
function setCartTotal(){$('#cart-total-price').html(`${cartCurrencyCode}${getCartTotal().toLocaleString("en")}`);}
function getCartTotal(loyalty=false,coupon=false){let total=cartTotal+tax_amount;if(cartApplyLoyalty&&!loyalty){total-=cartLoyaltyDiscountApplied;}
if(cartAppliedCoupon&&!coupon){total-=cartCouponsList.get(cartAppliedCoupon).denomination;}
return total;}
$(document).on('click','.cart-apply-coupon',(e)=>{const barCode=e.target.id;const voucher=cartCouponsList.get(barCode);const validCoupon=validateTotal(voucher.denomination,getCartTotal());if(validCoupon){disableCouponLink();cartAppliedCoupon=voucher.barCode;buildCouponsHtml();$('#cart-applied-vouchers').append(appliedCouponHtml(voucher));setAmountDetails();}});$(document).on('click','.cart-remove-coupon',()=>{cartAppliedCoupon=undefined;$('#cart-applied-vouchers').empty();enableCouponLink();setAmountDetails();});function appliedCouponHtml(voucher){if(voucher){let divId=`applied-coupon-${voucher.barCode}`;const offerText=`${getCurrencyCode(voucher.currency)} ${voucher.denomination.toLocaleString("en")} discount on the bill`;return `<div id=${divId} class="left">
                <div class="heading row align-center">
                  <h5 class="coupon">${voucher.barCode}</h5>
                  <a href="#" id="${voucher.barCode}" class="remove-link cart-remove-coupon">Remove</a>
                </div>
                <span>${offerText}</span>
              </div>`;}}
function disableCouponLink(){$('#cart-show-coupons').addClass('anchor-disabled');}
function enableCouponLink(){$('#cart-show-coupons').removeClass('anchor-disabled');}
function validateTotal(amount,total){if(amount>total){toastr.error('Please add more items to apply this coupon');return false;}
return true;}
function getCart(){const localOrderId=localStorage.getItem('orderId');let queryParam;if(localOrderId){queryParam={order_id:parseInt(localOrderId,10)};}
$.ajax({dataType:'json',method:'GET',url:voucherCartUrl,beforeSend:function(){loaderStart();},complete:function(){loaderStop();},data:queryParam,headers:getHeaders(),success(data){if($.isEmptyObject(data)||(data&&data.order_items&&data.order_items.length===0)){showEmptyCart();}else if(data&&data.order_items&&data.order_items.length>0){orderId=data.order_id;$('#cart-title').text(`My Cart (${data.order_items.length} Items)`);let cartItemsHtml='';if(!cartCurrency){cartCurrency=data.currency_code;}
if(!cartCurrencyCode){cartCurrencyCode=getCurrencyCode(cartCurrency);}
orderItems=[];data.order_items.forEach((item)=>{orderItems.push(new OrderItem(item));const unitPrice=`${cartCurrencyCode}${item.unit_price.toLocaleString("en")}`;const totalPrice=`${cartCurrencyCode}${item.total_price.toLocaleString("en")}`;cartQuantity=item.quantity;cartItemsHtml+=getCartItemHtml(item.image,item.title,unitPrice,totalPrice,item.product_id,cartQuantity);});taxes=data.taxes;$('#cart-items').html(cartItemsHtml);cartTotal=data.total_price;Moengage.track_event("Happinesscard_Checkout",{"Happiness_Card_Cart_Count":cartQuantity,"Mobile_Number":localStorage.getItem('mobile_number'),"Login_Type":localStorage.getItem('email'),"Happiness_Cart_Checkout_Amount":cartTotal,});if(isAnonymous()){$('#cart-coupon-loyalty-points').hide();}else{getUserLoyaltyPoints();}
setAmountDetails();}
updateCartCount();},});}
function calculateTaxAmount(){let totalTax=0;let taxHtml='';let amount=getCartSubTotal();if(taxes){taxes.forEach((tax)=>{const taxAmount=amount*tax.tax_percentage/100;taxHtml+=getTaxHtml(tax.tax,roundTaxAmount(taxAmount));totalTax+=taxAmount;});}
tax_amount=parseFloat(roundTaxAmount(totalTax));$('#cart-tax-details').html(taxHtml);}
function roundTaxAmount(amount){return amount.toFixed(2);}
function getTaxHtml(label,amount){return `<div class="gst">
              <h5>${label}</h5>
              <span>${cartCurrencyCode}${amount}</span>
            </div>`}
function showEmptyCart(){$('#cart-items-coupons-loyalty-total').hide();$('#cart-title').text('You have no items in your cart');}
function getCartItemHtml(image,title,unitPrice,totalPrice,productId,quantity){return `<div id="cart-line-item-${productId}" class="cart__item">
            <img data-src="${image}" alt="V1" class="lazyload">
            <div class="cart__item__title">
                <h5>${title}</h5>
                <span>${unitPrice}</span>
            </div>
            <div class="cart__item__form-wrap">
                <form id="cart-voucher-${productId}" class="form form--cart">
                    <div class="value-button cart-decrease-item"></div>
                    <input class="voucher-quantity-${productId}" class="" type="text" class="number" value="${quantity}" readonly/>
                    <div class="value-button cart-increase-item"></div>
                </form>
            </div>
            <div id="cart-line-item-total-${productId}" class="cart__item__total">
                ${totalPrice.toLocaleString("en")}
            </div>
        </div>`}
function updateAllVouchers(items){if(items.length>0){orderItems=[];items.forEach((item)=>{orderItems.push(new OrderItem(item));const productId=item.product_id;const addToCartButton=$(`#add-to-cart-${productId}`);addToCartButton.next().show();addToCartButton.hide();const quantityElement=$(`.voucher-quantity-${productId}`);quantityElement.val(item.quantity);});updateCartCount();}}
function voucherHttpRequest(url,requestMethod='GET',postData,populateAll,productId,isCart=false){$.ajax({dataType:'json',method:requestMethod,beforeSend:function(){loaderStart();},complete:function(){loaderStop();},url,data:populateAll?postData:JSON.stringify(postData),headers:getHeaders(),success(data){if(data.order_id){if(populateAll){orderId=data.order_id;updateAllVouchers(data.order_items);}else{updateOrder(data,productId,isCart);}}},});}
function redirectToVouchers(){setTimeout(function(){window.location.href='/profile#vouchers';},1000);}
function updateOrder(data,isCart){if(!orderId){orderId=data.order_id;localStorage.setItem('orderId',orderId);}
orderItems=[];$('#cart-total-price').html(`${cartCurrencyCode}${data.total_price.toLocaleString("en")}`);data.order_items.forEach((orderItem)=>{$(`.voucher-quantity-${orderItem.product_id}`).val(orderItem.quantity);if(isCart){$(`#cart-line-item-total-${orderItem.product_id}`).html(`${cartCurrencyCode}${orderItem.total_price}`);}
orderItems.push(new OrderItem(orderItem));});if(isCart){cartTotal=data.total_price;setAmountDetails();if(orderItems.length===0){showEmptyCart();}else{$('#cart-title').text(`My Cart (${orderItems.length} Items)`);$('#cart-main-info').children().filter(':not(.cart__heading)').show();}}
updateCartCount();}
function getVoucherId(event,isCart=false){if(isCart){return parseInt($(event.target).closest('form').attr('id').substr(13),10);}else{return parseInt($(event.target).closest('article').attr('id'),10);}}
function addToCart(event,update=true,increase=true,isCart=false){const productId=getVoucherId(event,isCart);const quantityElement=$(`.voucher-quantity-${productId}`);let currentQuantity=parseInt(quantityElement.val(),10);if(increase){currentQuantity++;if(update){const orderItemId=orderItems.find((item)=>item.productId===productId).orderItemId;const body=new VoucherPostData(undefined,orderItemId,currentQuantity);voucherHttpRequest(voucherCartUrl,'PUT',body,false,productId,isCart);}else{const body=new VoucherPostData(productId,undefined,currentQuantity);voucherHttpRequest(voucherCartUrl,'POST',body,false,productId,isCart);}}else{let orderItemId;let unitPrice;for(let i=0;i<orderItems.length;i++){if(orderItems[i].productId===productId){orderItemId=orderItems[i].orderItemId;unitPrice=orderItems[i].unitPrice;}}
cartAppliedCoupon=undefined;$('#cart-applied-vouchers').empty();enableCouponLink();if(currentQuantity>1){currentQuantity--;const body=new VoucherPostData(undefined,orderItemId,currentQuantity);voucherHttpRequest(voucherCartUrl,'PUT',body,false,productId,isCart);}else{quantityElement.val(0);if(isVoucherPage()||isHomePage()||isVoucherDetailPage()){const addToCartButton=$(`#add-to-cart-${productId}`);addToCartButton.show();addToCartButton.next().hide();}
if((isVoucherPage()||isHomePage()||isVoucherDetailPage())&&isCart){const addToCartButton=$(`#add-to-cart-${productId}`);addToCartButton.show();addToCartButton.next().hide();$(`#cart-line-item-${productId}`).remove();}else{$(`#cart-line-item-${productId}`).remove();}
voucherHttpRequest(`${voucherCartUrl}/${orderId}/${orderItemId}`,'DELETE',undefined,false,productId,isCart);}}}
$('.show-cart').click(function(e){$('.cart--curtain').addClass('cart--visible');e.preventDefault();getCart();});$(document).on('click','.button--atc',(e)=>{const addToCartButton=$(`#add-to-cart-${getVoucherId(e)}`);Moengage.track_event("Home_Happinesscard",{"Home_Click_Count":"Clicked","Mobile_Number":localStorage.getItem('mobile_number'),"Login_Type":localStorage.getItem('email'),});addToCartButton.next().show();addToCartButton.hide();addToCart(e,false);});$(document).on('click','.increase-item',(e)=>{var voucherVal=$(e.target).closest('.voucher--details').find('.voucher--details-title a').text();Moengage.track_event("Happinesscard_Added",{"Home_Click_Count":"Clicked","Mobile_Number":localStorage.getItem('mobile_number'),"Login_Type":localStorage.getItem('email'),"Happiness_Card_Title_Name":voucherVal});addToCart(e);});$(document).on('click','.decrease-item',(e)=>{addToCart(e,true,false);});$(document).on('click','.cart-increase-item',(e)=>{var voucherVal=$(e.target).closest('.cart__item').find('.cart__item__title h5').text();Moengage.track_event("Happinesscard_Added",{"Home_Click_Count":"Clicked","Mobile_Number":localStorage.getItem('mobile_number'),"Login_Type":localStorage.getItem('email'),"Happiness_Card_Title_Name":voucherVal});addToCart(e,true,true,true);});$(document).on('click','.cart-decrease-item',(e)=>{addToCart(e,true,false,true);});class VoucherPostData{constructor(productId,orderItemId,quantity){this.order_id=orderId?orderId:undefined;this.product_id=productId?productId:undefined;this.order_item_id=orderItemId?orderItemId:undefined;this.quantity=quantity;}}
class OrderItem{constructor(orderItem){this.orderItemId=orderItem.order_item_id;this.quantity=orderItem.quantity;this.productId=orderItem.product_id;this.unitPrice=orderItem.unit_price;this.totalPrice=orderItem.total_price;}}
function completeVoucherCheckout(data){$.ajax({method:'POST',url:checkoutUrl,data:JSON.stringify(data),beforeSend:function(){loaderStart();},complete:function(){loaderStop();},headers:getHeaders(),success(){showEmptyCart();toastr.success('Order Placed Successfully.');$('#cart-count').html(0);$('.cart--curtain').removeClass('cart--visible');Moengage.track_event("Happinesscard_Order_Status",{"Happiness_Card_Success":"Success","Mobile_Number":localStorage.getItem('mobile_number'),"Login_Type":localStorage.getItem('email'),});destroyCartLocalStorage();redirectToVouchers();},error(){toastr.error('We are unable to process your order now. Please contact 08035002040 for further assistance');Moengage.track_event("Happinesscard_Order_Status",{"Happiness_Card_Success":"Failure","Mobile_Number":localStorage.getItem('mobile_number'),"Login_Type":localStorage.getItem('email'),"Error":"We are unable to process your order now. Please contact 08035002040 for further assistance"});$(".cart--curtain .close").trigger("click");}});}
function transactionCancelled(data){$.ajax({method:'POST',url:transactionCancelledUrl,data:JSON.stringify(data),headers:getHeaders(),});}
function destroyCartLocalStorage(){localStorage.removeItem('orderId');localStorage.removeItem('voucher-proceed-to-checkout');}
function generateRazorpayOrder(){let discount=0;let bar_code=undefined;let loyalty_points=undefined;if(cartAppliedCoupon){bar_code=cartAppliedCoupon;discount+=cartCouponsList.get(cartAppliedCoupon).denomination;}
if(cartApplyLoyalty){loyalty_points=cartLoyaltyPointsApplied;discount+=cartLoyaltyDiscountApplied;}
if(discount===0){discount=undefined;}
$.ajax({dataType:'json',data:{discount,loyalty_points,bar_code},beforeSend:function(){loaderStart();},complete:function(){loaderStop();},url:generateRazorpayOrderUrl,headers:getHeaders(),success(data){proceedToVoucherCheckout(data);},error(data){toastr.error(data.responseJSON.fieldErrors[0].message);}});}
$('#proceed-to-checkout').click(()=>{if(isAnonymous()){$('.button--signin').trigger('click');}else{if(getCartTotal()>0){generateRazorpayOrder();}else{let data={};if(cartApplyLoyalty){data.loyalty_points=cartLoyaltyPointsApplied;}
if(cartAppliedCoupon){data.bar_code=cartAppliedCoupon;}
if(data){completeVoucherCheckout(data);}}}});function loaderStop(){$('.fakeLoader').removeClass('display-block');$('.fakeLoader').addClass('hide');}
function loaderStart(){$('.fakeLoader').removeClass('hide');$('.fakeLoader').addClass('display-block');}
function proceedToVoucherCheckout(data){let quantity=0;for(let i=0;i<orderItems.length;i++){quantity+=parseInt(orderItems[i].quantity);}
Moengage.track_event("Happinesscard_Pay",{"Mobile_Number":localStorage.getItem('mobile_number'),"Login_Type":localStorage.getItem('email'),"Happiness_Cart_Checkout_Amount":getCartTotal(),});const options={key:data.key,order_id:data.order_id,amount:data.amount,currency:data.currency,name:'Barbeque Nation',image:'/themes/custom/bbq_nation/assets/images/bbqn-logo.svg',handler:((transaction)=>{if(cartApplyLoyalty){transaction.loyalty_points=cartLoyaltyPointsApplied;}
if(cartAppliedCoupon){transaction.bar_code=cartAppliedCoupon;}
completeVoucherCheckout(transaction);}),prefill:{"contact":data.mobile_number,"email":data.email,},};window.rzpay=new Razorpay(options);rzpay.on('payment.failed',(response)=>{transactionCancelled(response);});rzpay.open();}
$(()=>{if(!isAnonymous()){destroyCartLocalStorage();}
if(isVoucherPage()||isPromotionPage()){buildIdQuery(1);}
if(isHomePage()||isVoucherDetailPage()||isVoucherPage()){if(isHomePage()){const observerConfig={childList:true,};const voucherBlock=document.getElementById('homepage-gift-vouchers');const observer=new MutationObserver(()=>{setInitialQuantity();observer.disconnect();});observer.observe(voucherBlock,observerConfig);}else{setInitialQuantity();}}});$(document).on('click','.logout',()=>{destroyCartLocalStorage();});function enableFilterClearAllButton(){$('#clear-all-voucher-filters').show();}
function disableFilterClearAllButton(){$('#clear-all-voucher-filters').hide();}
function buildMultiOrSingleMatchQuery(ids,key){voucherFilterObject.page=0;const singleKey=`${key}.equals`;const multiKey=`${key}.in`;if(ids){if(key==='countryId'&&ids===0&&voucherFilterObject[singleKey]){delete voucherFilterObject[singleKey];}else if(key==='countryId'){voucherFilterObject[singleKey]=ids;}else if(voucherFilterObject[singleKey]===ids){delete voucherFilterObject[singleKey];}else if(voucherFilterObject[multiKey]&&voucherFilterObject[multiKey].includes(ids)){const index=voucherFilterObject[multiKey].indexOf(ids);if(index>-1){voucherFilterObject[multiKey].splice(index,1);}
if(voucherFilterObject[multiKey].length===1){const value=voucherFilterObject[multiKey][0];delete voucherFilterObject[multiKey];voucherFilterObject[singleKey]=value;}}else if(voucherFilterObject[singleKey]){delete Object.assign(voucherFilterObject,{[multiKey]:voucherFilterObject[singleKey]})[singleKey];voucherFilterObject[multiKey]=[voucherFilterObject[multiKey]];voucherFilterObject[multiKey].push(ids);}else if(voucherFilterObject[multiKey]){voucherFilterObject[multiKey].push(ids);}else if(!Array.isArray(ids)){voucherFilterObject[singleKey]=ids;}else if(ids.length>1){voucherFilterObject[multiKey].push(ids.join());}else{voucherFilterObject[singleKey]=ids.join();}}}
function buildPriceQuery(minPrice,maxPrice){voucherFilterObject.page=0;if(minPrice){voucherFilterObject['price.greaterThanOrEqual']=minPrice;}
if(maxPrice){voucherFilterObject['price.lessThanOrEqual']=maxPrice;}}
function buildIdQuery(countries,cities,branches){buildMultiOrSingleMatchQuery(countries,'countryId');buildMultiOrSingleMatchQuery(cities,'cityId');buildMultiOrSingleMatchQuery(branches,'branchId');}
function buildAdditionFilterQuery(treatTypes,foodClassifications,dayOfWeeks,voucherTypes){buildMultiOrSingleMatchQuery(treatTypes,'treatType');buildMultiOrSingleMatchQuery(foodClassifications,'foodClassification');buildMultiOrSingleMatchQuery(dayOfWeeks,'weekDays');buildMultiOrSingleMatchQuery(voucherTypes,'voucherType');}
function getCountryFilterList(){let countryOptions='';countryOptions+='<option value="0">Select a country</option>';voucherFilters.countries.forEach((country)=>{if(voucherFilterObject['countryId.equals']&&voucherFilterObject['countryId.equals']===country.country_id){countryOptions+=`<option value="${country.country_id}" selected>${country.country_name}</option>`;}else{countryOptions+=`<option value=${country.country_id}>${country.country_name}</option>`;}});return countryOptions;}
function getCityHtml(){`<div class="form-item__checkbox">
     <input id="city-${city.city_id}" type="checkbox" name="city" value="${city.city_id}" checked>
     <label for="city-${city.city_id}">${city.city_name}</label>
  </div>`}
function getCityFilterList(){let cityList='';voucherFilters.cities.forEach((city)=>{if((voucherFilterObject['cityId.in']&&voucherFilterObject['cityId.in'].includes(city.city_id))||(voucherFilterObject['cityId.equals']&&voucherFilterObject['cityId.equals']===city.city_id)){cityList+=`<div class="form-item__checkbox">
                     <input id="city-${city.city_id}" type="checkbox" name="city" value="${city.city_id}" checked>
                     <label for="city-${city.city_id}">${city.city_name}</label>
                  </div>`;}else{cityList+=`<div class="form-item__checkbox">
                     <input id="city-${city.city_id}" type="checkbox" name="city" value="${city.city_id}">
                     <label for="city-${city.city_id}">${city.city_name}</label>
                  </div>`;}});return cityList;}
function getBranchFilterList(){let branchList='';voucherFilters.branches.forEach((branch)=>{if((voucherFilterObject['branchId.in']&&voucherFilterObject['branchId.in'].includes(branch.branch_id))||(voucherFilterObject['branchId.equals']&&voucherFilterObject['branchId.equals']===branch.branch_id)){branchList+=`<div class="form-item__checkbox">
                        <input id="branch-${branch.branch_id}" type="checkbox" name="branch" value="${branch.branch_id}" checked>
                        <label for="branch-${branch.branch_id}">${branch.branch_name}</label>
                    </div>`;}else{branchList+=`<div class="form-item__checkbox">
                        <input id="branch-${branch.branch_id}" type="checkbox" name="branch" value="${branch.branch_id}">
                        <label for="branch-${branch.branch_id}">${branch.branch_name}</label>
                    </div>`;}});return branchList;}
function getAdditionFilterList(additionFilters,type){let additionFilterList='';additionFilters.forEach((filter)=>{if((voucherFilterObject[`${type}.in`]&&voucherFilterObject[`${type}.in`].includes(filter))||(voucherFilterObject[`${type}.equals`]&&voucherFilterObject[`${type}.equals`]===filter)){additionFilterList+=`<div class="form-item__checkbox">
                                <input id="${type}-${filter}" type="checkbox" name=${type} value="${filter}" checked>
                                <label for="${type}-${filter}">${filter}</label>
                            </div>`;}else{additionFilterList+=`<div class="form-item__checkbox">
                                <input id="${type}-${filter}" type="checkbox" name=${type} value="${filter}">
                                <label for="${type}-${filter}">${filter}</label>
                            </div>`;}});return additionFilterList;}
function getWeekDayList(){let weekDayList='';voucherFilters.dayOfWeeks.forEach((dayOfWeek)=>{if((voucherFilterObject['weekDays.in']&&voucherFilterObject['weekDays.in'].includes(dayOfWeek))||(voucherFilterObject['weekDays.equals']&&voucherFilterObject['weekDays.equals']===dayOfWeek)){weekDayList+=`<div class="form-item__checkbox">
                        <input id="${dayOfWeek}" type="checkbox" name="dayOfWeek" value="${dayOfWeek}" checked>
                        <label for="${dayOfWeek}">${dayOfWeek}</label>
                      </div>`}else{weekDayList+=`<div class="form-item__checkbox">
                        <input id="${dayOfWeek}" type="checkbox" name="dayOfWeek" value="${dayOfWeek}">
                        <label for="${dayOfWeek}">${dayOfWeek}</label>
                      </div>`}});return weekDayList;}
function buildVoucherCard(voucher){return `<article id="${voucher.voucher_id}" class="card card--voucher">
            <div class="card__media">
                <img data-src="${voucher.voucher_banner}" alt="Voucher" class="lazyload">
            </div>
            <div class="card__header">
                <div class="unit">${voucher.voucher_name}</div>
                <div class="price">${getCurrencyCode(voucher.currency_code)}${voucher.price.toLocaleString("en")}</div>
            </div>
            <div class="card__footer">
              <div class="atc">
                <a id="add-to-cart-${voucher.voucher_id}" class="button button--atc">Add to Cart</a>
                <div class="card__footer__form-wrap">
                    <div class="form form--atc">
                      <div class="value-button decrease-item">-</div>
                      <input type="text" class="voucher-quantity-${voucher.voucher_id} number" value="0" readonly/>
                      <div class="value-button increase-item">+</div>
                    </div>
                </div>
              </div>
              <div class="info">
                <a href="#" class="open-dialog">More info <span class="viewMore"></span></a>
              </div>
            </div>
          </article>`;}
function buildPromotionCard(promotion){return `<article id="${promotion.promotion_id}" class="promotion-card">
            <div class="events--card" onclick = "window.location = '${promotion.promotion_url}'" >
            <div class="events--card-details">
              ${getDescriptionHtml(promotion.title,'events--card-details--title')}
              ${getDescriptionHtml(promotion.teaser_text_one,'events--card-details--bottom')}
              ${getDescriptionHtml(promotion.teaser_text_two,'events--card-details--description')}
            <div class="events--card-details--link">
            <a href="${promotion.promotion_url}" title="">
                More info
                <span class="viewMore"></span>
            </a>
            </div>
            </div>
            <div class="events--card-image">
            <img data-src="${promotion.teaser_banner}" alt="Voucher" class="lazyload">
            </div>
            </div>
           </article>`;}
function getDescriptionHtml(text,className){if(text){return `<div class="${className}">
                ${text}
              </div>`}else{return '';}}
function disableOrEnablePrice(){if(filterMinPriceSlider===filterMaxPriceSlider){$('#price-filter').closest('s-voucher__filter-elem-wrap').hide();}else{const priceElement=$('#price-filter');if(priceElement.is(':hidden')){priceElement.show();}}}
function convertFilterObjectArrayValues(){const requestFilterObject={};if(voucherFilterObject['price.greaterThanOrEqual']){requestFilterObject['price.greaterThanOrEqual']=voucherFilterObject['price.greaterThanOrEqual'];}
if(voucherFilterObject['price.lessThanOrEqual']){requestFilterObject['price.lessThanOrEqual']=voucherFilterObject['price.lessThanOrEqual'];}
if(voucherFilterObject.sort){requestFilterObject.sort=voucherFilterObject.sort;}
if(voucherFilterObject.size){requestFilterObject.size=voucherFilterObject.size;}
if(voucherFilterObject.page){requestFilterObject.page=voucherFilterObject.page;}
if(voucherFilterObject['countryId.in']){requestFilterObject['countryId.in']=voucherFilterObject['countryId.in'].join();}
if(voucherFilterObject['countryId.equals']){requestFilterObject['countryId.equals']=voucherFilterObject['countryId.equals'];}
if(voucherFilterObject['cityId.in']){requestFilterObject['cityId.in']=voucherFilterObject['cityId.in'].join();}
if(voucherFilterObject['cityId.equals']){requestFilterObject['cityId.equals']=voucherFilterObject['cityId.equals'];}
if(voucherFilterObject['branchId.in']){requestFilterObject['branchId.in']=voucherFilterObject['branchId.in'].join();}
if(voucherFilterObject['branchId.equals']){requestFilterObject['branchId.equals']=voucherFilterObject['branchId.equals'];}
if(voucherFilterObject['treatType.in']){requestFilterObject['treatType.in']=voucherFilterObject['treatType.in'].join();}
if(voucherFilterObject['treatType.equals']){requestFilterObject['treatType.equals']=voucherFilterObject['treatType.equals'];}
if(voucherFilterObject['foodClassification.in']){requestFilterObject['foodClassification.in']=voucherFilterObject['foodClassification.in'].join();}
if(voucherFilterObject['foodClassification.equals']){requestFilterObject['foodClassification.equals']=voucherFilterObject['foodClassification.equals'];}
if(voucherFilterObject['weekDays.in']){requestFilterObject['weekDays.in']=voucherFilterObject['weekDays.in'].join();}
if(voucherFilterObject['weekDays.equals']){requestFilterObject['weekDays.equals']=voucherFilterObject['weekDays.equals'];}
if(voucherFilterObject['voucherType.in']){requestFilterObject['voucherType.in']=voucherFilterObject['voucherType.in'].join();}
if(voucherFilterObject['voucherType.equals']){requestFilterObject['voucherType.equals']=voucherFilterObject['voucherType.equals'];}
return requestFilterObject;}
function emptyVoucherListing(){$('#voucher-list').empty();}
function disableLoadMore(){$('#filter-load-more').hide();}
function enableLoadMore(){$('#filter-load-more').show();}
function mergeFilters(newFilters){const newMinPrice=newFilters.minPrice;const newMaxPrice=newFilters.maxPrice;if(newMinPrice<voucherFilters.minPrice){voucherFilters.minPrice=newMinPrice;}
if(newMaxPrice>voucherFilters.maxPrice){voucherFilters.maxPrice=newMaxPrice;}
if(voucherFilters.countries&&newFilters.countries){const countryIds=new Set(voucherFilters.countries.map((country)=>country.country_id));voucherFilters.countries=[...voucherFilters.countries,...newFilters.countries.filter((country)=>!countryIds.has(country.country_id))];voucherFilters.countries.sort((a,b)=>a.country_name.localeCompare(b.country_name));}
if(voucherFilters.cities&&newFilters.cities){const cityIds=new Set(voucherFilters.cities.map((city)=>city.city_id));voucherFilters.cities=[...voucherFilters.cities,...newFilters.cities.filter((city)=>!cityIds.has(city.city_id))];voucherFilters.cities.sort((a,b)=>a.city_name.localeCompare(b.city_name));}
if(voucherFilters.branches&&newFilters.branches){const branchIds=new Set(voucherFilters.branches.map((branch)=>branch.branch_id));voucherFilters.branches=[...voucherFilters.branches,...newFilters.branches.filter((branch)=>!branchIds.has(branch.branch_id))];voucherFilters.branches.sort((a,b)=>a.branch_name.localeCompare(b.branch_name));}
if(voucherFilters.voucherTypes&&newFilters.voucherTypes){voucherFilters.voucherTypes=[...new Set([...voucherFilters.voucherTypes,...newFilters.voucherTypes])];voucherFilters.voucherTypes.sort();}
if(voucherFilters.foodClassifications&&newFilters.foodClassifications){voucherFilters.foodClassifications=[...new Set([...voucherFilters.foodClassifications,...newFilters.foodClassifications])];voucherFilters.foodClassifications.sort();}
if(voucherFilters.treatTypes&&newFilters.treatTypes){voucherFilters.treatTypes=[...new Set([...voucherFilters.treatTypes,...newFilters.treatTypes])];voucherFilters.treatTypes.sort();}
if(voucherFilters.dayOfWeeks&&newFilters.dayOfWeeks){voucherFilters.dayOfWeeks=[...new Set([...voucherFilters.dayOfWeeks,...newFilters.dayOfWeeks])];}}
function buildFilter(filterData,updateStatus){if(updateStatus){mergeFilters(filterData);}else{voucherFilters=new VoucherFilter(filterData);}
if(!filterMinPriceSlider){filterMinPriceSlider=voucherFilters.minPrice;}
if(!filterMaxPriceSlider){filterMaxPriceSlider=voucherFilters.maxPrice;}
if(!filterSelectedMinPrice){filterSelectedMinPrice=voucherFilters.minPrice;}
if(!filterSelectedMaxPrice){filterSelectedMaxPrice=voucherFilters.maxPrice;}
const minPrice=$('#amount-min');const maxPrice=$('#amount-max');$('#price-range').slider({range:true,min:filterMinPriceSlider,max:filterMaxPriceSlider,values:[filterSelectedMinPrice,filterSelectedMaxPrice],slide(event,ui){minPrice.val(ui.values[0]);maxPrice.val(ui.values[1]);},stop(event,ui){filterSelectedMinPrice=ui.values[0];filterSelectedMaxPrice=ui.values[1];buildPriceQuery(filterSelectedMinPrice,filterSelectedMaxPrice);},});minPrice.val(filterSelectedMinPrice);maxPrice.val(filterSelectedMaxPrice);disableOrEnablePrice();if(voucherFilters.countries.length>0){$('#country-filter-dropdown').html(getCountryFilterList());}else{$('#country-filter-dropdown').closest('.s-voucher__filter-elem-wrap').hide();}
if(voucherFilters.cities.length>0){$('#city-filter-select').html(getCityFilterList());}else{$('#city-filter-select').closest('.s-voucher__filter-elem-wrap').hide();}
if(voucherFilters.branches.length>0){$('#branch-filter-select').html(getBranchFilterList());}else{$('#branch-filter-select').closest('.s-voucher__filter-elem-wrap').hide();}
if(voucherFilters.treatTypes.length>0){$('#treat-type-select').html(getAdditionFilterList(voucherFilters.treatTypes,'treatType'));}else{$('#treat-type-select').closest('.s-voucher__filter-elem-wrap').hide();}
if(voucherFilters.foodClassifications.length>0){$('#food-classification-select').html(getAdditionFilterList(voucherFilters.foodClassifications,'foodClassification'));}else{$('#food-classification-select').closest('.s-voucher__filter-elem-wrap').hide();}
if(voucherFilters.dayOfWeeks.length>0){$('#day-of-the-week-select').html(getWeekDayList());}else{$('#day-of-the-week-select').closest('.s-voucher__filter-elem-wrap').hide();}
if(voucherFilters.voucherTypes.length>0){$('#voucher-type-select').html(getAdditionFilterList(voucherFilters.voucherTypes,'voucherType'));}else{$('#voucher-type-select').closest('.s-voucher__filter-elem-wrap').hide();}}
function buildListing(data,updateStatus){const list=$('#voucher-list');if(!updateStatus){list.empty();}
if(isVoucherPage()){data.forEach((voucher)=>{list.append(buildVoucherCard(voucher));});}else if(isPromotionPage()){data.forEach((promotion)=>{list.append(buildPromotionCard(promotion));});}}
$(document).on('click','.open-dialog',(e)=>{$.ajax({dataType:'json',beforeSend:function(){loaderStart();},complete:function(){loaderStop();},url:`${voucherDetailUrl}${getVoucherId(e)}`,headers:getHeaders(false),success(data){$('#dialog').html(voucherInfoHtml(data));},});});$(document).on('click','#close-voucher-dialog',(e)=>{$('#dialog').children().remove();e.preventDefault();});function voucherInfoHtml(data){return `<div class="overlay-wrapper">
              <div class="voucher-info overlay-content">
                <div class="info__header">
                  <h1>More Details About Voucher</h1>
                  <a href="#" id="close-voucher-dialog" class="close"></a>
                </div>
                <div class="info__content">
                  <div class="info">
                    <h3>Timings</h3>
                    <table id="voucher-detail-timing">${getTimingHtml(data.timings)}</table>
                  </div>
                  <div class="info">
                    <h3>Voucher Description</h3>
                    <div>${data.voucher_description}</div>
                  </div>
                  <div class="info">
                    <h3>Cancellation Policy</h3>
                    <div id="voucher-detail-cancellation-policy">${data.cancellation_policy}</div>
                  </div>
                  <div class="info">
                    <h3>Not valid on</h3>
                    <div class="info__valid-date">
                      <dl id="voucher-detail-not-valid-on">${notValidOnHtml(data.voucher_not_valid_on)}</dl>
                    </div>
                  </div>
                  <div class="info">
                    <h3>Use this within</h3>
                    <div id="voucher-detail-validity">${data.voucher_validity}</div>
                  </div>
                  <div class="info">
                    <h3>Things to remember</h3>
                    <div id="voucher-detail-terms-and-conditions">${data.terms_and_condition}</div>
                  </div>
                </div>
              </div>
        </div>`}
function notValidOnHtml(notValidOn){let notValidOnHtml='';if(notValidOn){notValidOn.forEach((day)=>{notValidOnHtml+=`<dt>${day}</dt>`;});}
return notValidOnHtml;}
function getTimingHtml(timings){let timingHtml='';if(timings){timings.forEach((timing)=>{timingHtml+=`<tr>
                    <td>${timing.day}</td>
                    <td>${timing.time}</td>
                   </tr>`});}
return timingHtml;}
function getListingPage(updateStatus=false,setQuantity=false){let url;if(isVoucherPage()){url=voucherListingUrl;}else if(isPromotionPage()){url=promotionListingUrl;}
$.ajax({dataType:'json',url,beforeSend:function(){loaderStart();},complete:function(){loaderStop();},data:convertFilterObjectArrayValues(),headers:{'BBQ-Search-Key':'fca2cd09af45d7872342a882f035a6e3',},success(vouchers){if(vouchers&&vouchers.content&&vouchers.content.length>0){showAllFilters();voucherTotalElements=vouchers.total_elements;voucherPageNumber=vouchers.page_number;voucherPageSize=vouchers.page_size;voucherCurrentPageLength=vouchers.content.length;if(voucherPageSize*(voucherPageNumber+1)<voucherTotalElements){enableLoadMore();}else{disableLoadMore();}
if(voucherFilterObject&&Object.keys(voucherFilterObject).length!==0){enableFilterClearAllButton();}
buildFilter(vouchers.filters,updateStatus);buildListing(vouchers.content,updateStatus);if(isVoucherPage()){if(setQuantity){setInitialQuantity();}}}else{emptyVoucherListing();$('#price-filter').closest('.s-voucher__filter-elem-wrap').hide();$('#country-filter-dropdown').closest('.s-voucher__filter-elem-wrap').hide();$('#city-filter-select').closest('.s-voucher__filter-elem-wrap').hide();$('#branch-filter-select').closest('.s-voucher__filter-elem-wrap').hide();$('#treat-type-select').closest('.s-voucher__filter-elem-wrap').hide();$('#food-classification-select').closest('.s-voucher__filter-elem-wrap').hide();$('#day-of-the-week-select').closest('.s-voucher__filter-elem-wrap').hide();$('#voucher-type-select').closest('.s-voucher__filter-elem-wrap').hide();}},});}
function showAllFilters(){$('#price-filter').closest('.s-voucher__filter-elem-wrap').show();$('#country-filter-dropdown').closest('.s-voucher__filter-elem-wrap').show();$('#city-filter-select').closest('.s-voucher__filter-elem-wrap').show();$('#branch-filter-select').closest('.s-voucher__filter-elem-wrap').show();$('#treat-type-select').closest('.s-voucher__filter-elem-wrap').show();$('#food-classification-select').closest('.s-voucher__filter-elem-wrap').show();$('#day-of-the-week-select').closest('.s-voucher__filter-elem-wrap').show();$('#voucher-type-select').closest('.s-voucher__filter-elem-wrap').show();}
function setInitialQuantity(){const localOrderId=localStorage.getItem('orderId');if(localOrderId&&isAnonymous()){orderId=parseInt(localOrderId,10);voucherHttpRequest(voucherCartUrl,'GET',{order_id:orderId},true);}else if(!isAnonymous()){voucherHttpRequest(voucherCartUrl,'GET',undefined,true);}}
$('#clear-all-voucher-filters').click(()=>{voucherFilterObject={};if(isPromotionPage()){buildIdQuery(1);}
filterSelectedMinPrice=null;filterSelectedMaxPrice=null;disableFilterClearAllButton();});$('#country-filter-dropdown').change(()=>{buildIdQuery(parseInt($('#country-filter-dropdown option:selected').val(),10));});$('#city-filter-select').change((e)=>{buildIdQuery(null,parseInt($(`#${e.target.id}`).val(),10));});$('#branch-filter-select').change((e)=>{buildIdQuery(null,null,parseInt($(`#${e.target.id}`).val(),10));});$('#treat-type-select').change((e)=>{buildAdditionFilterQuery($(`#${e.target.id}`).val());});$('#food-classification-select').change((e)=>{buildAdditionFilterQuery(null,$(`#${e.target.id}`).val());});$('#day-of-the-week-select').change((e)=>{buildAdditionFilterQuery(null,null,$(`#${e.target.id}`).val());});$('#voucher-type-select').change((e)=>{buildAdditionFilterQuery(null,null,null,$(`#${e.target.id}`).val());});$('#amount-min').focusout((e)=>{const value=parseInt(e.target.value,10);if(value!==filterSelectedMinPrice){filterSelectedMinPrice=value;buildPriceQuery(filterSelectedMinPrice,filterSelectedMaxPrice);}});$('#amount-max').focusout((e)=>{const value=parseInt(e.target.value,10);if(value!==filterSelectedMaxPrice){filterSelectedMaxPrice=value;buildPriceQuery(filterSelectedMinPrice,filterSelectedMaxPrice);}});$('#voucher-filter-sort-dropdown').change(()=>{const sort=parseInt($('#voucher-filter-sort-dropdown option:selected').val(),10);if(sort===1){if(voucherFilterObject.page){voucherFilterObject.page=null;}
voucherFilterObject.sort='price';}else if(sort===2){if(voucherFilterObject.page){voucherFilterObject.page=null;}
voucherFilterObject.sort='price,desc';}else if(sort===0){if(voucherFilterObject.page){voucherFilterObject.page=null;}
voucherFilterObject.sort=undefined;}});$(document).on('click','.read-more-coupon-description',(e)=>{e.preventDefault();$.dialog({title:'Description',boxWidth:'30%',useBootstrap:false,content:$(e.currentTarget).attr('value'),});});$('#filter-load-more-button').click(()=>{voucherFilterObject.page=voucherPageNumber+1;});class VoucherFilter{constructor(filter){this.countries=filter.countries;this.cities=filter.cities;this.branches=filter.branches;this.voucherTypes=filter.voucher_types;this.foodClassifications=filter.food_classifications;this.treatTypes=filter.treat_types;this.dayOfWeeks=filter.day_of_weeks;this.minPrice=filter.min_price;this.maxPrice=filter.max_price;}}})(jQuery,Drupal);function getCurrencyCode(currency){if(currency==='INR'){return '&#8377;'}
return '&#8377;'}
function isAnonymous(){return!userId||userId===0;}
function getHeaders(){if(isAnonymous()){return getAnonymousHeaders();}else{return{'Content-Type':'application/json'};}}
function getAnonymousHeaders(){return{'BBQ-Client-Id':clientId,'BBQ-Client-Secret':clientSecret,'Content-Type':'application/json'};}
function getCouponDescription(text){if(text&&text.length>60){return `<div class="coupon-description">${text.substring(0,60)}...</div>
              <div class="coupon-link">
                <a class="read-more-coupon-description" href="#" value="${text}">Read More</a>
              </div>`;}else{return `<div class="coupon-description">${text}</div>`;}};let allDeliveryItems;const deliveryItemsMap=new Map();const boxIndividualItemInOptionCount=new Map();const progressBarPercentageMap=new Map();const addedDeliveryItemsMap=new Map();const individualItemTargetTotalCount=new Map();const deliveryDatesMap=new Map();let getCartDetails=new Map();let deliveryTabActive=true;let cartRawData;let userIpAddress;let deliveryOrderId;const deliveryCustomerAddress=new Map();const getCurrentURL=window.location.href;let sales_sub_type_value='Delivery';const DELIVERY_PROPS={ANCHOR_DISABLED:"anchor-disabled",CURRENCY:"INR",ITEM_ACTIONS:{ADD:"ADD",REMOVE:"REMOVE",},LOYALTY_POINTS:0,LOYALTY_EXCHANGE_RATE:0,LOYALTY_APPLIED:false,DELIVERY_TOTAL:0,DELIVERY_ORDER_ID:undefined,DELIVERY_DATE:undefined,BRANCH_ID:undefined,LATITUDE:undefined,LONGITUDE:undefined,DELIVERY_LATITUDE:undefined,DELIVERY_LONGITUDE:undefined,APPLIED_COUPON:undefined,APPLIED_COUPON_CODE:undefined,APPLIED_VOUCHERS:new Set(),APPLIED_OFFERS:new Set(),LOADING_COUNT:0,SHOW_DELIVERY_CART_ON_RELOAD:"SHOW_DELIVERY_CART_ON_RELOAD",SHOW_DELIVERY_COUPON_HTML:"SHOW_DELIVERY_CART_ON_RELOAD",};const DELIVERY_URL={GET_DELIVERY_CATALOG:"/api/v1/delivery/delivery-catalog",ADD_TO_CART:"/api/v1/delivery/cart-item",GET_CART_DETAILS:"/api/v1/delivery/get-cart-details",GET_ALL_BRANCHES:'/api/v1/get-all-nearby-branches',GET_CUSTOMER_ADDRESS:"/api/v1/delivery/get-address",ADD_CUSTOMER_ADDRESS:"/api/v1/delivery/add-address",UPDATE_PAYMENT:"/api/v1/delivery/update-payment",REMOVE_PAYMENT:"/api/v1/delivery/remove-order-payment",GET_SMILES:"/api/v1/loyalty-points-value",GET_COUPON_VOUCHER:"/api/v1/delivery/get-voucher-coupon",UPDATE_ORDER_ADDRESS:"/api/v1/delivery/update-order-address",GENERATE_PAYMENT:"/api/v1/delivery/generate-payment",VALIDATE_PAYMENT:"/api/v1/delivery/validate-payment",DELIVERY_PROMOTIONS:"/api/v1/delivery-promotions",VALIDATE_VOUCHER:"/api/v1/validate-voucher-coupon",VARIFY_MANUAL_BAR_CODE:"/api/v1/verify-manual-bar-code",GET_BRANCH_BY_ID:(branchId)=>"/api/v1/branches/"+branchId,};const THUNK_ACTION_TYPES={GET_DELIVERY_CATALOG:"delivery/GET_DELIVERY_CATALOG",ADD_TO_CART:"delivery/ADD_TO_CART",GET_CART_DETAILS:"delivery/GET_CART_DETAILS",GET_CART_DETAILS_AND_LOAD_CATALOG:"delivery/GET_CART_DETAILS_AND_LOAD_CATALOG",GET_CUSTOMER_ADDRESS:"delivery/GET_CUSTOMER_ADDRESS",ADD_CUSTOMER_ADDRESS:"delivery/ADD_CUSTOMER_ADDRESS",UPDATE_PAYMENT:"delivery/UPDATE_PAYMENT",REMOVE_PAYMENT:"delivery/REMOVE_PAYMENT",GET_SMILES:"delivery/GET_SMILES",GET_COUPON_VOUCHER:"delivery/GET_COUPON_VOUCHER",UPDATE_ORDER_ADDRESS:"delivery/UPDATE_ORDER_ADDRESS",GENERATE_PAYMENT:"delivery/GENERATE_PAYMENT",VALIDATE_PAYMENT:"delivery/VALIDATE_PAYMENT",DELIVERY_PROMOTIONS:"delivery/delivery-promotions",GET_BRANCH_BY_ID:"delivery/GET_BRANCH_BY_ID",GET_VALIDATE_VOUCHER:"delivery/validate-voucher-coupon",};const DELIVERY_REQUEST_METHODS={POST:"POST",GET:"GET",PUT:"PUT",};function isDeliveryPage(){return window.location.pathname==="/delivery";}
function isMapScriptAttached(url){if(!url)url="https://maps.googleapis.com/maps/api/js?libraries=places&key=AIzaSyDBCt-bnSaFxmLj8UmZiXHc0neoMStn7_0&callback=GoogleMaps.initMap";var scripts=document.getElementsByTagName('script');for(var i=scripts.length;i--;){if(scripts[i].src==url)return true;}
return false;}
var GoogleMaps=GoogleMaps||{};(function($,Drupal,GoogleMaps){Drupal.behaviors.bbqDelivery={attach:function(context,settings){userId=settings.user.uid;userIpAddress=settings.user.ip;if(window.location.pathname=='/delivery-home-page'){jQuery(document).on('input','#searchInput',function(e){let inputValue=jQuery(this).val();if(inputValue.length>=2){attachGMapLibrary();}})}},};function attachGMapLibrary(){var script=document.createElement('script');script.src='https://maps.googleapis.com/maps/api/js?libraries=places&key=AIzaSyDBCt-bnSaFxmLj8UmZiXHc0neoMStn7_0&callback=GoogleMaps.initMap';script.async=true;if(!isMapScriptAttached(script.src)){document.head.appendChild(script);}
window.GoogleMaps.initMap=function(){var inputBox=document.getElementById('searchInput');var currentFocus;if(window.location.pathname=='/delivery-home-page'){$("#searchInput").attr("autocomplete","off");const AutocompleteService=new google.maps.places.AutocompleteService();const geocoderService=new google.maps.Geocoder();inputBox.addEventListener('input',function(e){var timeDelay=800;var inputVal=this.value;var a,b,i,typeTimer;currentFocus=-1;var event=this;if(inputVal.length>=3){clearTimeout(typeTimer);typeTimer=setTimeout(()=>{if(document.getElementById('searchInputAutocomplete-list')!=null){document.getElementById('searchInputAutocomplete-list').remove();}
var valueNow=document.getElementById('searchInput').value;if(inputVal==valueNow){var request={input:inputVal,type:['geocode'],componentRestrictions:{country:"in"}};AutocompleteService.getPlacePredictions(request,function(predictions,status){if(status!=google.maps.places.PlacesServiceStatus.OK||!predictions){alert(status);return;}
a=document.createElement("DIV");a.setAttribute("id","searchInputAutocomplete-list");a.setAttribute("class","autocomplete-items");event.parentNode.appendChild(a);for(i=0;i<predictions.length;i++){b=document.createElement("DIV");b.setAttribute("class","ac-item");b.innerHTML+="<img src='../../../../themes/custom/bbq_nation/assets/images/mappin.png'></img>";b.innerHTML+="<span>"+predictions[i].description+"</span>";b.innerHTML+="<input id="+predictions[i].place_id+" type='hidden' value='"+predictions[i].description+"'>";b.addEventListener("click",function(e){inputBox.value=this.getElementsByTagName("input")[0].value;if(document.getElementById('searchInputAutocomplete-list')!=null){document.getElementById('searchInputAutocomplete-list').remove();}
var placeRequest={placeId:""+this.getElementsByTagName("input")[0].id+""};geocoderService.geocode(placeRequest).then(({results})=>{if(!results){return false;}
DELIVERY_PROPS.DELIVERY_LATITUDE=results[0].geometry.location.lat();DELIVERY_PROPS.DELIVERY_LONGITUDE=results[0].geometry.location.lng();$('.search_error_message').hide();}).catch((e)=>window.alert("Geocoder failed due to: "+e));});a.appendChild(b);}});}else{return false;}},timeDelay);}
else{if(document.getElementById('searchInputAutocomplete-list')!=null){document.getElementById('searchInputAutocomplete-list').remove();}}});inputBox.addEventListener("keydown",function(e){var x=document.getElementById("searchInputAutocomplete-list");if(x)x=x.getElementsByTagName("div");if(e.code=="ArrowDown"){currentFocus++;addActive(x);}else if(e.code=="ArrowUp"){currentFocus--;addActive(x);}else if(e.code=="Enter"){e.preventDefault();if(currentFocus>-1){if(x)x[currentFocus].click();}}});function addActive(x){if(!x)return false;removeActive(x);if(currentFocus>=x.length)currentFocus=0;if(currentFocus<0)currentFocus=(x.length-1);x[currentFocus].classList.add("autocomplete-active");}
function removeActive(x){for(var i=0;i<x.length;i++){x[i].classList.remove("autocomplete-active");}}
document.addEventListener("click",function(e){if(document.getElementById('searchInputAutocomplete-list')!=null){document.getElementById('searchInputAutocomplete-list').remove();}});}}}
function setOutletBasedOnDelviery(){var nameSearch=document.getElementById("searchInput").value;if(nameSearch!=0){$.ajax({url:'/api/v1/get-one-nearby-branch',type:'POST',headers:getHeaders(),data:JSON.stringify({"lat":DELIVERY_PROPS.DELIVERY_LATITUDE,"long":DELIVERY_PROPS.DELIVERY_LONGITUDE}),dataType:"json",success:function(data){if(!$.isEmptyObject(data)){localStorage.setItem('latitude',DELIVERY_PROPS.DELIVERY_LATITUDE);localStorage.setItem('longitude',DELIVERY_PROPS.DELIVERY_LONGITUDE);localStorage.setItem('branch_id',data.branch_id);localStorage.setItem('branch_name',data.branch_name);localStorage.setItem('city_name',data.city_name);DELIVERY_PROPS.BRANCH_ID=localStorage.getItem("branch_id");localStorage.setItem('Search_InputVAL',nameSearch);location.href="/delivery";}else{$('.search_error_message').show();}}});}else{alert('Please Choose location')}};$('#setManualCouponClick').click(function(){getValidateVoucher()});function getValidateVoucher(){var setManualCoupon=document.getElementById("setManualCoupon").value;if(setManualCoupon!=0){$.ajax({url:'/api/v1/delivery/validate-voucher-coupon',type:'POST',headers:getHeaders(),dataType:"json",data:JSON.stringify({customer_id:getMobileNumber(),branch_id:DELIVERY_PROPS.BRANCH_ID,barcode:setManualCoupon}),success:function(data){if(data.message_type=="success"){var maxCouponAmount=parseInt(data.data.denomination)+parseInt(100);const validCoupon=validateTotal(maxCouponAmount,DELIVERY_PROPS.DELIVERY_TOTAL);const tenderKey=data.data.tender_type=='GC'?'COUPON':'VOUCHER';if(validCoupon){const postData={amount:parseFloat(data.data.denomination,10),tender_key:tenderKey,barcode:data.data.promocode,sales_sub_type:sales_sub_type_value,};deliveryHttpRequest(DELIVERY_URL.UPDATE_PAYMENT,DELIVERY_REQUEST_METHODS.POST,Object.assign(postData,getCustomerDetails()),THUNK_ACTION_TYPES.GET_CART_DETAILS);if(tenderKey==="GC"&&DELIVERY_PROPS.APPLIED_OFFERS.size){DELIVERY_PROPS.APPLIED_OFFERS.forEach(function(value){removeDiscounts("OFFER",value);DELIVERY_PROPS.APPLIED_OFFERS.delete(value);})
DELIVERY_PROPS.APPLIED_OFFERS.clear();}else if(tenderKey==="OFFER"&&DELIVERY_PROPS.APPLIED_COUPON){removeDiscounts("COUPON",DELIVERY_PROPS.APPLIED_COUPON);DELIVERY_PROPS.APPLIED_COUPON=false;DELIVERY_PROPS.APPLIED_COUPON_CODE=false;}
$("#setManualCoupon").val('');$("#delivery-coupons-vouchers").hide();$("#delivery-curtain").show();}}else if(data.message_type=="failed"){toastr.error(data.message);}}});}};if(window.location.pathname=='/delivery'||window.location.pathname=='/delivery-home-page'){$('.location-submit').click(function(){setOutletBasedOnDelviery();});var searchInVal=localStorage.getItem("Search_InputVAL");if(searchInVal){document.getElementById("searchInput").value=searchInVal;}}
if(window.location.pathname=='/delivery'){$('#searchInput').change(function(){setOutletBasedOnDelviery();});}
$.fakeLoader({spinner:"spinner6",bgColor:"rgba(0, 0, 0, 0.5)",});function loaderStop(){const loader=$(".fakeLoader");loader.removeClass("display-block");loader.addClass("hide");}
function loaderStart(){const loader=$(".fakeLoader");loader.removeClass("hide");loader.addClass("display-block");}
class DeliveryCatalog{constructor(deliveryCatalogDetails){if(deliveryCatalogDetails){this.menuBomNo=deliveryCatalogDetails.menu_bom_no?deliveryCatalogDetails.menu_bom_no:undefined;this.servicable=deliveryCatalogDetails.servicable?deliveryCatalogDetails.servicable:undefined;this.delivery=deliveryCatalogDetails.delivery?deliveryCatalogDetails.delivery:undefined;this.takeaway=deliveryCatalogDetails.takeaway?deliveryCatalogDetails.takeaway:undefined;this.distance=deliveryCatalogDetails.distance?deliveryCatalogDetails.distance:undefined;this.duration=deliveryCatalogDetails.duration?deliveryCatalogDetails.duration:undefined;this.box=deliveryCatalogDetails.box.map((b)=>new DeliveryBox(b));this.individualItems=deliveryCatalogDetails.image.concat(deliveryCatalogDetails.text).map((i)=>new DeliveryBox(i));}}}
class DeliveryBox{constructor(box){this.categoryCode=box.category_code;this.categoryDesc=box.category_desc;this.categorySeq=box.category_seq;this.level=box.level;this.subcategory=box.subcategory.map((s)=>new SubCategory(s));}}
class SubCategory{constructor(subCategory){this.subcategoryCode=subCategory.subcategory_code;this.subcategoryDesc=subCategory.subcategory_desc;this.subcategorySeq=subCategory.subcategory_seq;this.items=subCategory.items.map((item)=>{const deliveryItem=new DeliveryItem(item);deliveryItemsMap.set(deliveryItem.itemCode,deliveryItem);return deliveryItem;});}}
class DeliveryItem{constructor(item){this.itemImagePath=item.item_image_path;this.itemDesc=item.item_desc;this.itemSeq=item.item_seq;this.foodType=parseInt(item.food_type);this.cmsOfferId=item.cms_offer_id;this.customize=item.customize?parseInt(item.customize,10):undefined;this.avilability=item.avilability;this.itemTag=item.item_tag;this.level=item.level;this.itemPrice=item.item_price;this.originalPrice=item.original_price;this.itemCode=item.item_code;this.itemName=item.item_name;this.descriptionItems=item.item_image_path;this.options=item.options.map((option)=>new Option(option));this.promotionMessage=item.promotion_message;}}
class Option{constructor(option){this.optionCode=option.option_code;this.optionTitle=option.option_title;this.optionDesc=option.option_desc;this.threshold=parseInt(option.threshold);this.price=option.price;this.originalPrice=option.original_price;this.foodType=parseInt(option.food_type);this.optionItems=option.option_items.map((optionItem)=>new OptionItem(optionItem));}}
class OptionItem{constructor(optionItem){this.itemCode=optionItem.item_code;this.itemName=optionItem.item_name;this.price=optionItem.price;this.originalPrice=optionItem.original_price;this.foodType=parseInt(optionItem.food_type);this.allowMultiple=optionItem.allow_muliple;}}
class AddedOptionsItems{constructor(threshold){this.threshold=threshold;}}
class AddToCart{constructor(itemDetailId,deliveryItemId,quantity){this.customer_id=getMobileNumber();this.branch_id=DELIVERY_PROPS.BRANCH_ID;this.item_detail_id=itemDetailId;this.item_id=deliveryItemId;this.quantity=quantity.toString();if(addedDeliveryItemsMap.has(deliveryItemId)){this.item_details=[];addedDeliveryItemsMap.get(deliveryItemId).forEach((item)=>item.forEach((quantity,itemId)=>{this.item_details.push({item_id:itemId,quantity:quantity.toString(),});}));}}}
$(document).ready(function(){$(this).scrollTop(0);});const getMobileNumber=()=>{if(localStorage.getItem('mobile_number')!=null){return localStorage.getItem('mobile_number').toString();}
else{return drupalSettings.delivery.mobile_number;}};const getEmail=()=>{if(localStorage.getItem('email')!=null){return localStorage.getItem('email').toString();}else{return drupalSettings.delivery.email;}};$("#header--DELIVERY\\/TAKEAWAY").click((e)=>{e.preventDefault();if(isAnonymous()){$(".button--signin").trigger("click");}else{$("#delivery-cart-curtain").addClass("reservation--visible");$('#via-delivery').addClass('active');if($(".delivery-items-select").hasClass("deliveryactive")){$('#via-delivery').addClass('active');$("#via-takeaway").removeClass("active");deliveryTabActive=true;$("#delivery-pickup-text").text("DELIVER IN");$("#add-new-delivery-address-block").show();$("#selected-delivery-addresses").removeClass("hidden");enableOrDisablePayNow();getDeliveryAddressDetails();$("#delivery--order-type").hide();$("#delivery--order-type").removeClass("delivery--order-type-show");$('#via-delivery').trigger('click');}else if($(".takeaway-items-select").hasClass("deliveryactive")){$('#via-takeaway').trigger('click');$('#via-takeaway').addClass('active');$("#via-delivery").removeClass("active");deliveryTabActive=false;$("#delivery--order-type").addClass("delivery--order-type-show");$("#delivery-pickup-text").text("PICKUP TIMINGS");$("#add-new-delivery-address-block").hide();$("#saved-delivery-addresses").addClass("hidden");$("#selected-delivery-addresses").addClass("hidden");$('#delivery-address-map-block').hide();enableOrDisablePayNow();getDeliveryAddressDetails();setDeliveryDayOptions($('#cart-delivery-days').val())}
$("#delivery--order-type").hide();setCustomerDeliveryAddress();getCartDetailsAndRebuild(THUNK_ACTION_TYPES.GET_CART_DETAILS,getCustomerSmiles);}});$(document).mouseup(function(e){var container=$('.reservation__block');if(!container.is(e.target)&&container.has(e.target).length===0)
{$('#delivery-cart-curtain').removeClass('reservation--visible');$('#via-delivery').removeClass('active');$('#via-takeaway').removeClass('active');}});$(()=>{if(!isAnonymous()){$.ajax({method:'GET',url:'/api/v1/user',headers:getHeaders(),beforeSend:function(){loaderStart();},complete:function(){loaderStop();},success:function(data){localStorage.setItem('mobile_number',data.mobile_number);localStorage.setItem('email',data.email);localStorage.setItem('user_name',data.name);},});}
if(window.location.pathname=='/delivery-home-page'){localStorage.removeItem('Search_InputVAL');document.getElementById('searchInput').value="";}
const showDeliveryCart=sessionStorage.getItem(DELIVERY_PROPS.SHOW_DELIVERY_CART_ON_RELOAD);if(showDeliveryCart){sessionStorage.removeItem(DELIVERY_PROPS.SHOW_DELIVERY_CART_ON_RELOAD);triggerDeliveryCartClick();}
if(localStorage.getItem('branch_latitude')&&localStorage.getItem('branch_longitude')){if(!localStorage.getItem('latitude')&&!localStorage.getItem('longitude')){if(navigator.geolocation){navigator.geolocation.getCurrentPosition(setLocation,handleNavigationError,{enableHighAccuracy:true,timeout:20000,});}else{showLocationErrorAlert();}}
if(localStorage.getItem('latitude')!=null&&localStorage.getItem('longitude')!=null){DELIVERY_PROPS.LATITUDE=localStorage.getItem('latitude');DELIVERY_PROPS.LONGITUDE=localStorage.getItem('longitude');}else{DELIVERY_PROPS.LATITUDE=localStorage.getItem('branch_latitude');DELIVERY_PROPS.LONGITUDE=localStorage.getItem('branch_longitude');}
DELIVERY_PROPS.BRANCH_ID=localStorage.getItem("branch_id");deliveryHttpRequest(DELIVERY_URL.GET_BRANCH_BY_ID(DELIVERY_PROPS.BRANCH_ID),DELIVERY_REQUEST_METHODS.GET,undefined,THUNK_ACTION_TYPES.GET_BRANCH_BY_ID);if(isDeliveryPage()){getCartDetailsAndRebuild(THUNK_ACTION_TYPES.GET_CART_DETAILS_AND_LOAD_CATALOG);}}
else if(navigator.geolocation){navigator.geolocation.getCurrentPosition(setLocation,handleNavigationError,{enableHighAccuracy:true,timeout:20000,});}else{showLocationErrorAlert();}});$(document).on("click","#bbq-location-card",(e)=>{if(navigator.geolocation){navigator.geolocation.getCurrentPosition(setLocation,handleNavigationError,{enableHighAccuracy:true,timeout:20000,});}else{showLocationErrorAlert();}});const handleNavigationError=(e)=>{showLocationErrorAlert();};const showLocationErrorAlert=()=>{if(isDeliveryPage()){if(localStorage.getItem('branch_latitude')===null&&localStorage.getItem('branch_longitude')===null){$.alert({title:"Oops!",useBootstrap:false,boxWidth:"30%",content:"Location access is Blocked. Change your location settings in browser or select location manually",type:"red",});}}};const setLocation=(position)=>{if(position&&position.coords){DELIVERY_PROPS.LATITUDE=position.coords.latitude;DELIVERY_PROPS.LONGITUDE=position.coords.longitude;localStorage.setItem('latitude',position.coords.latitude);localStorage.setItem('longitude',position.coords.longitude);$.ajax({url:'/api/v1/get-one-nearby-branch',type:'POST',headers:getHeaders(),data:JSON.stringify({"lat":position.coords.latitude,"long":position.coords.longitude}),dataType:"json",success:function(data){if(!$.isEmptyObject(data)){localStorage.setItem('branch_id',data.branch_id);localStorage.setItem('branch_name',data.branch_name);localStorage.setItem('city_name',data.city_name);$('.header-left #bbq-selected-branch').text(data.branch_name+', '+data.city_name);$('#bbq-location-select').val(data.branch_id).trigger('change');DELIVERY_PROPS.BRANCH_ID=localStorage.getItem("branch_id");deliveryHttpRequest(DELIVERY_URL.GET_BRANCH_BY_ID(DELIVERY_PROPS.BRANCH_ID),DELIVERY_REQUEST_METHODS.GET,undefined,THUNK_ACTION_TYPES.GET_BRANCH_BY_ID);if(isDeliveryPage()){getCartDetailsAndRebuild(THUNK_ACTION_TYPES.GET_CART_DETAILS_AND_LOAD_CATALOG);}}else{$('.delivery-error-message').html(`
                  <div>Didn't find outlet near your location. Please select location manually</div>
                  `);$('.delivery-error-message').addClass('delivery-loyalty-points-block-show');}}});}};const getCartDetailsAndRebuild=(action=THUNK_ACTION_TYPES.GET_CART_DETAILS,callback)=>{if(isAnonymous()){if(DELIVERY_PROPS.BRANCH_ID===null){showLocationErrorAlert();}else{deliveryHttpRequest(DELIVERY_URL.GET_DELIVERY_CATALOG,DELIVERY_REQUEST_METHODS.POST,{branch_id:DELIVERY_PROPS.BRANCH_ID.toString(),latitude:DELIVERY_PROPS.LATITUDE.toString(),longitude:DELIVERY_PROPS.LONGITUDE.toString(),},THUNK_ACTION_TYPES.GET_DELIVERY_CATALOG);$('#delivery-products').addClass("delivery-products-show");}}else{deliveryHttpRequest(DELIVERY_URL.GET_CART_DETAILS,DELIVERY_REQUEST_METHODS.POST,{customer_id:getMobileNumber(),branch_id:DELIVERY_PROPS.BRANCH_ID,transaction_type:deliveryTabActive?1:2,source:"Web",soruce_version:"5.1",},action,false,{callback});$('#delivery-products').addClass("delivery-products-show");}};const getDiscountList=(tenderKey,discounts)=>{let discountListHtml="";discounts.forEach((discount)=>{discountListHtml+=`<div class="left">
                            <div class="heading row align-center">
                                <h5>${getAppliedDiscountHeader(tenderKey,discount)}</h5>
                            <a href="#" data-tender_key="${tenderKey}" data-payment_id="${discount.payment_id
}" data-barcode="${discount.barcode
}" class="delivery-remove-discount remove-link">Remove</a>
                            </div>
                           </div>`;});return discountListHtml;};const getAppliedDiscountHeader=(tenderKey,discount)=>{let text="";if(discount.promocode){text=discount.promocode+" - ";}
text+=getCurrencyCode()+
discount.amount.toLocaleString("en")+
" discount through "+
tenderKey.toLowerCase();return text;};const getMaximumLoyaltyApplicable=()=>{let maximumApplicable=DELIVERY_PROPS.LOYALTY_POINTS;if(DELIVERY_PROPS.DELIVERY_TOTAL<maximumApplicable){maximumApplicable=DELIVERY_PROPS.DELIVERY_TOTAL;}
if(maximumApplicable>=1){$('#delivery-loyalty-points-block').addClass('delivery-loyalty-points-block-show');}
return maximumApplicable;};const disableLoyaltyInputAndButton=()=>{$("#use-smiles-in-delivery").addClass("anchor-disabled");$("#smile-point-input-value").prop("disabled",true);};const enableLoyaltyInputAndButton=()=>{$("#use-smiles-in-delivery").removeClass("anchor-disabled");$("#smile-point-input-value").prop("disabled",false);};const rebuildLoyaltyPoints=(currentValue,currentElement)=>{const buttonElement=$("#use-smiles-in-delivery");if(DELIVERY_PROPS.LOYALTY_APPLIED){disableLoyaltyInputAndButton();}else if(DELIVERY_PROPS.LOYALTY_POINTS){let value;let element;if(currentElement){element=currentElement;}else{element=$("#smile-point-input-value");buttonElement.removeClass("anchor-disabled");element.prop("disabled",false);}
if(currentValue){value=currentValue;}else{value=parseInt(element.val(),10);}
let maximumApplicable=getMaximumLoyaltyApplicable();let buttonText;if(value<maximumApplicable){buttonText="Use Partial Smiles";}else{buttonText="Use All Smiles";}
if(value>maximumApplicable){element.val(maximumApplicable);buttonText="Use All Smiles";}
buttonElement.text(buttonText);}};const getDeliveryDatesHtml=(deliveryDates)=>{let deliveryDatesHtml="";deliveryDatesMap.clear();deliveryDates.forEach((deliveryDate)=>{deliveryDatesMap.set(deliveryDate.date,deliveryDate.time);deliveryDatesHtml+=`<option value="${deliveryDate.date}">${deliveryDate.date_label}</option>`;});return deliveryDatesHtml;};const setDeliveryDayOptions=(value)=>{if(isDeliveryCartOpen()){if(deliveryDatesMap.size){let optionsValue=deliveryDatesMap.get(value).map((time)=>`<option value="${time}">${time}</option>`);const hoursElement=$("#cart-delivery-hours");hoursElement.html(optionsValue);hoursElement.show();renderCustomSelect("#cart-delivery-hours");$("#cart-delivery-hours").trigger('change');}}};const getFoodTypeCssClass=(foodType)=>{const cardClass="";if(foodType===0){return "veg";}else if(foodType===1){return "nonveg";}
return cardClass;};const getCartItemHtml=(items)=>{let cartItemHtml="";items.forEach((cartItem)=>{cartItemHtml+=`<div class="reservation__item">
                        <div class="reservation__item__card ${getFoodTypeCssClass(parseInt(cartItem.food_type))}">
                          <div class="reservation__item__title">
                            <h5>${cartItem.item_name}</h5>
                          </div>
                          <div class="reservation__item__form-wrap">
                            <form class="form form--reservation">
                              <div class="value-button decrease decrease-added-delivery-item" data-item-code="${cartItem.item_id
}"></div>
                              <input type="text" class="number" readonly ${getInputValueAndId(cartItem.quantity,cartItem.item_id,"cart-input")} />
                              <div class="value-button increase increase-added-delivery-item" data-item-code="${cartItem.item_id
}"></div>
                            </form>
                            <span class="delivery__item__total">${getCurrencyCode()}${cartItem.total
}</span>
                          </div>
                        </div>
                      </div>`;});return cartItemHtml;};const getDeliveryAddressDetails=()=>{$("#delivery-takeaway-branch-name").text(cartRawData.branch_name);if(deliveryTabActive){if(cartRawData.delivery_address){$("#delivery-takeaway-address").text(cartRawData.delivery_address);}
$("#add-new-delivery-address-block").show();}else{$("#delivery-takeaway-address").text(cartRawData.branch_address);}};const getDeliveryNotServicable=()=>{$("#delivery-takeaway-branch-name").text(cartRawData.branch_name);if(deliveryTabActive){if(cartRawData.delivery_address){$("#delivery-takeaway-address").text(cartRawData.delivery_address);}
$("#add-new-delivery-address-block").show();}else{$("#delivery-takeaway-address").text(cartRawData.branch_address);}};const setDeliveryTypeButtons=()=>{if(cartRawData.delivery){const deliveryElement=$("#via-delivery");deliveryElement.show();deliveryElement.addClass("active");}
if(cartRawData.takeaway){const takeawayElement=$("#via-takeaway");takeawayElement.show();if(!cartRawData.delivery){deliveryTabActive=false;takeawayElement.addClass("active");}}};const getDeliveryCart=(cartDetails)=>{cartRawData=cartDetails;if(cartDetails&&cartDetails.item){const daysElement=$("#cart-delivery-days");daysElement.html(getDeliveryDatesHtml(cartDetails.lst_delivery_dates));daysElement.show();renderCustomSelect("#cart-delivery-days");if(!DELIVERY_PROPS.DELIVERY_DATE){DELIVERY_PROPS.DELIVERY_DATE=cartDetails.lst_delivery_dates[0].date;setDeliveryDayOptions(DELIVERY_PROPS.DELIVERY_DATE);}
$("#delivery-cart-items").html(getCartItemHtml(cartDetails.item));$("#outer-delivery-cart-items").html(getCartItemHtml(cartDetails.item));let cartDetailsData=cartDetails.item;let cardDetialsQty=0;cartDetailsData.forEach(element=>{cardDetialsQty+=parseInt(element.quantity);});$("#outer-cart-item-count").html(cardDetialsQty+' '+"Item");Moengage.track_event("Delivery_Takeaway_Checkout",{"Catalog_Cart_Checkout":cardDetialsQty,"Mobile_Number":localStorage.getItem('mobile_number'),"Login_Type":localStorage.getItem('email')})
var childDivs=document.getElementById('delivery-cart-items').getElementsByClassName('reservation__item');var childCount;var itemText='item';for(i=0;i<childDivs.length;i++){childCount=i;}
$("#delivery-count").html(i);if(i>=1){$("#delivery-proceed-to-checkout").addClass('delivery-show-button');$(".outer-delivery-cart-items-mobile").addClass('delivery-show-button-mobile');}
if(i>=2){itemText='items'}
$("#delivery-count-mobile").html(i+' '+itemText);}else{}
getDeliveryAddressDetails();};const sideBarItemHtml=(categoryCode,categoryDesc)=>{return `<li><a href="#${categoryCode}"> ${categoryDesc} </a></li>`;};const getInputValueAndId=(quantity,id,suffix)=>{return "value="+quantity+" id="+id+"-"+suffix+" ";};const getAddToCartHtml=(item)=>{if(getCartDetails.get(item.itemCode)){return `<div class='number' id="${item.itemCode}">
                <span class='minus decrease-added-delivery-item' data-item-code="${item.itemCode
}"></span>
                <input type='text' disabled ${getInputValueAndId(getCartDetails.get(item.itemCode).quantity,item.itemCode,"input")} />
                <span class='plus increase-added-delivery-item' data-item-code="${item.itemCode
}"></span>
              </div>`;}else{return `<a href="#" class="cta modalButton ${getCustomizableButton(item)}" id="${item.itemCode}"> Add </a>`;}};const getCustomizableButton=(item)=>{if(item.customize){return 'add-box-item';}else{return 'add-individual-item';}}
const getItemPromotionMessageHtml=(promotionMessage)=>{if(promotionMessage){return `<span class="item-promotion-message">${promotionMessage}</span>`;}
return "";};const getItemTagHtml=(tag)=>{if(tag){return `<span>${tag}</span>`;}
return "";};const getImage=(imagePath,tag,promotionMessage="")=>{if(imagePath){return `<div class="image">
              ${getItemPromotionMessageHtml(promotionMessage)}
              <img src=${imagePath}>
              ${getItemTagHtml(tag)}
            </div>`;}
return "";};jQuery(document).on('click','.show-item-model',function(){event.preventDefault();let El=jQuery(this);let modalid=El.attr('data-model-id');jQuery('.item-model').hide();jQuery(modalid).fadeIn();var cardInfoTitle=$(this).closest(".content").find(".title").text();Moengage.track_event("Delivery_Takeaway_Product_Item_info",{"Mobile_Number":localStorage.getItem('mobile_number'),"Login_Type":localStorage.getItem('email'),"Catalog_Product_Item":cardInfoTitle,"Catalog_Product_Item_info":"Product_Info_click",});});jQuery(document).on('click','.hide-item-model',function(){jQuery('.item-model').hide();});const getBoxHtml=(subCategory,vegOnly)=>{let subCategoryHtml="";let itemIndex=0;subCategory.forEach((eachCat)=>{if(eachCat.items.length){eachCat.items.forEach((item)=>{let modalContent="";let moreInfoButton="";if(!vegOnly||(vegOnly&&item.foodType===0)){subCategoryHtml+=`<div class="deliver-card ${getFoodTypeCssClass(item.foodType)}">`;let originalPrice="";if(item.itemPrice!=item.originalPrice){originalPrice=`<span class="original-price">${getCurrencyCode()}${item.originalPrice}</span> `;}
if(item.options.length!==0){moreInfoButton=`<button data-model-id="#modal-${itemIndex}-${item.itemCode}" class='btn btn-primary show-item-model'>@</button>`;modalContent+="<div class='modalContent-start'>";item.options.forEach((optionRow)=>{modalContent+=`<h2>${optionRow.optionTitle}</h2>`;if(optionRow.optionItems.length){modalContent+=`<ul class='options'>`;optionRow.optionItems.forEach((optionItem)=>{modalContent+=`<li>${optionItem.itemName}</li>`;});modalContent+=`</ul>`;}});modalContent+=`</div>`;}
subCategoryHtml+=`
                    ${getImage(item.itemImagePath,item.itemTag,item.promotionMessage)}
                    <div class="content">
    <div class="title">${item.itemName}</div>
    <div class="description">${item.itemDesc}${moreInfoButton}</div>
    <div class="price-cart__details">
        <div class="price">${originalPrice}${getCurrencyCode()}${item.itemPrice}</div>
                        <div class="cart">
                            ${getAddToCartHtml(item)}
                          ${item.customize?'<div class="customize"> +Customizable </div>':''}
                              </div></div></div>`;subCategoryHtml+=`<div id="modal-${itemIndex}-${item.itemCode}" class='modal-content item-model'>
              <div class="modal-content-box block">
                <span class="close-btn hide-item-model">x</span>
                ${getImage(item.itemImagePath,item.itemTag,item.itemName)}
                <div class="bbqbox__model-content">${modalContent}</div>
                <div class="bbqbox__model-addbtn">
                ${getAddToCartHtml(item)}
                <div class="price-add-btn"> ${item.itemPrice}</div>
                </div></div>
              </div>`;subCategoryHtml+="</div>";}
itemIndex++;});}});return subCategoryHtml;};const getDescription=(description)=>{if(description){return `<div class="description">
                ${description}
            </div>`;}
return "";};const getDescriptionWithMoreInfo=(description,infoNeeded,itemCode,index)=>{if(description){let moreInfoButton='';if(infoNeeded){moreInfoButton=`<button data-model-id="#modal-${index}-${itemCode}" class='btn btn-primary show-item-model'>@</button>`;}
return `<div class="description">
              ${description}${moreInfoButton}
          </div>`;}
return "";};const getCardButtonHtml=(buttonText,buttonClass,buttonId,dataAttributes,quantity)=>{if(buttonText){if(quantity==null){return `<a href="#" class="button modalButton ${buttonClass}" id="${buttonId}" ${dataAttributes}>${buttonText}</a>`;}else{return `<div class='number'>
                <span class='minus decrease-added-delivery-item' ${dataAttributes}></span>
                <input type='text' disabled ${getInputValueAndId(quantity,buttonId,"input")} />
                <span class='plus increase-added-delivery-item' ${dataAttributes}></span>
              </div>`;}}
return "";};const getCardHtml=(title,price,image,description,tag,buttonText,titleAdditionClass,buttonClass,buttonId,dataAttributes,quantity)=>{return `<div class="list-card ${titleAdditionClass}">

            <div class="content">
              <div class="content__heading">
                <div class="title">
                  ${title}
                </div>
              </div>
              ${getDescription(description)}
              <div class="delivery-list-card-price">${getCurrencyCode()}${price
}/-</div>
            </div>
            ${getCardButtonHtml(buttonText,buttonClass,buttonId,dataAttributes,quantity)}
          ${getImage(image,tag)}
          </div>`;};const getCardWithMoreInfoHtml=(title,price,image,description,options,item,itemIndex,tag,buttonText,titleAdditionClass,buttonClass,buttonId,dataAttributes,quantity)=>{let res='';let infoNeeded=false;if(options.length!==0){infoNeeded=true;}
res+=`<div class="list-card ${titleAdditionClass}">
          <div class="content">
            <div class="content__heading">
              <div class="title">
                ${title}
              </div>
            </div>
            ${getDescriptionWithMoreInfo(description,infoNeeded,item.itemCode,itemIndex)}
            <div class="delivery-list-card-price">${getCurrencyCode()}${price}/-</div>
          </div>
          ${getCardButtonHtml(buttonText,buttonClass,buttonId,dataAttributes,quantity)}`;res+=`${getImage(image,tag)}`;if(options.length!==0){res+=`${getCardModalInfo(options,item,itemIndex)}`}
res+=`</div>`;return res;};const getCardModalInfo=(options,item,itemIndex)=>{let modalContent='';let subCategoryHtml='';modalContent+="<div class='modalContent-start'>";options.forEach((optionRow)=>{let itemTitle=optionRow.optionTitle;if(optionRow.optionTitle==''){itemTitle=optionRow.optionDesc;}
modalContent+=`<h2>${itemTitle}</h2>`;if(optionRow.optionItems.length){modalContent+=`<ul class='options'>`;optionRow.optionItems.forEach((optionItem)=>{modalContent+=`<li>${optionItem.itemName}</li>`;});modalContent+=`</ul>`;}});modalContent+=`</div>`;subCategoryHtml+=`<div id="modal-${itemIndex}-${item.itemCode}" class='modal-content item-model'>
              <div class="modal-content-box block">
                <span class="close-btn hide-item-model">x</span>
                ${getImage(item.itemImagePath,item.itemTag)}
                <div class="title">${item.itemName}</div>
                <div class="bbqbox__model-content">${modalContent}</div>
                <div class="bbqbox__model-addbtn">
                ${getAddToCartHtml(item)}
                <div class="price-add-btn"> ${item.itemPrice}</div>
                </div></div>
              </div>`;return subCategoryHtml;};const getImageAndTextHtml=(subCategory,price,vegOnly)=>{let subCategoryHtml="";let itemIndex=0;subCategory.forEach((s)=>{s.items.forEach((item)=>{if(!vegOnly||(vegOnly&&item.foodType===0)){let subCategoryListItemHtml=getCardWithMoreInfoHtml(item.itemName,item.itemPrice,item.itemImagePath,item.itemDesc,item.options,item,itemIndex,undefined,"Add",getFoodTypeCssClass(item.foodType),"add-individual-item",item.itemCode,`data-item-code=${item.itemCode}`,getCartDetails.has(item.itemCode)?getCartDetails.get(item.itemCode).quantity:undefined);subCategoryHtml+=`<div>${subCategoryListItemHtml}</div>`;}
itemIndex++;});});return subCategoryHtml;};const populateDeliveryPage=(deliveryCatalog,vegOnly=false)=>{if(deliveryCatalog.servicable){let boxItemsHtml="";let sideBarHtml="";deliveryCatalog.box.forEach((catalog)=>{boxItemsHtml+=`<div class="products-row" id="${catalog.categoryCode}">
                        <div class="product__title">${catalog.categoryDesc
}</div>
                        <div class="product-items">${getBoxHtml(catalog.subcategory,vegOnly)}</div>
                     </div>`;sideBarHtml+=sideBarItemHtml(catalog.categoryCode,catalog.categoryDesc);});let imageAndTextHtml="";deliveryCatalog.individualItems.forEach((item)=>{imageAndTextHtml+=`<div id="${item.categoryCode}" class="subtitle">
                            ${item.categoryDesc}
                           </div>
                           <div>${getImageAndTextHtml(item.subcategory,item.itemPrice,vegOnly)}</div>`;sideBarHtml+=sideBarItemHtml(item.categoryCode,item.categoryDesc);});$("#delivery-items").html(sideBarHtml);$("#takeaway-items").html(sideBarHtml);$("#delivery-box-items").html(boxItemsHtml);$("#delivery-image-and-text-items").html(imageAndTextHtml);}};const getDeliverHereClass=(address)=>{if(!address.servicable){return DELIVERY_PROPS.ANCHOR_DISABLED;}else{return "delivery-cart-deliver-here";}};const deliveryAddressCard=(address)=>{let addressSelected='';if(deliveryTabActive&&cartRawData){if(address.address_id==cartRawData.delivery_address_id&&deliveryCustomerAddress.has(cartRawData.delivery_address_id)&&deliveryCustomerAddress.get(cartRawData.delivery_address_id).servicable){addressSelected='addSelected';}}
return `<div class=\"saved-address--block\">
            <div class=\"saved-address--block-content ${addressSelected}\">
            <input type="radio" data-address-id="${address.address_id
}" class="${getDeliverHereClass(address)}">
            <div class="saved-address-flat">${address.flat_no}</div>
            <div class="saved-address-main">${address.address}</div>
            </div>
            <div class=\"saved-address--block-action row\">

            <button data-address-id="${address.address_id
}" class="edit-saved-address" style="display: none;">Edit</button>
            <div class="edit-saved-address-block"></div>
            </div>
          </div>`;};const setCartDeliveryAddress=(customerAddress)=>{let addressHtml='<div class="saved-address--title">Delivers to</div><a id="hide-saved-delivery-address">Hide</a>';customerAddress.forEach((address)=>{deliveryCustomerAddress.set(address.address_id,address);enableOrDisablePayNow();addressHtml+=deliveryAddressCard(address);});$("#saved-delivery-addresses").html(addressHtml);$(".saved-address--block-content .anchor-disabled").parent().parent().addClass("disable-address-wrap");$(".disable-address-wrap").first().addClass("disable-address-wrap-text");};$(document).on("click","#hide-saved-delivery-address",(e)=>{e.preventDefault();$("#saved-delivery-addresses").addClass("hidden");});const getCustomerDetails=()=>{return{customer_id:getMobileNumber(),branch_id:DELIVERY_PROPS.BRANCH_ID,};};const setCustomerDeliveryAddress=()=>{deliveryHttpRequest(DELIVERY_URL.GET_CUSTOMER_ADDRESS,DELIVERY_REQUEST_METHODS.POST,getCustomerDetails(),THUNK_ACTION_TYPES.GET_CUSTOMER_ADDRESS);};const completeVoucherCheckout=(transaction)=>{const postData={payment_id:transaction.razorpay_payment_id};deliveryHttpRequest(DELIVERY_URL.VALIDATE_PAYMENT,DELIVERY_REQUEST_METHODS.POST,Object.assign(postData,getCustomerDetails()),THUNK_ACTION_TYPES.VALIDATE_PAYMENT);};const proceedToPayment=(orderId)=>{deliveryOrderId=orderId
const options={order_id:orderId,amount:DELIVERY_PROPS.DELIVERY_TOTAL,currency:DELIVERY_PROPS.CURRENCY,name:"Barbeque Nation",image:"/themes/custom/bbq_nation/assets/images/bbqn-logo.svg",handler:(transaction)=>{completeVoucherCheckout(transaction);},prefill:{contact:getMobileNumber(),email:getEmail(),},};window.rzpay=new Razorpay(options);rzpay.open();};const voucherAndCouponItemHtml=(voucherOrCoupon,tenderKey)=>{let applyText="APPLY "+tenderKey;let additionalClass="";if(tenderKey==="VOUCHER"&&DELIVERY_PROPS.APPLIED_VOUCHERS.has(voucherOrCoupon.barcode)){applyText="APPLIED";additionalClass="coupon-applied";}else if(tenderKey==="COUPON"){if(DELIVERY_PROPS.APPLIED_COUPON_CODE){if(voucherOrCoupon.barcode===DELIVERY_PROPS.APPLIED_COUPON_CODE){applyText="APPLIED";additionalClass="coupon-applied";}else{additionalClass=DELIVERY_PROPS.ANCHOR_DISABLED;}}}
let CouponCheckClass='';if(tenderKey==="COUPON"){switch(sales_sub_type_value){case 'Takeaway':if(voucherOrCoupon.sales_sub_type!=='Takeaway'&voucherOrCoupon.sales_sub_type!==''){CouponCheckClass='coupon-hide';}
break;case 'Delivery':if(voucherOrCoupon.sales_sub_type=='Takeaway'){CouponCheckClass='coupon-hide';}
break;case 'Instant':if(voucherOrCoupon.sales_sub_type!=='Instant'){CouponCheckClass='coupon-hide';}
break;case 'Schedule':if(voucherOrCoupon.sales_sub_type!=='Schedule'){CouponCheckClass='coupon-hide';}
break;};};if(tenderKey==="VOUCHER"||tenderKey==="COUPON"){DELIVERY_PROPS.SHOW_DELIVERY_COUPON_HTML=voucherOrCoupon.rule_description;}
return `<div class="coupon-card row align-center space-between ${CouponCheckClass}">
            <div class="coupon__left">
              <div class="coupon-title">${voucherOrCoupon.title}</div>
              <div class="coupon-description">${voucherOrCoupon.description}</div>
              <div class="coupon-link">
                <a class="read-more-delivery-coupon-description" href="#">Read More</a>
              </div>
            </div>
            <div class="coupon__right">
              <div class="coupon-cta">
                <a class="apply-coupons-vouchers-for-delivery ${additionalClass}" data-amount="${voucherOrCoupon.denomination
}" data-tender_key="${tenderKey}" data-barcode="${voucherOrCoupon.barcode
}" href="#">${applyText}</a>
              </div>
              <div class="coupon-code">Code:
                <span>${voucherOrCoupon.barcode}</span>
              </div>
            </div>
          </div>`;};$(document).on('click','.read-more-delivery-coupon-description',(e)=>{e.preventDefault();$.dialog({title:'Description',boxWidth:'50%',useBootstrap:false,content:DELIVERY_PROPS.SHOW_DELIVERY_COUPON_HTML,});$("#delivery-coupons-vouchers").show();e.preventDefault();});$(document).on('click','.jconfirm-closeIcon',(e)=>{e.preventDefault();$("#delivery-cart-curtain").addClass("reservation--visible");$(".jconfirm-light").hide();$(".jconfirm-light").removeClass("jconfirm-open")
$("#delivery-coupons-vouchers").show();e.preventDefault();});const populateVouchersAndCoupons=(voucherAndCoupons,type)=>{let data="";let label="";let offersData="";let offersLabel="";if(type==="VOUCHER"){label="VOUCHERS";if(voucherAndCoupons.voucher&&voucherAndCoupons.voucher.length>0){data=voucherAndCoupons.voucher;}}else if(type==="COUPON"){label="COUPONS";if(voucherAndCoupons.coupon&&voucherAndCoupons.coupon.length>0){data=voucherAndCoupons.coupon;}
offersLabel="OFFERS";if(voucherAndCoupons.offer&&voucherAndCoupons.offer.length>0){offersData=voucherAndCoupons.offer;}}
$("#delivery-voucher-coupon-title").text("AVAILABLE "+label);if(data){let voucherOrCouponHtml="";data.forEach((v)=>{voucherOrCouponHtml+=voucherAndCouponItemHtml(v,type);});$("#delivery-voucher-coupon-listing").html(voucherOrCouponHtml);}else{$("#delivery-voucher-coupon-listing").html(`<div>No ${label.toLowerCase()} available.</div>`);}
if(type==="COUPON"){$("#delivery-offers-title").text("AVAILABLE "+offersLabel);if(offersData){type="OFFER";let voucherOrCouponHtml="";offersData.forEach((v)=>{voucherOrCouponHtml+=voucherAndCouponItemHtml(v,type);});$("#delivery-offers-listing").html(voucherOrCouponHtml);}else{$("#delivery-offers-listing").html(`<div>No ${offersLabel.toLowerCase()} available.</div>`);}}else if(type==="VOUCHER"){$("#delivery-offers-title").text("");$("#delivery-offers-listing").html("");}};const resetCartDetails=()=>{DELIVERY_PROPS.DELIVERY_ORDER_ID=undefined;DELIVERY_PROPS.DELIVERY_TOTAL=undefined;DELIVERY_PROPS.LOYALTY_APPLIED=false;DELIVERY_PROPS.APPLIED_COUPON=false;DELIVERY_PROPS.APPLIED_COUPON_CODE=false;DELIVERY_PROPS.APPLIED_OFFERS.clear();DELIVERY_PROPS.APPLIED_VOUCHERS.clear();$("#delivery-applied-discounts").empty();const deliveryPriceBreakUpElement=$("#delivery-price-break-up, #outer-delivery-price-break-up");deliveryPriceBreakUpElement.empty();deliveryPriceBreakUpElement.hide();$("#delivery-total-amount").empty();$("#delivery-total-amount2").empty();};$(document).on('click','#selected-delivery-address-block, #selected-delivery-address-block-mobile',function(){$(".select-address-popup-outer").removeClass("popup-hidden");$(".saved-address--block-content .anchor-disabled").parent().parent().addClass("disable-address-wrap");$(".disable-address-wrap").first().addClass("disable-address-wrap-text");});const isDeliveryCartOpen=()=>{return $("#delivery-cart-curtain").hasClass("reservation--visible");};function todayTimeDate(timeDate=null,HourFormate=24,dateSeparator="/"){let dtobj=new Date;let year=dtobj.getFullYear();let month=dtobj.getMonth();let date=dtobj.getDate();let hour=dtobj.getHours();let minutes=dtobj.getMinutes();let current_time=hour+":"+minutes;if(HourFormate==12){if(hour>12){hour=hour-12;current_time=hour+":"+minutes+" PM";}else{current_time=hour+":"+minutes+" AM";}}
if(timeDate=='time'){return current_time;}else if(timeDate="date"){return year+dateSeparator+month+dateSeparator+date;}else{return year+dateSeparator+month+dateSeparator+date+" "+current_time;}}
var isTodayDelivery=false;var timeSlotWrap=$('.time-slots-wrap');var mk_selectedDeliveryTime=todayTimeDate(null,12);var mk_selectedDateSlot=todayTimeDate("date");var data={};var monthSlotHtml="";const setIsTodayDelivery=(flag)=>{isTodayDelivery=flag;}
const showModalOfSelectDeliverySlot=()=>{$('.delivery-slot-wrap-modal').show();}
const hideModalOfSelectDeliverySlot=()=>{$('.delivery-slot-wrap-modal').hide();}
$(document).on('click','.hideModalOfSelectDeliverySlot',function(){hideModalOfSelectDeliverySlot();});const setDeliverySlot=(slotType)=>{if(typeof slotType=='undefined'||slotType==null||slotType==""){alert("Please select delivery slot");return;}
if(slotType==='other'){mk_selectedDeliveryTime=null;setIsTodayDelivery(false);showModalOfSelectDeliverySlot();return true;}
if(slotType==='today'){setIsTodayDelivery(true);hideModalOfSelectDeliverySlot();let dObj=new Date();let timeSlot=getTime12Format(dObj);let mP=(dObj.getMonth()>=10)?'':0;let dP=(dObj.getDay()>=10)?'':0;mk_selectedDeliveryTime=dObj.getFullYear()+"/"+mP+dObj.getMonth()+"/"+dP+dObj.getDay()+" "+timeSlot;return true;}}
const doEmptyTimeSlotWrap=()=>{timeSlotWrap.html('');}
$(document).on('click','.timeSlotClicked',function(){mk_selectedDeliveryTime=$(this).attr('data-time-slot');$(".other-day-delivery").html("Schedule"+'</br>'+mk_selectedDeliveryTime);})
$(document).on('click','.instant-delivery',function(){$(".other-day-delivery").html("Schedule");})
$(document).ready(function(){if($('#via-takeaway').value===""){$('.other-day-delivery').addClass('btn-disable');$('.deliver-by').addClass('display-none');}else{$('.other-day-delivery').removeClass('btn-disable');$('.deliver-by').removeClass('display-none');}});$(document).on('click','#via-takeaway',function(){$('.other-day-delivery').addClass('btn-disable');$('.deliver-by').addClass('display-none');$('.delivery-eatimated-time').addClass("hidden");sales_sub_type_value="Takeaway";});$(document).on('click','#via-delivery',function(){$('.other-day-delivery').removeClass('btn-disable');$('.deliver-by').removeClass('display-none');$('.delivery-eatimated-time').removeClass("hidden");$(".cart__add-new-address").removeClass("hidden");$(".cart__address-outer").removeClass("cart-takeaway-extend");sales_sub_type_value="Delivery";});const getTime12Format=(etS,extendMinutes)=>{if(typeof extendMinutes=="undefined"){extendMinutes=0;}else{extendMinutes=(lst_delivery_schedule_interval/60);}
var v=new Date(etS);v.setMinutes(v.getMinutes()+extendMinutes);let newH=v.getHours()%12||12;newH=(newH>=10?'':'0')+newH;let newMin=(v.getMinutes()>=10?'':'0')+v.getMinutes();let am_pm=v.getHours()>=12?"PM":"AM";return newH+":"+newMin+" "+am_pm;}
var lst_delivery_schedule_dates=[];var lst_delivery_schedule_interval=null;const dateSlotClicked=(dateSlotIndex)=>{doEmptyTimeSlotWrap();mk_selectedDeliveryTime=null;mk_selectedDateSlot=$(this).attr('data-dl-date');let timeSlots=lst_delivery_schedule_dates[parseInt(dateSlotIndex)].time;if(typeof timeSlots=="undefined"||timeSlots==null||timeSlots.length===0){return false;}
let timeSlotHtml="";$.each(timeSlots,function(ix,etS){let timeArr=etS.split(' ');let newsTmSlot=getTime12Format(etS,true);let visibleTime=timeArr[1]+" "+timeArr[2];timeSlotHtml+="<div class='schedule-date-btn'><button class='btn time-slot-btn timeSlotClicked'  data-time-slot='"+etS+"'>"+visibleTime+" - "+newsTmSlot+"</button></div>";});timeSlotWrap.html(timeSlotHtml);return true;}
$(document).on('click','.schedule-delivery-btn',function(){$('.schedule-delivery-btn').removeClass('active');$(this).addClass('active');$('#date-slot-id-0').trigger('click');});$(document).on('click','.date-slot-btn',function(){$('.date-slot-btn').removeClass('active');$(this).addClass('active');});$(document).on('click','.time-slot-btn',function(){$(document).find('.time-slot-btn').removeClass('active');$(this).addClass('active');});$(function(){setDeliverySlot('today');setTimeout(function(){$('#date-slot-id-0').trigger('click');});});$(document).on('click','.other-day-delivery',function(){setDeliverySlot('other');sales_sub_type_value="Schedule";});$(document).on('click','.instant-delivery',function(){setDeliverySlot('today');sales_sub_type_value="Instant";});$(document).on('click','.dateSlotClicked',function(){let indexVAl=$(this).attr('data-index');dateSlotClicked(indexVAl);});const deliveryHttpRequest=(url,requestMethod=DELIVERY_REQUEST_METHODS.GET,postData,actionType,reload=false,extraProps={})=>{$.ajax({dataType:"json",method:requestMethod,url,data:requestMethod!==DELIVERY_REQUEST_METHODS.GET?JSON.stringify(postData):postData,beforeSend:function(){if(DELIVERY_PROPS.LOADING_COUNT===0){loaderStart();}
DELIVERY_PROPS.LOADING_COUNT+=1;},complete:function(){DELIVERY_PROPS.LOADING_COUNT-=1;if(DELIVERY_PROPS.LOADING_COUNT<0){DELIVERY_PROPS.LOADING_COUNT=0;}
if(DELIVERY_PROPS.LOADING_COUNT===0){loaderStop();}},headers:getHeaders(),success(data){if(data){if(typeof extraProps==="function"){extraProps();}
if(reload){window.location.reload();}else{data=data
switch(actionType){case THUNK_ACTION_TYPES.GET_CART_DETAILS_AND_LOAD_CATALOG:case THUNK_ACTION_TYPES.GET_CART_DETAILS:getCartDetails=new Map();if(data.data){lst_delivery_schedule_dates=data.data.lst_delivery_schedule_dates;lst_delivery_schedule_interval=data.data.lst_delivery_schedule_interval;if(monthSlotHtml==""){monthSlotHtml+="<div class='date-wrap'>";$.each(data.data.lst_delivery_schedule_dates,function(index,slot){monthSlotHtml+="<button class='date-slot-btn dateSlotClicked' id='date-slot-id-"+index+"'  data-date-id='"+index+"' data-index='"+index+"'  data-dl-date='"+slot.date+"'>"+slot.date_label+"</button>";});monthSlotHtml+="</div>";if($('#delivery-slot-wrap').html()==""){$('#delivery-slot-wrap').html(monthSlotHtml);}}
$('#delivery-products').addClass("delivery-products-show");getDeliveryCart(data.data);$("#delivery-no-items-message").addClass("hidden");$("#delivery-cart-curtain-block").removeClass("hidden");DELIVERY_PROPS.DELIVERY_ORDER_ID=data.data.order_id;DELIVERY_PROPS.DELIVERY_TOTAL=parseInt(data.data.final_break_up,10);if(data.data.tender&&data.data.tender.length>0){let appliedDiscountHtml="";data.data.tender.forEach((t)=>{if(t&&t.lstTender&&t.lstTender.length<=0){if(t.tender_key==="COUPON"){DELIVERY_PROPS.APPLIED_COUPON=false;DELIVERY_PROPS.APPLIED_COUPON_CODE=false;}else if(t.tender_key==="VOUCHER"){DELIVERY_PROPS.APPLIED_VOUCHERS.clear();}else if(t.tender_key==="OFFER"){DELIVERY_PROPS.APPLIED_OFFERS.clear();}}
if(t&&t.lstTender&&t.lstTender.length>0){if(t.tender_key==="SMILES"){DELIVERY_PROPS.LOYALTY_APPLIED=true;}else if(t.tender_key==="COUPON"){t.lstTender.forEach((tenderItem)=>{DELIVERY_PROPS.APPLIED_COUPON=tenderItem.barcode;DELIVERY_PROPS.APPLIED_COUPON_CODE=tenderItem.promocode;});}else if(t.tender_key==="VOUCHER"){DELIVERY_PROPS.APPLIED_VOUCHERS.clear();t.lstTender.forEach((tenderItem)=>{DELIVERY_PROPS.APPLIED_VOUCHERS.add(tenderItem.barcode);});}else if(t.tender_key==="OFFER"){DELIVERY_PROPS.APPLIED_OFFERS.clear();t.lstTender.forEach((tenderItem)=>{DELIVERY_PROPS.APPLIED_OFFERS.add(tenderItem.barcode);});}
appliedDiscountHtml+=`<div>
                                                ${getDiscountList(t.tender_key,t.lstTender)}
                                              </div>`;}else if(t.tender_key==="SMILES"){DELIVERY_PROPS.LOYALTY_APPLIED=false;}});$("#delivery-applied-discounts").html(appliedDiscountHtml);}
$('#smile_you_got').text(data.data.smiles_on_order);let priceBreakUpHtml="";data.data.lst_tax_charges.forEach((priceBreakUp)=>{priceBreakUpHtml+=`<div class="gst">
                                          <h5>${priceBreakUp.label}</h5>
                                          <span>${getCurrencyCode()}${priceBreakUp.value
}</span>
                                         </div>`;});const deliveryPriceBreakUpElement=$("#delivery-price-break-up, #outer-delivery-price-break-up");deliveryPriceBreakUpElement.html(priceBreakUpHtml);deliveryPriceBreakUpElement.show();$("#delivery-total-amount").html(`${getCurrencyCode()}${data.data.final_break_up}`);$("#delivery-total-amount2").html(`${getCurrencyCode()}${data.data.final_break_up}`);rebuildLoyaltyPoints();if(data.data.item){data.data.item.forEach((addedItem)=>{getCartDetails.set(addedItem.item_id,addedItem);});}
if(isDeliveryCartOpen()){getDeliveryCart(data.data);if(data.data.delivery_address!=''){$('#selected-delivery-addresses').show();$(".add-new-address").hide();$(".selected-address-addresses-mobile").show();enableOrDisablePayNow();if($('#delivery-generate-payment').hasClass('anchor-disabled')){$("#selected-delivery-address-block, #selected-delivery-address-block-mobile").html(`<div class="blink_me">
                              <div>Selected Address is not serviceable. Select or Add a new Address</div>
                            </div>`);$('#delivery-takeaway-address').html('');}else{$("#selected-delivery-address-block, #selected-delivery-address-block-mobile").html(`<div class="saved-address--content">${data.data.delivery_address}</div>`);}}else{$("#selected-delivery-address-block, #selected-delivery-address-block-mobile").html(`<div class="blink_me">
                            <div>Selected Address is not serviceable. Select or Add a new Address</div>
                          </div>`);$('#delivery-takeaway-address').html('');}}}else{if(isDeliveryCartOpen()){$("#delivery-no-items-message").removeClass("hidden");$("#delivery-cart-curtain-block").addClass("hidden");}
resetCartDetails();}
if(allDeliveryItems){populateDeliveryPage(allDeliveryItems);menuAccordingVegNonveg();}
if(extraProps.callback){extraProps.callback();}
if(actionType===THUNK_ACTION_TYPES.GET_CART_DETAILS_AND_LOAD_CATALOG){deliveryHttpRequest(DELIVERY_URL.GET_DELIVERY_CATALOG,DELIVERY_REQUEST_METHODS.POST,{branch_id:DELIVERY_PROPS.BRANCH_ID.toString(),latitude:DELIVERY_PROPS.LATITUDE.toString(),longitude:DELIVERY_PROPS.LONGITUDE.toString(),},THUNK_ACTION_TYPES.GET_DELIVERY_CATALOG);}
break;case THUNK_ACTION_TYPES.GET_DELIVERY_CATALOG:allDeliveryItems=new DeliveryCatalog(data.data);populateDeliveryPage(allDeliveryItems);menuAccordingVegNonveg();break;case THUNK_ACTION_TYPES.ADD_TO_CART:if(data&&data.message_type&&data.message_type==="success"){getCartDetailsAndRebuild();}else if(data&&data.message_type==="failed"){window.location.reload();}
break;case THUNK_ACTION_TYPES.UPDATE_ORDER_ADDRESS:if(data&&data.message_type==="success"){getCartDetailsAndRebuild();}
break;case THUNK_ACTION_TYPES.GET_CUSTOMER_ADDRESS:if(data.message_type==="success"&&data.data){setCartDeliveryAddress(data.data.address);}
break;case THUNK_ACTION_TYPES.ADD_CUSTOMER_ADDRESS:if(data.message_type==="success"&&data.data&&data.data.address&&data.data.address.length===1&&data.data.address[0].address_id){setCustomerDeliveryAddress();const currentAddress=data.data.address[0];deliveryCustomerAddress.set(currentAddress.address_id,currentAddress);$("#delivery-address-map-block").hide();$('#selected-delivery-addresses').show();$("#add-new-delivery-address-block").show();if(extraProps.element){extraProps.element[0].reset();}
deliveryHttpRequest(DELIVERY_URL.UPDATE_ORDER_ADDRESS,DELIVERY_REQUEST_METHODS.POST,{...{address_id:currentAddress.address_id},...getCustomerDetails()},THUNK_ACTION_TYPES.UPDATE_ORDER_ADDRESS,false,()=>$("#saved-delivery-addresses").addClass("hidden"));}
break;case THUNK_ACTION_TYPES.GET_SMILES:DELIVERY_PROPS.LOYALTY_POINTS=data.available_points;DELIVERY_PROPS.LOYALTY_EXCHANGE_RATE=data.redeem_amount/data.redeemable_points;$("#smile-point-input-value").val(getMaximumLoyaltyApplicable());$("#all-smile-you-have").text(getMaximumLoyaltyApplicable());if(!DELIVERY_PROPS.LOYALTY_POINTS){disableLoyaltyInputAndButton();}else{enableLoyaltyInputAndButton();}
break;case THUNK_ACTION_TYPES.GET_COUPON_VOUCHER:if(data.message_type==="success"&&data.data){populateVouchersAndCoupons(data.data,extraProps.type);}
break;case THUNK_ACTION_TYPES.GENERATE_PAYMENT:if(data.message_type==="success"&&data.data){if(data.data.payment_order_id){proceedToPayment(data.data.payment_order_id);}else{setTimeout(function(){window.location.href="/profile#delivery";},1000);}}
break;case THUNK_ACTION_TYPES.VALIDATE_PAYMENT:if(data.message_type==="success"){Moengage.track_event("Delivery_Takeaway_Order_Status",{"Mobile_number":localStorage.getItem('mobile_number'),"Login_Type":localStorage.getItem('email'),"Delivery_Takeaway_Status":"Success","Oderid":deliveryOrderId});setTimeout(function(){window.location.href="/profile#delivery";},1000);}
else{Moengage.track_event("Delivery_Takeaway_Order_Status",{"Mobile_Number":localStorage.getItem('mobile_number'),"Login_Type":localStorage.getItem('email'),"Delivery_Takeaway_Status":"Failure","Error":"Order not valid.","Oderid":deliveryOrderId});}
break;case THUNK_ACTION_TYPES.GET_BRANCH_BY_ID:$("#delivery-branch-background-image").attr("src",data.branch_image);break;}
if(data.data){if(data.data.delivery===false){$('.delivery-items-select').click(false);$('.takeaway-items-select').trigger('click');$('#via-delivery').click(false);$('#takeaway-items').addClass('deliveryactive');$('.delivery-items-select').parent().addClass('delivery_item_fals');}else if(data.data.takeaway===false){$('.takeaway-items-select').hide();$('.delivery-items-select').trigger('click');$('#via-takeaway').click(false);}else if(data.data.delivery===false&&data.data.takeaway===false){$('.add-individual-item').click(false);$('#delivery-proceed-to-checkout').click(false);}}}}},error(data){},});};const addAddressHtml=(phoneNumber="",addressId="",flatNo="",address="",landmark="",pincode="",tagTypeadd="",)=>{return `<form class="add-delivery-address-form">
              <div class="add-address-location">
                <img src="../../../../themes/custom/bbq_nation/assets/images/add-location-icon.jpg">
                <div class="add-address-location-add">
                  <h4>Selected Address</h3>
                  <div class="map-location-value">
                    <p class="map-location-value-add">${address}</p>
                    <input type="text" name="address_id" hidden value="${addressId}">
                    <input type="text" name="address" class="address-field" hidden required value="${address}">
                  </div>
                </div>
              </div>
              <label>Door/Flat</label>
              <input type="text" name="flat_no" required value="${flatNo}">
              <label>Nearest landmark</label>
              <input type="text" name="landmark" required value="${landmark}">
              <input type="number" name="pincode" required hidden value="${pincode}">
              <input type="number" name="phone_no" required hidden value="${phoneNumber}">
              <div>
              <label>Tag this location</label>
              <ul class="radio-button-tag">
                <li><span class="add-home-icon">Home</span><input type="radio" name="tag_type" value="Home" id="tagHome" class="add-detials-tag" ></li>
                <li><span class="add-work-icon">Work</span><input type="radio" name="tag_type" value="Work" id="tagWork" class="add-detials-tag" ></li>
                <li><span class="add-other-icon">Other</span><input type="radio" name="tag_type" value="Other" id="tagOther" class="add-detials-tag" ></li>
              </ul>
              </div>

              <input type="submit" value="SAVE ADDRESS" />
            </form>`;};{}
const getCustomerSmiles=()=>{deliveryHttpRequest(DELIVERY_URL.GET_SMILES,DELIVERY_REQUEST_METHODS.GET,{amount:1,currency:DELIVERY_PROPS.CURRENCY,},THUNK_ACTION_TYPES.GET_SMILES);};const getDisplayStyle=(index)=>{if(index===0){return "display: block";}
return "display: none";};const getThresholdAndAllowMultipleDataAttributes=(allowMultiple,threshold)=>{return("data-allow-multiple="+allowMultiple+" data-threshold="+threshold);};const getIncreaseClass=(threshold,allowMultiple)=>{if(allowMultiple==="false"){return DELIVERY_PROPS.ANCHOR_DISABLED;}
return "";};const splitIdToDeliveryCode=(id)=>{const splitId=id.split("-");const deliveryItemCode=splitId[0];const optionCode=deliveryItemCode+"-"+splitId[1];const optionItemCode=splitId[2];return{deliveryItemCode,optionCode,optionItemCode};};const extractThresholdAndAllowMultipleDataAttributes=(e)=>{const allowMultiple=e.target.dataset.allowMultiple;const threshold=parseInt(e.target.dataset.threshold);return{allowMultiple,threshold};};const validateAndEnableOrDisableNextButtonAndProgressBar=(threshold,deliveryItemCode,optionCode,action=DELIVERY_PROPS.ITEM_ACTIONS.ADD)=>{const deliveryItem=deliveryItemsMap.get(deliveryItemCode);const individualPercentage=100/deliveryItem.options.length/boxIndividualItemInOptionCount.get(optionCode);const progressElement=$("#box-delivery-items-progress");let overallPercentage=0;if(progressBarPercentageMap.has(deliveryItemCode)){overallPercentage=progressBarPercentageMap.get(deliveryItemCode);}
if(addedDeliveryItemsMap.get(deliveryItemCode).get(optionCode).size===threshold){$("#box-delivery-items-next").removeClass(DELIVERY_PROPS.ANCHOR_DISABLED);}else{const nextButton=$("#box-delivery-items-next");if(!nextButton.hasClass(DELIVERY_PROPS.ANCHOR_DISABLED)){nextButton.addClass(DELIVERY_PROPS.ANCHOR_DISABLED);}}
let nextWidth;if(action===DELIVERY_PROPS.ITEM_ACTIONS.ADD){nextWidth=overallPercentage+individualPercentage;if(nextWidth>100){nextWidth=100;}
if(nextWidth===100){$("#box-delivery-items-next").text("Add");}}else{if(overallPercentage===100){$("#box-delivery-items-next").text("Next");}
nextWidth=overallPercentage-individualPercentage;if(nextWidth<0){nextWidth=0;}}
progressElement.width(nextWidth+"%");progressBarPercentageMap.set(deliveryItemCode,nextWidth);};const getListActiveClass=(index)=>{if(index===0){return "active";}
return "";};const enableOrDisablePayNow=()=>{if(deliveryTabActive&&cartRawData){if(deliveryCustomerAddress.has(cartRawData.delivery_address_id)&&deliveryCustomerAddress.get(cartRawData.delivery_address_id).servicable){$("#delivery-generate-payment").removeClass(DELIVERY_PROPS.ANCHOR_DISABLED);$("#selected-delivery-address-block, #selected-delivery-address-block-mobile").html(`<div class="saved-address--content">${cartRawData.delivery_address}</div>`);}else{$("#delivery-generate-payment").addClass(DELIVERY_PROPS.ANCHOR_DISABLED);}}else{$("#delivery-generate-payment").removeClass(DELIVERY_PROPS.ANCHOR_DISABLED);}
if($('#delivery-generate-payment').hasClass('anchor-disabled')){$("#selected-delivery-address-block, #selected-delivery-address-block-mobile").html(`<div class="blink_me">
            <div>Selected Address is not serviceable. Select or Add a new Address</div>
          </div>`);$('#delivery-takeaway-address').html('');}};$(function(){if(jQuery("#via-delivery").hasClass("active")){jQuery("#delivery--order-type").hide();}});$(document).on("click","#via-delivery",(e)=>{e.preventDefault();deliveryTabActive=true;$("#delivery-pickup-text").text("DELIVER IN");$("#add-new-delivery-address-block").show();$("#selected-delivery-addresses").removeClass("hidden");enableOrDisablePayNow();getDeliveryAddressDetails();$("#via-delivery").addClass("active");$("#via-takeaway").removeClass("active");$("#delivery--order-type").hide();$("#delivery--order-type").removeClass("delivery--order-type-show");if($('#delivery-generate-payment').hasClass('anchor-disabled')){$("#selected-delivery-address-block, #selected-delivery-address-block-mobile").html(`<div class="blink_me">
           <div>Selected Address is not serviceable. Select or Add a new Address</div>
        </div>`);$('#delivery-takeaway-address').html('');}
getCartDetailsAndRebuild();});$(document).on("click","#via-takeaway",(e)=>{e.preventDefault();deliveryTabActive=false;$("#delivery-pickup-text").text("PICKUP TIMINGS");$("#add-new-delivery-address-block").hide();$("#saved-delivery-addresses").addClass("hidden");$(".cart__add-new-address").addClass("hidden");$(".cart__address-outer").addClass("cart-takeaway-extend");$("#selected-delivery-addresses").addClass("hidden");enableOrDisablePayNow();getDeliveryAddressDetails();$("#via-takeaway").addClass("active");$("#via-delivery").removeClass("active");$("#delivery--order-type").show();$("#delivery--order-type").addClass("delivery--order-type-show");$('#delivery-address-map-block').hide();setDeliveryDayOptions($('#cart-delivery-days').val())
getCartDetailsAndRebuild();});$(document).on("click","#add-new-address-btn",(e)=>{e.preventDefault();$('#delivery-address-map-block').hide();$('#add-new-delivery-address-block').show();});$(document).on("change","#cart-delivery-hours",(e)=>{DELIVERY_PROPS.DELIVERY_DATE=e.target.value;});$(document).on("click","#add-new-delivery-address",(e)=>{e.preventDefault();if(window.location.pathname=='/delivery'){attachGMapLibrary();}
setTimeout(function(){var lat_no=parseFloat(DELIVERY_PROPS.LATITUDE);var long_no=parseFloat(DELIVERY_PROPS.LONGITUDE);let mapElement="delivery-address-map";if(screen.width<641){mapElement="delivery-address-map-mobile";}
const myLatLng={lat:lat_no,lng:long_no,};let mapProp={center:new google.maps.LatLng(myLatLng),zoom:15,};let map=new google.maps.Map(document.getElementById(mapElement),mapProp);let marker=new google.maps.Marker({position:myLatLng,map,draggable:true,title:"Location",});google.maps.event.addListener(marker,"dragend",(e)=>{DELIVERY_PROPS.LATITUDE=e.latLng.lat();DELIVERY_PROPS.LONGITUDE=e.latLng.lng();reverseGeocodeLatLng();});reverseGeocodeLatLng();$("#hide-saved-delivery-address").trigger('click');$("#delivery-address-map-block").show();$("#add-delivery-address").html(addAddressHtml(getMobileNumber()));$("#add-new-delivery-address-block").hide();$('.address-field').prop('readonly',true);$('#tagWork').click(function(){$('.add-detials-tag').prop('checked',false);$('.radio-button-tag li').removeClass('active');$(this).parent().addClass('active');$('.add-detials-tag#tagWork').prop('checked',true);});$('#tagHome').click(function(){$('.add-detials-tag').prop('checked',false);$('.radio-button-tag li').removeClass('active');$(this).parent().addClass('active');$('.add-detials-tag#tagHome').prop('checked',true);});$('#tagOther').click(function(){$('.add-detials-tag').prop('checked',false);$('.radio-button-tag li').removeClass('active');$(this).parent().addClass('active');$('.add-detials-tag#tagOther').prop('checked',true);});},500);});const reverseGeocodeLatLng=()=>{const geocoder=new google.maps.Geocoder();var lat_no=parseFloat(DELIVERY_PROPS.LATITUDE);var long_no=parseFloat(DELIVERY_PROPS.LONGITUDE);const latlng={lat:lat_no,lng:long_no,};geocoder.geocode({location:latlng},(results,status)=>{if(status==="OK"){if(results[0]){const formElement=$("#add-delivery-address").find("form");formElement.find('input[name="address"]').val(results[0].formatted_address);formElement.find('.map-location-value-add').text(results[0].formatted_address);for(const addressComponent of results[0].address_components){if(addressComponent.types.includes("postal_code")){formElement.find('input[name="pincode"]').val(addressComponent.long_name);break;}}}}});};$(document).on("submit",".add-delivery-address-form",(e)=>{const deliveryAddress={customer_id:getMobileNumber()};const element=$(e.target);element.serializeArray().forEach((value)=>(deliveryAddress[value.name]=value.value));deliveryAddress["latitude"]=DELIVERY_PROPS.LATITUDE.toString();deliveryAddress["longitude"]=DELIVERY_PROPS.LONGITUDE.toString();e.preventDefault();deliveryHttpRequest(DELIVERY_URL.ADD_CUSTOMER_ADDRESS,DELIVERY_REQUEST_METHODS.POST,deliveryAddress,THUNK_ACTION_TYPES.ADD_CUSTOMER_ADDRESS,false,{element:element});$(".address-popup-outer").toggle("popup-hidden");$('#selected-delivery-addresses, .selected-address-addresses-mobile').show();$('.add-new-address').hide();});$(document).on("click",".delivery-cart-deliver-here",(e)=>{const addressId=e.target.dataset.addressId;deliveryHttpRequest(DELIVERY_URL.UPDATE_ORDER_ADDRESS,DELIVERY_REQUEST_METHODS.POST,{...{address_id:addressId},...getCustomerDetails()},THUNK_ACTION_TYPES.UPDATE_ORDER_ADDRESS,false,()=>$("#saved-delivery-addresses").addClass("hidden"));$('.delivery-cart-deliver-here').parent().removeClass('addSelected');$(e.target).parent().addClass('addSelected');$('#address-block-close').trigger('click');});$(document).on("change",".add-delivery-address-form",(e)=>{const formElement=$(e.target).parent();let valid=true;for(const inputValue of formElement.serializeArray()){if(inputValue.name!=="address_id"&&!inputValue.value){valid=false;break;}}
const submitButton=formElement.find(":submit");});$(document).on("click","#delivery-generate-payment",(e)=>{e.preventDefault();const postBody={delivery_time:deliveryTabActive?mk_selectedDeliveryTime:DELIVERY_PROPS.DELIVERY_DATE,transaction_type:deliveryTabActive?1:2,source:"WEB",customer_name:localStorage.getItem('user_name'),ordering_name:localStorage.getItem('user_name'),ordering_phonenumber:getMobileNumber(),};deliveryHttpRequest(DELIVERY_URL.GENERATE_PAYMENT,DELIVERY_REQUEST_METHODS.POST,Object.assign(postBody,getCustomerDetails()),THUNK_ACTION_TYPES.GENERATE_PAYMENT);});$(document).on("click",".edit-saved-address",(e)=>{const addressId=e.target.dataset.addressId;const address=deliveryCustomerAddress.get(addressId);$(e.target).next(".edit-saved-address-block").html(addAddressHtml(address.phone_no,address.address_id,address.flat_no,address.address,address.landmark,address.pincode,address.tag_type));});$(document).on("change","#cart-delivery-days",(e)=>{setDeliveryDayOptions(e.target.value);});$(document).on("click",".box-modal-sidebar-click",(e)=>{e.preventDefault();const id=e.target.dataset.id;const listId=id+"-list";$(".box-item-container").not("#"+id).hide();$(".box-modal-sidebar-list.active").removeClass("deliveryactive");$("#"+id).show();$("#"+listId).addClass("deliveryactive");});$(document).on("click","#delivery-products-sidebar .tab-item",(e)=>{var elems=document.querySelectorAll("#delivery-products-sidebar .deliveryactive");[].forEach.call(elems,function(el){el.classList.remove("deliveryactive");});e.target.className+=" deliveryactive";$(".sidebar .sidebar-items").removeClass("is-active");var idValue=e.target.id;var id=idValue.trim("#");$(""+id).addClass("is-active");});$(document).on("click",".delivery .sidebar .sidebar-items li a",(e)=>{$(".delivery .sidebar li").removeClass("active");e.target.parentElement.className+=" active";var target=e.target.attributes.href.value;$("html, body").animate({scrollTop:$(target).offset().top-100,},1000);});$(document).on("click",".individual-item-checkbox",(e)=>{const individualItemCode=e.target.dataset.individualItemCode;const optionCode=e.target.dataset.optionCode;const optionItemCode=e.target.id;const threshold=e.target.dataset.threshold;if(!addedDeliveryItemsMap.has(individualItemCode)){addedDeliveryItemsMap.set(individualItemCode,new Map());}
if(!addedDeliveryItemsMap.get(individualItemCode).has(optionCode)){addedDeliveryItemsMap.get(individualItemCode).set(optionCode,new Map());}
if(e.target.checked){if(addedDeliveryItemsMap.get(individualItemCode).get(optionCode).size<threshold){addedDeliveryItemsMap.get(individualItemCode).get(optionCode).set(optionItemCode,1);}else{$(e.target).prop("checked",false);}}else{addedDeliveryItemsMap.get(individualItemCode).get(optionCode).delete(optionItemCode);if(addedDeliveryItemsMap.get(individualItemCode).get(optionCode).size===0){addedDeliveryItemsMap.get(individualItemCode).delete(optionCode);}}
if(addedDeliveryItemsMap.get(individualItemCode).size===individualItemTargetTotalCount.get(individualItemCode)){$("#add-individual-item-with-options").removeClass(DELIVERY_PROPS.ANCHOR_DISABLED);}else{$("#add-individual-item-with-options").addClass(DELIVERY_PROPS.ANCHOR_DISABLED);}});$(document).on("click","#add-individual-item-with-options",(e)=>{e.preventDefault();const itemCode=e.target.dataset.itemCode;deliveryHttpRequest(DELIVERY_URL.ADD_TO_CART,DELIVERY_REQUEST_METHODS.POST,new AddToCart(0,itemCode,1),THUNK_ACTION_TYPES.ADD_TO_CART,true,);});const setShowCartInSession=()=>{sessionStorage.setItem(DELIVERY_PROPS.SHOW_DELIVERY_CART_ON_RELOAD,true);};$(document).on("click",".add-individual-item",(e)=>{e.preventDefault();if(isAnonymous()){$(".button--signin").trigger("click");}else{const individualItem=deliveryItemsMap.get(e.target.id);const individualItemCode=individualItem.itemCode;Moengage.track_event("Delivery_Takeaway_Catalog",{"Mobile_Number":localStorage.getItem('mobile_number'),"Login_Type":localStorage.getItem('email'),"Location":localStorage.getItem('branch_name'),"Delivery_Takeaway":deliveryTabActive?"Delivery":"Takeaway","Food_Type":getFoodTypeCssClass(individualItem.foodType),"Catalog_Items":individualItem.itemName});if(individualItem.options&&individualItem.options.length>0&&individualItem.customize){let individualItemHtml=getCardHtml(individualItem.itemName,individualItem.itemPrice,individualItem.itemImagePath,individualItem.itemDesc,individualItem.itemTag,undefined,getFoodTypeCssClass(individualItem.foodType));individualItemTargetTotalCount.set(individualItemCode,0);individualItem.options.forEach((option)=>{individualItemTargetTotalCount.set(individualItemCode,individualItemTargetTotalCount.get(individualItemCode)+
parseInt(option.threshold));individualItemHtml+=`<div class="content__row">
                                <div class="subtitle">
                                  ${option.optionTitle}
                                  <span> (Choose any ${option.threshold
}\u00A0of the following)</span>
                                </div>
                                <div class="items">
                                  ${option.optionItems.map((optionItem)=>{return `<li>
                                              <input
                                                data-individual-item-code="${individualItemCode}"
                                                data-option-code="${option.optionCode}"
                                                data-threshold="${option.threshold}"
                                                class="custom-checkbox individual-item-checkbox"
                                                id="${optionItem.itemCode}"
                                                type="checkbox"
                                                value=""
                                              >
                                              <label for="${optionItem.itemCode}">${optionItem.itemName}</label>
                                            </li>`;})};
                                </div>
                              </div>`;});individualItemHtml+=`<div class="content__row">
                              <div class="price-cart__details">
                                <div class="price">
                                  ${getCurrencyCode()} ${individualItem.itemPrice
}/-
                                </div>
                                <button class="cta ${DELIVERY_PROPS.ANCHOR_DISABLED
}" id="add-individual-item-with-options" data-item-code="${individualItem.itemCode
}">Add</button>
                              </div>
                            </div>`;$("#individual-item-modal-content").html(individualItemHtml);$("#item-modal").show();$("#box-and-items-modal").show();}else{deliveryHttpRequest(DELIVERY_URL.ADD_TO_CART,DELIVERY_REQUEST_METHODS.POST,new AddToCart(0,e.target.id,1),THUNK_ACTION_TYPES.ADD_TO_CART,false,);}}});$("#delivery-proceed-to-checkout").click((e)=>{e.preventDefault();triggerDeliveryCartClick();});$("#delivery-proceed-to-checkout-mobile").click((e)=>{e.preventDefault();triggerDeliveryCartClick();});const triggerDeliveryCartClick=()=>{$(".select-address-popup-outer").addClass("popup-hidden");if(!isDeliveryCartOpen()){$("#header--DELIVERY\\/TAKEAWAY").trigger("click");}};$(".close-add-delivery-items-modal").click((e)=>{e.preventDefault();window.location.reload();});$(document).on("click",".add-box-item",(e)=>{e.preventDefault();if(isAnonymous()){$(".button--signin").trigger("click");}else{const deliveryItem=deliveryItemsMap.get(e.target.id);let listItemSideBarHtml="";let listItemHtml="";if(deliveryItem){const deliveryItemCode=deliveryItem.itemCode;deliveryItem.options.forEach((option,index)=>{const optionId=deliveryItemCode+"-"+option.optionCode;listItemSideBarHtml+=`<li class="${getListActiveClass(index)} box-modal-sidebar-list" id="${optionId}-list">
                                <a class="box-modal-sidebar-click" href="#" data-id="${optionId}"> ${option.optionTitle
} </a>
                              </li>`;listItemHtml+=`<div class="box-item-container" style="${getDisplayStyle(index)}" id="${optionId}">
                         <div class="subtitle">
                          ${option.optionTitle}
                          <span> (Choose any ${option.threshold
}\u00A0of the following)</span>
                        </div>`;boxIndividualItemInOptionCount.set(optionId,option.optionItems.length);option.optionItems.forEach((optionItem)=>{listItemHtml+=getCardHtml(optionItem.itemName,optionItem.price,undefined,undefined,undefined,"Add",getFoodTypeCssClass(optionItem.foodType),"add-box-individual-item",optionId+"-"+optionItem.itemCode,getThresholdAndAllowMultipleDataAttributes(optionItem.allowMultiple,option.threshold));});listItemHtml+="</div>";});$("#box-modal-content").html(`<div class="modal-heading">
                                    ${getCardHtml(deliveryItem.itemName,deliveryItem.itemPrice,deliveryItem.itemImagePath,deliveryItem.itemDesc,deliveryItem.itemTag,undefined,getFoodTypeCssClass(deliveryItem.foodType))}
                                  </div>
                                  <div class="modal-content">
                                    <div class="sidebar">
                                      <div class="sidebar-items is-active" id="delivery-items">
                                        ${listItemSideBarHtml}
                                      </div>
                                    </div>
                                    <div class="cart-items">
                                      ${listItemHtml}
                                    </div>
                                  </div>
                                  <div class="progress">
                                    <label> Progress </label>
                                    <div class="progress-bar">
                                      <div class="bar" id="box-delivery-items-progress">
                                        <p class="percent"/>
                                      </div>
                                    </div>
                                    <button data-id="${deliveryItemCode}" class="${DELIVERY_PROPS.ANCHOR_DISABLED
}" id="box-delivery-items-next"> Next</button>
                                  </div>`);$("#box-modal").show();$("#box-and-items-modal").show();}}});$(document).on("click","#close-delivery-curtain",(e)=>{e.preventDefault();$("#via-delivery").removeClass("active");$("#via-takeaway").removeClass("active");$("#delivery-cart-curtain").removeClass("reservation--visible");});$("#filter-delivery-item-based-on-food-type").click(function(){$(this).toggleClass("active");menuAccordingVegNonveg();});const menuAccordingVegNonveg=()=>{if($("#filter-delivery-item-based-on-food-type").hasClass("active")){populateDeliveryPage(allDeliveryItems,true);}else{populateDeliveryPage(allDeliveryItems);}};$(document).on("click",".add-box-individual-item",(e)=>{e.preventDefault();const id=e.target.id;const{deliveryItemCode,optionCode,optionItemCode,}=splitIdToDeliveryCode(id);const{allowMultiple,threshold,}=extractThresholdAndAllowMultipleDataAttributes(e);const thresholdAndAllowMultipleDataAttributes=`data-id="${id}" ${getThresholdAndAllowMultipleDataAttributes(allowMultiple,threshold)}`;const addDeleteItemHtml=`<div class='number' id="${id}">
                              <span class='minus decrease-box-individual-item' ${thresholdAndAllowMultipleDataAttributes}>-</span>
                              <input type='text' value='1' id="${id}-input" />
                              <span class='plus increase-box-individual-item ${getIncreaseClass(threshold,allowMultiple)}' ${thresholdAndAllowMultipleDataAttributes}>+</span>
                            </div>`;$(e.target).replaceWith(addDeleteItemHtml);if(!addedDeliveryItemsMap.has(deliveryItemCode)){addedDeliveryItemsMap.set(deliveryItemCode,new Map());}
if(!addedDeliveryItemsMap.get(deliveryItemCode).has(optionCode)){addedDeliveryItemsMap.get(deliveryItemCode).set(optionCode,new Map());}
addedDeliveryItemsMap.get(deliveryItemCode).get(optionCode).set(optionItemCode,1);validateAndEnableOrDisableNextButtonAndProgressBar(threshold,deliveryItemCode,optionCode);});$(document).on("click","#box-delivery-items-next",(e)=>{e.preventDefault();const deliveryItemCode=e.target.dataset.id;if(progressBarPercentageMap.get(deliveryItemCode)===100){deliveryHttpRequest(DELIVERY_URL.ADD_TO_CART,DELIVERY_REQUEST_METHODS.POST,new AddToCart(0,deliveryItemCode,1),THUNK_ACTION_TYPES.ADD_TO_CART,true,);}else{const activeList=$(".box-modal-sidebar-list.active");activeList.removeClass("active");const id=activeList[0].id;const optionId=id.substring(0,id.lastIndexOf("-"));const boxItemContainer=$("#"+optionId);boxItemContainer.hide();const nextBoxItemContainer=boxItemContainer.next();nextBoxItemContainer.show();$("#"+nextBoxItemContainer[0].id+"-list").addClass("active");$(e.target).addClass(DELIVERY_PROPS.ANCHOR_DISABLED);}});$(document).on("click",".increase-added-delivery-item, .decrease-added-delivery-item",(e)=>{e.preventDefault();const itemCode=e.target.dataset.itemCode;const cartItem=getCartDetails.get(itemCode);let quantity=parseInt(cartItem.quantity);if($(e.target).hasClass("decrease-added-delivery-item")){quantity--;}else{quantity++;Moengage.track_event("Delivery_Takeaway_Added",{"Catalog_Product_Item_Cart_Selection":quantity,"Mobile_Number":localStorage.getItem('mobile_number'),"Login_Type":localStorage.getItem('email')})}
deliveryHttpRequest(DELIVERY_URL.ADD_TO_CART,DELIVERY_REQUEST_METHODS.POST,new AddToCart(cartItem.item_detail_id,itemCode,quantity),THUNK_ACTION_TYPES.ADD_TO_CART);});$(document).on("click",".decrease-box-individual-item, .increase-box-individual-item",(e)=>{const id=e.target.dataset.id;const{deliveryItemCode,optionCode,optionItemCode,}=splitIdToDeliveryCode(id);const{allowMultiple,threshold,}=extractThresholdAndAllowMultipleDataAttributes(e);const input=$("#"+id+"-input");const value=parseInt(input.val());if($(e.target).hasClass("decrease-box-individual-item")){if(value===1){$(e.target).parent().replaceWith(getCardButtonHtml("Add","add-box-individual-item",id,getThresholdAndAllowMultipleDataAttributes(allowMultiple,threshold)));addedDeliveryItemsMap.get(deliveryItemCode).get(optionCode).delete(optionItemCode);}else{let quantity=value-1;input.val(quantity);addedDeliveryItemsMap.get(deliveryItemCode).get(optionCode).set(optionItemCode,quantity);}
validateAndEnableOrDisableNextButtonAndProgressBar(threshold,deliveryItemCode,optionCode,DELIVERY_PROPS.ITEM_ACTIONS.REMOVE);}else{if(value<threshold){let quantity=value+1;input.val(quantity);addedDeliveryItemsMap.get(deliveryItemCode).get(optionCode).set(optionItemCode,quantity);validateAndEnableOrDisableNextButtonAndProgressBar(threshold,deliveryItemCode,optionCode);}}});$("#smile-point-input-value").change((e)=>{const value=parseInt(e.target.value,10);rebuildLoyaltyPoints(value);});$("#use-smiles-in-delivery, #user-all-smiles-btn").click((e)=>{e.preventDefault();const appliedSmiles=parseInt($("#smile-point-input-value").val(),10);const postData={tender_key:"SMILES",amount:appliedSmiles,sales_sub_type:sales_sub_type_value,};deliveryHttpRequest(DELIVERY_URL.UPDATE_PAYMENT,DELIVERY_REQUEST_METHODS.POST,Object.assign(postData,getCustomerDetails()),THUNK_ACTION_TYPES.GET_CART_DETAILS);});$("#use-smiles-in-delivery").click((e)=>{e.preventDefault();maximumApplicable=getMaximumLoyaltyApplicable();let appliedPoints=parseInt($("#smile-point-input-value").val(),10);if(appliedPoints<maximumApplicable){maximumApplicable=appliedPoints;}
if(DELIVERY_PROPS.DELIVERY_TOTAL<maximumApplicable){maximumApplicable=DELIVERY_PROPS.DELIVERY_TOTAL;}
const appliedSmiles=maximumApplicable;const postData={tender_key:"SMILES",amount:appliedSmiles,sales_sub_type:sales_sub_type_value,};deliveryHttpRequest(DELIVERY_URL.UPDATE_PAYMENT,DELIVERY_REQUEST_METHODS.POST,Object.assign(postData,getCustomerDetails()),THUNK_ACTION_TYPES.GET_CART_DETAILS);});$(document).on("click",".apply-coupons-vouchers-for-delivery",(e)=>{e.preventDefault();var maxCouponAmount=parseInt(e.target.dataset.amount)+parseInt(100);const validCoupon=validateTotal(maxCouponAmount,DELIVERY_PROPS.DELIVERY_TOTAL);const tenderKey=e.target.dataset.tender_key;if(validCoupon){const postData={amount:parseFloat(e.target.dataset.amount,10),tender_key:e.target.dataset.tender_key,barcode:e.target.dataset.barcode,sales_sub_type:sales_sub_type_value,};deliveryHttpRequest(DELIVERY_URL.UPDATE_PAYMENT,DELIVERY_REQUEST_METHODS.POST,Object.assign(postData,getCustomerDetails()),THUNK_ACTION_TYPES.GET_CART_DETAILS);if(tenderKey==="COUPON"&&DELIVERY_PROPS.APPLIED_OFFERS.size){DELIVERY_PROPS.APPLIED_OFFERS.forEach(function(value){removeDiscounts("OFFER",value);DELIVERY_PROPS.APPLIED_OFFERS.delete(value);})
DELIVERY_PROPS.APPLIED_OFFERS.clear();}else if(tenderKey==="OFFER"&&DELIVERY_PROPS.APPLIED_COUPON){removeDiscounts("COUPON",DELIVERY_PROPS.APPLIED_COUPON);DELIVERY_PROPS.APPLIED_COUPON=false;DELIVERY_PROPS.APPLIED_COUPON_CODE=false;}
$("#delivery-coupons-vouchers").hide();$("#delivery-curtain").show();}});function validateTotal(amount,total){if(amount>total){toastr.error('Please add more items to apply this coupon');return false;}
return true;}
$(document).on("click",".delivery-remove-discount",(e)=>{e.preventDefault();deliveryHttpRequest(DELIVERY_URL.REMOVE_PAYMENT,DELIVERY_REQUEST_METHODS.POST,Object.assign(e.target.dataset,getCustomerDetails()),THUNK_ACTION_TYPES.GET_CART_DETAILS,);DELIVERY_PROPS.APPLIED_VOUCHERS=new Set();DELIVERY_PROPS.APPLIED_OFFERS=new Set();DELIVERY_PROPS.APPLIED_COUPON=undefined;DELIVERY_PROPS.APPLIED_COUPON_CODE=undefined;});function removeDiscounts(tenderKey,discountBarcode){const postData={tender_key:tenderKey,barcode:discountBarcode,payment_id:"",};deliveryHttpRequest(DELIVERY_URL.REMOVE_PAYMENT,DELIVERY_REQUEST_METHODS.POST,Object.assign(postData,getCustomerDetails()),THUNK_ACTION_TYPES.GET_CART_DETAILS,);}
$("#delivery-coupons-vouchers-close").click((e)=>{e.preventDefault();$("#delivery-coupons-vouchers").hide();$("#delivery-curtain").show();});$("#send-app-link").click((e)=>{e.preventDefault();var mobile_number=$("#send_app-number").val();if(mobile_number.length>=1&&mobile_number.length<=10){$.ajax({url:'/api/v1/send-app-link',type:'POST',data:JSON.stringify({"mobile_number":mobile_number}),headers:getHeaders(),dataType:"json",success:function(data){window.location.href=data;}});$("#send_app-number").val('');$.alert({title:"SMS Sent",useBootstrap:false,boxWidth:"30%",content:"Please find sms sent to your mobile number",type:"red",});}else{$.alert({title:"Mobile Number Error!",useBootstrap:false,boxWidth:"30%",content:"Please Enter a Valid Mobile Number",type:"red",});}});$(".delivery-show-voucher-coupon").click((e)=>{e.preventDefault();const type=e.target.dataset.type;$("#delivery-curtain").hide();$("#delivery-coupons-vouchers").show();$("#delivery-voucher-coupon-listing").empty();deliveryHttpRequest(DELIVERY_URL.GET_COUPON_VOUCHER,DELIVERY_REQUEST_METHODS.POST,{customer_id:getMobileNumber(),order_id:DELIVERY_PROPS.DELIVERY_ORDER_ID,sales_sub_type:sales_sub_type_value,},THUNK_ACTION_TYPES.GET_COUPON_VOUCHER,false,{type});});var x=document.getElementById("searchInput");function getLocation(){if(navigator.geolocation){navigator.geolocation.getCurrentPosition(showPosition,showError);}
else{x.value="Geolocation is not supported by this browser.";}}
function showPosition(position){lat=position.coords.latitude;lon=position.coords.longitude;DELIVERY_PROPS.DELIVERY_LATITUDE=position.coords.latitude;DELIVERY_PROPS.DELIVERY_LONGITUDE=position.coords.longitude;displayLocation(lat,lon);}
function showError(error){switch(error.code){case error.PERMISSION_DENIED:x.value="User denied the request for Geolocation."
break;case error.POSITION_UNAVAILABLE:x.value="Location information is unavailable."
break;case error.TIMEOUT:x.value="The request to get user location timed out."
break;case error.UNKNOWN_ERROR:x.value="An unknown error occurred."
break;}}
function displayLocation(latitude,longitude){var geocoder;geocoder=new google.maps.Geocoder();var latlng=new google.maps.LatLng(latitude,longitude);geocoder.geocode({'latLng':latlng},function(results,status){if(status==google.maps.GeocoderStatus.OK){if(results[0]){var add=results[0].formatted_address;var value=add.split(",");count=value.length;country=value[count-1];state=value[count-2];city=value[count-3];place=value[count-4];block=value[count-5];vill=value[count-6];add=value[count-7];x.value=vill+block+place+city+country;}
else{x.value="address not found";}}
else{x.value="Geocoder failed due to: "+status;}});}
$(".get__current-location").click((e)=>{e.preventDefault();getLocation()});function deliveryPromSlick(){$('#delivery-promotion').slick({infinite:true,lazyLoad:'ondemand',slidesToShow:4,slidesToScroll:1,responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:3,infinite:true,dots:true}},{breakpoint:600,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1}}]});};function getPromotionImages(){$.ajax({method:'GET',url:DELIVERY_URL.DELIVERY_PROMOTIONS,headers:getHeaders(),beforeSend:function(){loaderStart();},complete:function(){loaderStop();},success(data){if(data.data.length){data.data.forEach(function(value){$('#delivery-promotion').append(`<div class="items"><img src="${value.mobile_promotion.promotion_image}"></div>`);});deliveryPromSlick();}}});};$(document).ready(function(){getPromotionImages();});$(document).on("click","#add-new-delivery-address, #add-cross-btn",(e)=>{e.preventDefault();$(".address-popup-outer").toggle("popup-hidden");});$(document).on("click","#add-cross-btn-select, #selectAddressProceed",(e)=>{e.preventDefault();$(".select-address-popup-outer").addClass("popup-hidden");});var radios=document.getElementsByClassName('add-detials-tag');for(i=0;i<radios.length;i++){radios[i].onclick=function(e){if(e.ctrlKey||e.metaKey){this.checked=false;}}}
$(".delivery__smiles-apply").addClass('hide');$(document).on("click","#user-partial-smiles-btn, #use-smiles-in-delivery",(e)=>{e.preventDefault();if($(".delivery__smiles-apply").hasClass("hide")){$(".delivery__smiles-apply").removeClass('hide');$(".delivery__smiles-apply").addClass('show');}else if($(".delivery__smiles-apply").hasClass("show")){$(".delivery__smiles-apply").removeClass('show');$(".delivery__smiles-apply").addClass('hide');};});$(document).on("click","#user-all-smiles-btn",(e)=>{e.preventDefault();if($(".delivery__smiles-apply").hasClass("show")){$(".delivery__smiles-apply").removeClass('show');$(".delivery__smiles-apply").addClass('hide');};});var renderedCustomSelect=[];function renderCustomSelect(selectElId){let is_alreadyBuild=false;if(renderedCustomSelect.length){for(let i=0;i<renderedCustomSelect.length;i++){if(selectElId===renderedCustomSelect[i]){is_alreadyBuild=true;}}}
if(is_alreadyBuild){return false;}else{renderedCustomSelect.push(selectElId);}
var $this=$(selectElId);var numberOfOptions=$this.children('option').length;$this.addClass('select-hidden');$this.wrap('<div class="select"></div>');$this.after('<div class="select-styled"></div>');var $styledSelect=$this.next('div.select-styled');$styledSelect.text($this.children('option').eq(0).text());var $list=$('<ul />',{'class':'select-options'}).insertAfter($styledSelect);for(var i=0;i<numberOfOptions;i++){$('<li />',{text:$this.children('option').eq(i).text(),rel:$this.children('option').eq(i).val()}).appendTo($list);}
var $listItems=$list.children('li');$styledSelect.click(function(e){e.stopPropagation();$('div.select-styled.active').not(this).each(function(){$(this).removeClass('active').next('ul.select-options').hide();});$(this).toggleClass('active').next('ul.select-options').toggle();});$listItems.click(function(e){e.stopPropagation();$styledSelect.text($(this).text()).removeClass('active');$this.val($(this).attr('rel'));$list.hide();});$(document).click(function(){$styledSelect.removeClass('active');$list.hide();});};$(document).on("click",".not_deliver_popup-btn, .outlet-closs-popup-cross",()=>{$('.outlet-closs-popup').toggle();});var userLocationLat=localStorage.getItem('latitude');var userLocationLong=localStorage.getItem('longitude');var userMobileNumber=localStorage.getItem('mobile_number');var userLoginType=localStorage.getItem('email');$(document).on("click",".download-app-appstore",()=>{let loc=(userLocationLat&&userLocationLong)?(userLocationLat+', '+userLocationLong):userIpAddress;Moengage.track_event("Footer_App_Intsall",{"URL":getCurrentURL,"locataion":loc,"Mobile_Number":localStorage.getItem('mobile_number'),"Login_Type":localStorage.getItem('email')})});$(document).on("click",".download-app-googleplay",()=>{Moengage.track_event("Footer_download_googleplay_app",{"URL":getCurrentURL,"locataion":userLocationLat,userLocationLong,"Mobile_Number":localStorage.getItem('mobile_number'),"Login_Type":localStorage.getItem('email'),})});$(document).on("click",".delivery-takeaway-button",()=>{Moengage.track_event("Home_Delivery_Takeaway",{"Delivery_Takeaway_Click_Count":"Clicked","Mobile_Number":localStorage.getItem('mobile_number'),"Login_Type":localStorage.getItem('email'),})});$(document).on("click","#promotion--banner-booknow",()=>{Moengage.track_event("Home_Delivery_Order_Now",{"Home_Click_Count":"Clicked","Mobile":localStorage.getItem('mobile_number'),"Login_Type":localStorage.getItem('email'),})});if(window.location.href=='https://www.barbequenation.com/'){$(document).on("click",".card--promotion .button--atc",()=>{Moengage.track_event("Home_Happinesscard",{"Home_Click_Count":"Clicked","Mobile_Number":localStorage.getItem('mobile_number'),"Login_Type":localStorage.getItem('email'),})});}
if(window.location.pathname=='/vouchers'){$(document).on("click",".card--promotion .button--atc",()=>{Moengage.track_event("Home_Happinesscard",{"Home_Click_Count":"Clicked","Mobile_Number":localStorage.getItem('mobile_number'),"Login_Type":localStorage.getItem('email'),})});}
$(document).on("click",".card--promotion .increase-item",()=>{Moengage.track_event("Happinesscard_Added",{"Home_Click_Count":"Clicked","Mobile_Number":localStorage.getItem('mobile_number'),"Login_Type":localStorage.getItem('email'),})});$(document).on("click",".card--promotion .increase-item",()=>{Moengage.track_event("Happinesscard_Added",{"Home_Click_Count":"Clicked","Mobile_Number":localStorage.getItem('mobile_number'),"Login_Type":localStorage.getItem('email'),})});$(document).on("click","#delivery-generate-payment",()=>{Moengage.track_event("Delivery_Takeaway_Pay",{"Delivery_Takeaway_Pay":"Clicked","Mobile_Number":localStorage.getItem('mobile_number'),"Login_Type":localStorage.getItem('email')})});$(document).on('keypress','input.select2-search__field',(e)=>{var k=e.keyCode;return((k>64&&k<91)||(k>96&&k<123)||k==8||k==32||(k>=48&&k<=57));});})(jQuery,Drupal,GoogleMaps);;