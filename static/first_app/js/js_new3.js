const pushNotificationTokenUrl='/api/v1/push-notification-tokens';const pushNotificationsUrl='/api/v1/push-notifications';const pushNotificationsCountUrl=`${pushNotificationsUrl}/count`;const DELETE_TOKEN='DELETE_TOKEN';const CREATE_TOKEN='CREATE_TOKEN';const NOTIFICATION_COUNT='NOTIFICATION_COUNT';const POPULATE_NOTIFICATIONS='POPULATE_NOTIFICATIONS';const DELETE_NOTIFICATION='DELETE_NOTIFICATION';(function($){window.onload=()=>{$(()=>{const isUserIdDefined=setInterval(()=>{if(userId!=='undefined'){clearInterval(isUserIdDefined);fcm();}},100);});}
function fcm(){var firebaseConfig={apiKey:"AIzaSyADLdDX3OEdmklM9KktYtyjZ__awKGHx24",authDomain:"barbeque-nation-d7c0e.firebaseapp.com",databaseURL:"https://barbeque-nation-d7c0e.firebaseio.com",projectId:"barbeque-nation-d7c0e",storageBucket:"barbeque-nation-d7c0e.appspot.com",messagingSenderId:"155650652337",appId:"1:155650652337:web:bd7e6d165a91ef93078a90"};function setTokenSentToServer(status){localStorage.setItem('tokenSentToServer',status);}
function isTokenSentToServer(){if(localStorage.getItem('tokenIsAnonymous')&&!isAnonymous()){localStorage.removeItem('tokenIsAnonymous');return false;}else{return JSON.parse(window.localStorage.getItem('tokenSentToServer'));}}
function saveTokenInLocal(token){localStorage.setItem('fcmToken',token);}
function deleteLocalToken(){localStorage.removeItem('fcmToken');}
function getLocalToken(){return localStorage.getItem('fcmToken');}
function sendTokenToServer(currentToken){if(!isTokenSentToServer()){if(currentToken){notificationHttpRequest(pushNotificationTokenUrl,'POST',new PushNotificationToken(currentToken),CREATE_TOKEN);}}}
function deleteCurrentToken(){const token=getLocalToken();if(token){notificationHttpRequest(pushNotificationTokenUrl,'DELETE',new PushNotificationToken(token),DELETE_TOKEN);}}
$(document).on('click','.logout',(e)=>{localStorage.setItem('tokenIsAnonymous',true);deleteCurrentToken();Moengage.destroy_session();});$('.notifications').click(function(e){e.preventDefault();notificationHttpRequest(pushNotificationsUrl,'GET',undefined,POPULATE_NOTIFICATIONS);$('.notifications-snackbar').addClass('notifications-snackbar-active');$('.notifications-snackbar').fadeToggle();});function populateNotifications(notifications){const count=notifications.length;let notificationHtml='';if(count>0){notifications.forEach((notification)=>{notificationHtml+=getNotificationHtml(notification);});$('#notifications-count').text(count);$('#notification-content').html(notificationHtml);}}
function getNotificationHtml(notification){const img=notification.image?notification.image:notification.icon;return `<a href="${getNotificationUrl(notification.notification_event,notification.entity_id)}" id="${notification.id}" class="row align-center notification-item">
                <div class="notifications-image"><img src="${img}" alt="image"/></div>
                <div class="notifications-content">
                  <div class="notifications-title">${notification.title}</div>
                  <div class="notifications-text">${notification.body}</div>
                </div>
              </a>`}
$(document).on('click','.notification-item',(e)=>{e.preventDefault();const anchor=$(e.target).closest('a');const id=parseInt(anchor.attr('id'),10);const url=anchor.attr('href');notificationHttpRequest(`${pushNotificationsUrl}/${id}`,'DELETE',undefined,DELETE_NOTIFICATION,url);});function getNotificationUrl(type,entityId){if(type==='voucher'){return `/product/${entityId}`;}else if(type==='booking'){return '/profile#reservations';}else if(type==='loyalty'){return '/profile#smiles';}else{return `/node/${entityId}`;}}
$('.notifications-close').click(function(e){e.preventDefault();$('.notifications-snackbar').removeClass('notifications-snackbar-active');$('.notifications-snackbar').fadeOut();});if(!firebase.apps.length){firebase.initializeApp(firebaseConfig);const messaging=firebase.messaging();messaging.requestPermission().then(function(){messaging.getToken().then(function(token){sendTokenToServer(token);});}).catch(function(err){});messaging.onMessage(function(payload){if(payload.notification){const title=payload.notification.title;const options={body:payload.notification.body,icon:payload.notification.icon,};if(!("Notification"in window)){}else if(Notification.permission==="granted"){var notification=new Notification(title,options);notification.onclick=function(e){e.preventDefault();window.open(payload.fcmOptions.link);notification.close();};}}});messaging.onTokenRefresh(function(){messaging.getToken().then(function(newToken){if(getLocalToken()!==newToken){deleteCurrentToken();sendTokenToServer(newToken);}})});}
function loaderStop(){$('.fakeLoader').removeClass('display-block');$('.fakeLoader').addClass('hide');}
function loaderStart(){$('.fakeLoader').removeClass('hide');$('.fakeLoader').addClass('display-block');}
function notificationHttpRequest(url,method='GET',data,type,options){$.ajax({dataType:'json',url,async:!(type===DELETE_TOKEN||CREATE_TOKEN),headers:getHeaders(),beforeSend:function(){loaderStart();},complete:function(){loaderStop();},method:method,data:data?JSON.stringify(data):undefined,success(successData){if(type===DELETE_TOKEN){setTokenSentToServer(false);deleteLocalToken();}
if(type===CREATE_TOKEN){setTokenSentToServer(true);saveTokenInLocal(data.token);}
if(type===POPULATE_NOTIFICATIONS){populateNotifications(successData);}
if(type===DELETE_NOTIFICATION){window.location.href=options;}}});}}})(jQuery);class PushNotificationToken{constructor(token){this.token=token;this.device_type='WEB';}};/*!Select2 4.0.13 | https://github.com/select2/select2/blob/master/LICENSE.md*/!function(n){"function"==typeof define&&define.amd?define(["jquery"],n):"object"==typeof module&&module.exports?module.exports=function(e,t){return void 0===t&&(t="undefined"!=typeof window?require("jquery"):require("jquery")(e)),n(t),t}:n(jQuery)}(function(u){var e=function(){if(u&&u.fn&&u.fn.select2&&u.fn.select2.amd)var e=u.fn.select2.amd;var t,n,r,h,o,s,f,g,m,v,y,_,i,a,b;function w(e,t){return i.call(e,t)}function l(e,t){var n,r,i,o,s,a,l,c,u,d,p,h=t&&t.split("/"),f=y.map,g=f&&f["*"]||{};if(e){for(s=(e=e.split("/")).length-1,y.nodeIdCompat&&b.test(e[s])&&(e[s]=e[s].replace(b,"")),"."===e[0].charAt(0)&&h&&(e=h.slice(0,h.length-1).concat(e)),u=0;u<e.length;u++)if("."===(p=e[u]))e.splice(u,1),--u;else if(".."===p){if(0===u||1===u&&".."===e[2]||".."===e[u-1])continue;0<u&&(e.splice(u-1,2),u-=2)}e=e.join("/")}if((h||g)&&f){for(u=(n=e.split("/")).length;0<u;--u){if(r=n.slice(0,u).join("/"),h)for(d=h.length;0<d;--d)if(i=(i=f[h.slice(0,d).join("/")])&&i[r]){o=i,a=u;break}if(o)break;!l&&g&&g[r]&&(l=g[r],c=u)}!o&&l&&(o=l,a=c),o&&(n.splice(0,a,o),e=n.join("/"))}return e}function A(t,n){return function(){var e=a.call(arguments,0);return"string"!=typeof e[0]&&1===e.length&&e.push(null),s.apply(h,e.concat([t,n]))}}function x(t){return function(e){m[t]=e}}function D(e){if(w(v,e)){var t=v[e];delete v[e],_[e]=!0,o.apply(h,t)}if(!w(m,e)&&!w(_,e))throw new Error("No "+e);return m[e]}function c(e){var t,n=e?e.indexOf("!"):-1;return-1<n&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function S(e){return e?c(e):[]}return e&&e.requirejs||(e?n=e:e={},m={},v={},y={},_={},i=Object.prototype.hasOwnProperty,a=[].slice,b=/\.js$/,f=function(e,t){var n,r,i=c(e),o=i[0],s=t[1];return e=i[1],o&&(n=D(o=l(o,s))),o?e=n&&n.normalize?n.normalize(e,(r=s,function(e){return l(e,r)})):l(e,s):(o=(i=c(e=l(e,s)))[0],e=i[1],o&&(n=D(o))),{f:o?o+"!"+e:e,n:e,pr:o,p:n}},g={require:function(e){return A(e)},exports:function(e){var t=m[e];return void 0!==t?t:m[e]={}},module:function(e){return{id:e,uri:"",exports:m[e],config:(t=e,function(){return y&&y.config&&y.config[t]||{}})};var t}},o=function(e,t,n,r){var i,o,s,a,l,c,u,d=[],p=typeof n;if(c=S(r=r||e),"undefined"==p||"function"==p){for(t=!t.length&&n.length?["require","exports","module"]:t,l=0;l<t.length;l+=1)if("require"===(o=(a=f(t[l],c)).f))d[l]=g.require(e);else if("exports"===o)d[l]=g.exports(e),u=!0;else if("module"===o)i=d[l]=g.module(e);else if(w(m,o)||w(v,o)||w(_,o))d[l]=D(o);else{if(!a.p)throw new Error(e+" missing "+o);a.p.load(a.n,A(r,!0),x(o),{}),d[l]=m[o]}s=n?n.apply(m[e],d):void 0,e&&(i&&i.exports!==h&&i.exports!==m[e]?m[e]=i.exports:s===h&&u||(m[e]=s))}else e&&(m[e]=n)},t=n=s=function(e,t,n,r,i){if("string"==typeof e)return g[e]?g[e](t):D(f(e,S(t)).f);if(!e.splice){if((y=e).deps&&s(y.deps,y.callback),!t)return;t.splice?(e=t,t=n,n=null):e=h}return t=t||function(){},"function"==typeof n&&(n=r,r=i),r?o(h,e,t,n):setTimeout(function(){o(h,e,t,n)},4),s},s.config=function(e){return s(e)},t._defined=m,(r=function(e,t,n){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");t.splice||(n=t,t=[]),w(m,e)||w(v,e)||(v[e]=[e,t,n])}).amd={jQuery:!0},e.requirejs=t,e.require=n,e.define=r),e.define("almond",function(){}),e.define("jquery",[],function(){var e=u||$;return null==e&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),e}),e.define("select2/utils",["jquery"],function(o){var i={};function u(e){var t=e.prototype,n=[];for(var r in t){"function"==typeof t[r]&&"constructor"!==r&&n.push(r)}return n}i.Extend=function(e,t){var n={}.hasOwnProperty;function r(){this.constructor=e}for(var i in t)n.call(t,i)&&(e[i]=t[i]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},i.Decorate=function(r,i){var e=u(i),t=u(r);function o(){var e=Array.prototype.unshift,t=i.prototype.constructor.length,n=r.prototype.constructor;0<t&&(e.call(arguments,r.prototype.constructor),n=i.prototype.constructor),n.apply(this,arguments)}i.displayName=r.displayName,o.prototype=new function(){this.constructor=o};for(var n=0;n<t.length;n++){var s=t[n];o.prototype[s]=r.prototype[s]}function a(e){var t=function(){};e in o.prototype&&(t=o.prototype[e]);var n=i.prototype[e];return function(){return Array.prototype.unshift.call(arguments,t),n.apply(this,arguments)}}for(var l=0;l<e.length;l++){var c=e[l];o.prototype[c]=a(c)}return o};function e(){this.listeners={}}e.prototype.on=function(e,t){this.listeners=this.listeners||{},e in this.listeners?this.listeners[e].push(t):this.listeners[e]=[t]},e.prototype.trigger=function(e){var t=Array.prototype.slice,n=t.call(arguments,1);this.listeners=this.listeners||{},null==n&&(n=[]),0===n.length&&n.push({}),(n[0]._type=e)in this.listeners&&this.invoke(this.listeners[e],t.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},e.prototype.invoke=function(e,t){for(var n=0,r=e.length;n<r;n++)e[n].apply(this,t)},i.Observable=e,i.generateChars=function(e){for(var t="",n=0;n<e;n++){t+=Math.floor(36*Math.random()).toString(36)}return t},i.bind=function(e,t){return function(){e.apply(t,arguments)}},i._convertData=function(e){for(var t in e){var n=t.split("-"),r=e;if(1!==n.length){for(var i=0;i<n.length;i++){var o=n[i];(o=o.substring(0,1).toLowerCase()+o.substring(1))in r||(r[o]={}),i==n.length-1&&(r[o]=e[t]),r=r[o]}delete e[t]}}return e},i.hasScroll=function(e,t){var n=o(t),r=t.style.overflowX,i=t.style.overflowY;return(r!==i||"hidden"!==i&&"visible"!==i)&&("scroll"===r||"scroll"===i||(n.innerHeight()<t.scrollHeight||n.innerWidth()<t.scrollWidth))},i.escapeMarkup=function(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof e?e:String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})},i.appendMany=function(e,t){if("1.7"===o.fn.jquery.substr(0,3)){var n=o();o.map(t,function(e){n=n.add(e)}),t=n}e.append(t)},i.__cache={};var n=0;return i.GetUniqueElementId=function(e){var t=e.getAttribute("data-select2-id");return null==t&&(e.id?(t=e.id,e.setAttribute("data-select2-id",t)):(e.setAttribute("data-select2-id",++n),t=n.toString())),t},i.StoreData=function(e,t,n){var r=i.GetUniqueElementId(e);i.__cache[r]||(i.__cache[r]={}),i.__cache[r][t]=n},i.GetData=function(e,t){var n=i.GetUniqueElementId(e);return t?i.__cache[n]&&null!=i.__cache[n][t]?i.__cache[n][t]:o(e).data(t):i.__cache[n]},i.RemoveData=function(e){var t=i.GetUniqueElementId(e);null!=i.__cache[t]&&delete i.__cache[t],e.removeAttribute("data-select2-id")},i}),e.define("select2/results",["jquery","./utils"],function(h,f){function r(e,t,n){this.$element=e,this.data=n,this.options=t,r.__super__.constructor.call(this)}return f.Extend(r,f.Observable),r.prototype.render=function(){var e=h('<ul class="select2-results__options" role="listbox"></ul>');return this.options.get("multiple")&&e.attr("aria-multiselectable","true"),this.$results=e},r.prototype.clear=function(){this.$results.empty()},r.prototype.displayMessage=function(e){var t=this.options.get("escapeMarkup");this.clear(),this.hideLoading();var n=h('<li role="alert" aria-live="assertive" class="select2-results__option"></li>'),r=this.options.get("translations").get(e.message);n.append(t(r(e.args))),n[0].className+=" select2-results__message",this.$results.append(n)},r.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()},r.prototype.append=function(e){this.hideLoading();var t=[];if(null!=e.results&&0!==e.results.length){e.results=this.sort(e.results);for(var n=0;n<e.results.length;n++){var r=e.results[n],i=this.option(r);t.push(i)}this.$results.append(t)}else 0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"})},r.prototype.position=function(e,t){t.find(".select2-results").append(e)},r.prototype.sort=function(e){return this.options.get("sorter")(e)},r.prototype.highlightFirstItem=function(){var e=this.$results.find(".select2-results__option[aria-selected]"),t=e.filter("[aria-selected=true]");0<t.length?t.first().trigger("mouseenter"):e.first().trigger("mouseenter"),this.ensureHighlightVisible()},r.prototype.setClasses=function(){var t=this;this.data.current(function(e){var r=h.map(e,function(e){return e.id.toString()});t.$results.find(".select2-results__option[aria-selected]").each(function(){var e=h(this),t=f.GetData(this,"data"),n=""+t.id;null!=t.element&&t.element.selected||null==t.element&&-1<h.inArray(n,r)?e.attr("aria-selected","true"):e.attr("aria-selected","false")})})},r.prototype.showLoading=function(e){this.hideLoading();var t={disabled:!0,loading:!0,text:this.options.get("translations").get("searching")(e)},n=this.option(t);n.className+=" loading-results",this.$results.prepend(n)},r.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},r.prototype.option=function(e){var t=document.createElement("li");t.className="select2-results__option";var n={role:"option","aria-selected":"false"},r=window.Element.prototype.matches||window.Element.prototype.msMatchesSelector||window.Element.prototype.webkitMatchesSelector;for(var i in(null!=e.element&&r.call(e.element,":disabled")||null==e.element&&e.disabled)&&(delete n["aria-selected"],n["aria-disabled"]="true"),null==e.id&&delete n["aria-selected"],null!=e._resultId&&(t.id=e._resultId),e.title&&(t.title=e.title),e.children&&(n.role="group",n["aria-label"]=e.text,delete n["aria-selected"]),n){var o=n[i];t.setAttribute(i,o)}if(e.children){var s=h(t),a=document.createElement("strong");a.className="select2-results__group";h(a);this.template(e,a);for(var l=[],c=0;c<e.children.length;c++){var u=e.children[c],d=this.option(u);l.push(d)}var p=h("<ul></ul>",{class:"select2-results__options select2-results__options--nested"});p.append(l),s.append(a),s.append(p)}else this.template(e,t);return f.StoreData(t,"data",e),t},r.prototype.bind=function(t,e){var l=this,n=t.id+"-results";this.$results.attr("id",n),t.on("results:all",function(e){l.clear(),l.append(e.data),t.isOpen()&&(l.setClasses(),l.highlightFirstItem())}),t.on("results:append",function(e){l.append(e.data),t.isOpen()&&l.setClasses()}),t.on("query",function(e){l.hideMessages(),l.showLoading(e)}),t.on("select",function(){t.isOpen()&&(l.setClasses(),l.options.get("scrollAfterSelect")&&l.highlightFirstItem())}),t.on("unselect",function(){t.isOpen()&&(l.setClasses(),l.options.get("scrollAfterSelect")&&l.highlightFirstItem())}),t.on("open",function(){l.$results.attr("aria-expanded","true"),l.$results.attr("aria-hidden","false"),l.setClasses(),l.ensureHighlightVisible()}),t.on("close",function(){l.$results.attr("aria-expanded","false"),l.$results.attr("aria-hidden","true"),l.$results.removeAttr("aria-activedescendant")}),t.on("results:toggle",function(){var e=l.getHighlightedResults();0!==e.length&&e.trigger("mouseup")}),t.on("results:select",function(){var e=l.getHighlightedResults();if(0!==e.length){var t=f.GetData(e[0],"data");"true"==e.attr("aria-selected")?l.trigger("close",{}):l.trigger("select",{data:t})}}),t.on("results:previous",function(){var e=l.getHighlightedResults(),t=l.$results.find("[aria-selected]"),n=t.index(e);if(!(n<=0)){var r=n-1;0===e.length&&(r=0);var i=t.eq(r);i.trigger("mouseenter");var o=l.$results.offset().top,s=i.offset().top,a=l.$results.scrollTop()+(s-o);0===r?l.$results.scrollTop(0):s-o<0&&l.$results.scrollTop(a)}}),t.on("results:next",function(){var e=l.getHighlightedResults(),t=l.$results.find("[aria-selected]"),n=t.index(e)+1;if(!(n>=t.length)){var r=t.eq(n);r.trigger("mouseenter");var i=l.$results.offset().top+l.$results.outerHeight(!1),o=r.offset().top+r.outerHeight(!1),s=l.$results.scrollTop()+o-i;0===n?l.$results.scrollTop(0):i<o&&l.$results.scrollTop(s)}}),t.on("results:focus",function(e){e.element.addClass("select2-results__option--highlighted")}),t.on("results:message",function(e){l.displayMessage(e)}),h.fn.mousewheel&&this.$results.on("mousewheel",function(e){var t=l.$results.scrollTop(),n=l.$results.get(0).scrollHeight-t+e.deltaY,r=0<e.deltaY&&t-e.deltaY<=0,i=e.deltaY<0&&n<=l.$results.height();r?(l.$results.scrollTop(0),e.preventDefault(),e.stopPropagation()):i&&(l.$results.scrollTop(l.$results.get(0).scrollHeight-l.$results.height()),e.preventDefault(),e.stopPropagation())}),this.$results.on("mouseup",".select2-results__option[aria-selected]",function(e){var t=h(this),n=f.GetData(this,"data");"true"!==t.attr("aria-selected")?l.trigger("select",{originalEvent:e,data:n}):l.options.get("multiple")?l.trigger("unselect",{originalEvent:e,data:n}):l.trigger("close",{})}),this.$results.on("mouseenter",".select2-results__option[aria-selected]",function(e){var t=f.GetData(this,"data");l.getHighlightedResults().removeClass("select2-results__option--highlighted"),l.trigger("results:focus",{data:t,element:h(this)})})},r.prototype.getHighlightedResults=function(){return this.$results.find(".select2-results__option--highlighted")},r.prototype.destroy=function(){this.$results.remove()},r.prototype.ensureHighlightVisible=function(){var e=this.getHighlightedResults();if(0!==e.length){var t=this.$results.find("[aria-selected]").index(e),n=this.$results.offset().top,r=e.offset().top,i=this.$results.scrollTop()+(r-n),o=r-n;i-=2*e.outerHeight(!1),t<=2?this.$results.scrollTop(0):(o>this.$results.outerHeight()||o<0)&&this.$results.scrollTop(i)}},r.prototype.template=function(e,t){var n=this.options.get("templateResult"),r=this.options.get("escapeMarkup"),i=n(e,t);null==i?t.style.display="none":"string"==typeof i?t.innerHTML=r(i):h(t).append(i)},r}),e.define("select2/keys",[],function(){return{BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46}}),e.define("select2/selection/base",["jquery","../utils","../keys"],function(n,r,i){function o(e,t){this.$element=e,this.options=t,o.__super__.constructor.call(this)}return r.Extend(o,r.Observable),o.prototype.render=function(){var e=n('<span class="select2-selection" role="combobox"  aria-haspopup="true" aria-expanded="false"></span>');return this._tabindex=0,null!=r.GetData(this.$element[0],"old-tabindex")?this._tabindex=r.GetData(this.$element[0],"old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),e.attr("title",this.$element.attr("title")),e.attr("tabindex",this._tabindex),e.attr("aria-disabled","false"),this.$selection=e},o.prototype.bind=function(e,t){var n=this,r=e.id+"-results";this.container=e,this.$selection.on("focus",function(e){n.trigger("focus",e)}),this.$selection.on("blur",function(e){n._handleBlur(e)}),this.$selection.on("keydown",function(e){n.trigger("keypress",e),e.which===i.SPACE&&e.preventDefault()}),e.on("results:focus",function(e){n.$selection.attr("aria-activedescendant",e.data._resultId)}),e.on("selection:update",function(e){n.update(e.data)}),e.on("open",function(){n.$selection.attr("aria-expanded","true"),n.$selection.attr("aria-owns",r),n._attachCloseHandler(e)}),e.on("close",function(){n.$selection.attr("aria-expanded","false"),n.$selection.removeAttr("aria-activedescendant"),n.$selection.removeAttr("aria-owns"),n.$selection.trigger("focus"),n._detachCloseHandler(e)}),e.on("enable",function(){n.$selection.attr("tabindex",n._tabindex),n.$selection.attr("aria-disabled","false")}),e.on("disable",function(){n.$selection.attr("tabindex","-1"),n.$selection.attr("aria-disabled","true")})},o.prototype._handleBlur=function(e){var t=this;window.setTimeout(function(){document.activeElement==t.$selection[0]||n.contains(t.$selection[0],document.activeElement)||t.trigger("blur",e)},1)},o.prototype._attachCloseHandler=function(e){n(document.body).on("mousedown.select2."+e.id,function(e){var t=n(e.target).closest(".select2");n(".select2.select2-container--open").each(function(){this!=t[0]&&r.GetData(this,"element").select2("close")})})},o.prototype._detachCloseHandler=function(e){n(document.body).off("mousedown.select2."+e.id)},o.prototype.position=function(e,t){t.find(".selection").append(e)},o.prototype.destroy=function(){this._detachCloseHandler(this.container)},o.prototype.update=function(e){throw new Error("The `update` method must be defined in child classes.")},o.prototype.isEnabled=function(){return!this.isDisabled()},o.prototype.isDisabled=function(){return this.options.get("disabled")},o}),e.define("select2/selection/single",["jquery","./base","../utils","../keys"],function(e,t,n,r){function i(){i.__super__.constructor.apply(this,arguments)}return n.Extend(i,t),i.prototype.render=function(){var e=i.__super__.render.call(this);return e.addClass("select2-selection--single"),e.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),e},i.prototype.bind=function(t,e){var n=this;i.__super__.bind.apply(this,arguments);var r=t.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",r).attr("role","textbox").attr("aria-readonly","true"),this.$selection.attr("aria-labelledby",r),this.$selection.on("mousedown",function(e){1===e.which&&n.trigger("toggle",{originalEvent:e})}),this.$selection.on("focus",function(e){}),this.$selection.on("blur",function(e){}),t.on("focus",function(e){t.isOpen()||n.$selection.trigger("focus")})},i.prototype.clear=function(){var e=this.$selection.find(".select2-selection__rendered");e.empty(),e.removeAttr("title")},i.prototype.display=function(e,t){var n=this.options.get("templateSelection");return this.options.get("escapeMarkup")(n(e,t))},i.prototype.selectionContainer=function(){return e("<span></span>")},i.prototype.update=function(e){if(0!==e.length){var t=e[0],n=this.$selection.find(".select2-selection__rendered"),r=this.display(t,n);n.empty().append(r);var i=t.title||t.text;i?n.attr("title",i):n.removeAttr("title")}else this.clear()},i}),e.define("select2/selection/multiple",["jquery","./base","../utils"],function(i,e,l){function n(e,t){n.__super__.constructor.apply(this,arguments)}return l.Extend(n,e),n.prototype.render=function(){var e=n.__super__.render.call(this);return e.addClass("select2-selection--multiple"),e.html('<ul class="select2-selection__rendered"></ul>'),e},n.prototype.bind=function(e,t){var r=this;n.__super__.bind.apply(this,arguments),this.$selection.on("click",function(e){r.trigger("toggle",{originalEvent:e})}),this.$selection.on("click",".select2-selection__choice__remove",function(e){if(!r.isDisabled()){var t=i(this).parent(),n=l.GetData(t[0],"data");r.trigger("unselect",{originalEvent:e,data:n})}})},n.prototype.clear=function(){var e=this.$selection.find(".select2-selection__rendered");e.empty(),e.removeAttr("title")},n.prototype.display=function(e,t){var n=this.options.get("templateSelection");return this.options.get("escapeMarkup")(n(e,t))},n.prototype.selectionContainer=function(){return i('<li class="select2-selection__choice"><span class="select2-selection__choice__remove" role="presentation">&times;</span></li>')},n.prototype.update=function(e){if(this.clear(),0!==e.length){for(var t=[],n=0;n<e.length;n++){var r=e[n],i=this.selectionContainer(),o=this.display(r,i);i.append(o);var s=r.title||r.text;s&&i.attr("title",s),l.StoreData(i[0],"data",r),t.push(i)}var a=this.$selection.find(".select2-selection__rendered");l.appendMany(a,t)}},n}),e.define("select2/selection/placeholder",["../utils"],function(e){function t(e,t,n){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),e.call(this,t,n)}return t.prototype.normalizePlaceholder=function(e,t){return"string"==typeof t&&(t={id:"",text:t}),t},t.prototype.createPlaceholder=function(e,t){var n=this.selectionContainer();return n.html(this.display(t)),n.addClass("select2-selection__placeholder").removeClass("select2-selection__choice"),n},t.prototype.update=function(e,t){var n=1==t.length&&t[0].id!=this.placeholder.id;if(1<t.length||n)return e.call(this,t);this.clear();var r=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(r)},t}),e.define("select2/selection/allowClear",["jquery","../keys","../utils"],function(i,r,a){function e(){}return e.prototype.bind=function(e,t,n){var r=this;e.call(this,t,n),null==this.placeholder&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option."),this.$selection.on("mousedown",".select2-selection__clear",function(e){r._handleClear(e)}),t.on("keypress",function(e){r._handleKeyboardClear(e,t)})},e.prototype._handleClear=function(e,t){if(!this.isDisabled()){var n=this.$selection.find(".select2-selection__clear");if(0!==n.length){t.stopPropagation();var r=a.GetData(n[0],"data"),i=this.$element.val();this.$element.val(this.placeholder.id);var o={data:r};if(this.trigger("clear",o),o.prevented)this.$element.val(i);else{for(var s=0;s<r.length;s++)if(o={data:r[s]},this.trigger("unselect",o),o.prevented)return void this.$element.val(i);this.$element.trigger("input").trigger("change"),this.trigger("toggle",{})}}}},e.prototype._handleKeyboardClear=function(e,t,n){n.isOpen()||t.which!=r.DELETE&&t.which!=r.BACKSPACE||this._handleClear(t)},e.prototype.update=function(e,t){if(e.call(this,t),!(0<this.$selection.find(".select2-selection__placeholder").length||0===t.length)){var n=this.options.get("translations").get("removeAllItems"),r=i('<span class="select2-selection__clear" title="'+n()+'">&times;</span>');a.StoreData(r[0],"data",t),this.$selection.find(".select2-selection__rendered").prepend(r)}},e}),e.define("select2/selection/search",["jquery","../utils","../keys"],function(r,a,l){function e(e,t,n){e.call(this,t,n)}return e.prototype.render=function(e){var t=r('<li class="select2-search select2-search--inline"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" role="searchbox" aria-autocomplete="list" /></li>');this.$searchContainer=t,this.$search=t.find("input");var n=e.call(this);return this._transferTabIndex(),n},e.prototype.bind=function(e,t,n){var r=this,i=t.id+"-results";e.call(this,t,n),t.on("open",function(){r.$search.attr("aria-controls",i),r.$search.trigger("focus")}),t.on("close",function(){r.$search.val(""),r.$search.removeAttr("aria-controls"),r.$search.removeAttr("aria-activedescendant"),r.$search.trigger("focus")}),t.on("enable",function(){r.$search.prop("disabled",!1),r._transferTabIndex()}),t.on("disable",function(){r.$search.prop("disabled",!0)}),t.on("focus",function(e){r.$search.trigger("focus")}),t.on("results:focus",function(e){e.data._resultId?r.$search.attr("aria-activedescendant",e.data._resultId):r.$search.removeAttr("aria-activedescendant")}),this.$selection.on("focusin",".select2-search--inline",function(e){r.trigger("focus",e)}),this.$selection.on("focusout",".select2-search--inline",function(e){r._handleBlur(e)}),this.$selection.on("keydown",".select2-search--inline",function(e){if(e.stopPropagation(),r.trigger("keypress",e),r._keyUpPrevented=e.isDefaultPrevented(),e.which===l.BACKSPACE&&""===r.$search.val()){var t=r.$searchContainer.prev(".select2-selection__choice");if(0<t.length){var n=a.GetData(t[0],"data");r.searchRemoveChoice(n),e.preventDefault()}}}),this.$selection.on("click",".select2-search--inline",function(e){r.$search.val()&&e.stopPropagation()});var o=document.documentMode,s=o&&o<=11;this.$selection.on("input.searchcheck",".select2-search--inline",function(e){s?r.$selection.off("input.search input.searchcheck"):r.$selection.off("keyup.search")}),this.$selection.on("keyup.search input.search",".select2-search--inline",function(e){if(s&&"input"===e.type)r.$selection.off("input.search input.searchcheck");else{var t=e.which;t!=l.SHIFT&&t!=l.CTRL&&t!=l.ALT&&t!=l.TAB&&r.handleSearch(e)}})},e.prototype._transferTabIndex=function(e){this.$search.attr("tabindex",this.$selection.attr("tabindex")),this.$selection.attr("tabindex","-1")},e.prototype.createPlaceholder=function(e,t){this.$search.attr("placeholder",t.text)},e.prototype.update=function(e,t){var n=this.$search[0]==document.activeElement;this.$search.attr("placeholder",""),e.call(this,t),this.$selection.find(".select2-selection__rendered").append(this.$searchContainer),this.resizeSearch(),n&&this.$search.trigger("focus")},e.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var e=this.$search.val();this.trigger("query",{term:e})}this._keyUpPrevented=!1},e.prototype.searchRemoveChoice=function(e,t){this.trigger("unselect",{data:t}),this.$search.val(t.text),this.handleSearch()},e.prototype.resizeSearch=function(){this.$search.css("width","25px");var e="";""!==this.$search.attr("placeholder")?e=this.$selection.find(".select2-selection__rendered").width():e=.75*(this.$search.val().length+1)+"em";this.$search.css("width",e)},e}),e.define("select2/selection/eventRelay",["jquery"],function(s){function e(){}return e.prototype.bind=function(e,t,n){var r=this,i=["open","opening","close","closing","select","selecting","unselect","unselecting","clear","clearing"],o=["opening","closing","selecting","unselecting","clearing"];e.call(this,t,n),t.on("*",function(e,t){if(-1!==s.inArray(e,i)){t=t||{};var n=s.Event("select2:"+e,{params:t});r.$element.trigger(n),-1!==s.inArray(e,o)&&(t.prevented=n.isDefaultPrevented())}})},e}),e.define("select2/translation",["jquery","require"],function(t,n){function r(e){this.dict=e||{}}return r.prototype.all=function(){return this.dict},r.prototype.get=function(e){return this.dict[e]},r.prototype.extend=function(e){this.dict=t.extend({},e.all(),this.dict)},r._cache={},r.loadPath=function(e){if(!(e in r._cache)){var t=n(e);r._cache[e]=t}return new r(r._cache[e])},r}),e.define("select2/diacritics",[],function(){return{"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Œ":"OE","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","œ":"oe","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z","Ά":"Α","Έ":"Ε","Ή":"Η","Ί":"Ι","Ϊ":"Ι","Ό":"Ο","Ύ":"Υ","Ϋ":"Υ","Ώ":"Ω","ά":"α","έ":"ε","ή":"η","ί":"ι","ϊ":"ι","ΐ":"ι","ό":"ο","ύ":"υ","ϋ":"υ","ΰ":"υ","ώ":"ω","ς":"σ","’":"'"}}),e.define("select2/data/base",["../utils"],function(r){function n(e,t){n.__super__.constructor.call(this)}return r.Extend(n,r.Observable),n.prototype.current=function(e){throw new Error("The `current` method must be defined in child classes.")},n.prototype.query=function(e,t){throw new Error("The `query` method must be defined in child classes.")},n.prototype.bind=function(e,t){},n.prototype.destroy=function(){},n.prototype.generateResultId=function(e,t){var n=e.id+"-result-";return n+=r.generateChars(4),null!=t.id?n+="-"+t.id.toString():n+="-"+r.generateChars(4),n},n}),e.define("select2/data/select",["./base","../utils","jquery"],function(e,a,l){function n(e,t){this.$element=e,this.options=t,n.__super__.constructor.call(this)}return a.Extend(n,e),n.prototype.current=function(e){var n=[],r=this;this.$element.find(":selected").each(function(){var e=l(this),t=r.item(e);n.push(t)}),e(n)},n.prototype.select=function(i){var o=this;if(i.selected=!0,l(i.element).is("option"))return i.element.selected=!0,void this.$element.trigger("input").trigger("change");if(this.$element.prop("multiple"))this.current(function(e){var t=[];(i=[i]).push.apply(i,e);for(var n=0;n<i.length;n++){var r=i[n].id;-1===l.inArray(r,t)&&t.push(r)}o.$element.val(t),o.$element.trigger("input").trigger("change")});else{var e=i.id;this.$element.val(e),this.$element.trigger("input").trigger("change")}},n.prototype.unselect=function(i){var o=this;if(this.$element.prop("multiple")){if(i.selected=!1,l(i.element).is("option"))return i.element.selected=!1,void this.$element.trigger("input").trigger("change");this.current(function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n].id;r!==i.id&&-1===l.inArray(r,t)&&t.push(r)}o.$element.val(t),o.$element.trigger("input").trigger("change")})}},n.prototype.bind=function(e,t){var n=this;(this.container=e).on("select",function(e){n.select(e.data)}),e.on("unselect",function(e){n.unselect(e.data)})},n.prototype.destroy=function(){this.$element.find("*").each(function(){a.RemoveData(this)})},n.prototype.query=function(r,e){var i=[],o=this;this.$element.children().each(function(){var e=l(this);if(e.is("option")||e.is("optgroup")){var t=o.item(e),n=o.matches(r,t);null!==n&&i.push(n)}}),e({results:i})},n.prototype.addOptions=function(e){a.appendMany(this.$element,e)},n.prototype.option=function(e){var t;e.children?(t=document.createElement("optgroup")).label=e.text:void 0!==(t=document.createElement("option")).textContent?t.textContent=e.text:t.innerText=e.text,void 0!==e.id&&(t.value=e.id),e.disabled&&(t.disabled=!0),e.selected&&(t.selected=!0),e.title&&(t.title=e.title);var n=l(t),r=this._normalizeItem(e);return r.element=t,a.StoreData(t,"data",r),n},n.prototype.item=function(e){var t={};if(null!=(t=a.GetData(e[0],"data")))return t;if(e.is("option"))t={id:e.val(),text:e.text(),disabled:e.prop("disabled"),selected:e.prop("selected"),title:e.prop("title")};else if(e.is("optgroup")){t={text:e.prop("label"),children:[],title:e.prop("title")};for(var n=e.children("option"),r=[],i=0;i<n.length;i++){var o=l(n[i]),s=this.item(o);r.push(s)}t.children=r}return(t=this._normalizeItem(t)).element=e[0],a.StoreData(e[0],"data",t),t},n.prototype._normalizeItem=function(e){e!==Object(e)&&(e={id:e,text:e});return null!=(e=l.extend({},{text:""},e)).id&&(e.id=e.id.toString()),null!=e.text&&(e.text=e.text.toString()),null==e._resultId&&e.id&&null!=this.container&&(e._resultId=this.generateResultId(this.container,e)),l.extend({},{selected:!1,disabled:!1},e)},n.prototype.matches=function(e,t){return this.options.get("matcher")(e,t)},n}),e.define("select2/data/array",["./select","../utils","jquery"],function(e,f,g){function r(e,t){this._dataToConvert=t.get("data")||[],r.__super__.constructor.call(this,e,t)}return f.Extend(r,e),r.prototype.bind=function(e,t){r.__super__.bind.call(this,e,t),this.addOptions(this.convertToOptions(this._dataToConvert))},r.prototype.select=function(n){var e=this.$element.find("option").filter(function(e,t){return t.value==n.id.toString()});0===e.length&&(e=this.option(n),this.addOptions(e)),r.__super__.select.call(this,n)},r.prototype.convertToOptions=function(e){var t=this,n=this.$element.find("option"),r=n.map(function(){return t.item(g(this)).id}).get(),i=[];function o(e){return function(){return g(this).val()==e.id}}for(var s=0;s<e.length;s++){var a=this._normalizeItem(e[s]);if(0<=g.inArray(a.id,r)){var l=n.filter(o(a)),c=this.item(l),u=g.extend(!0,{},a,c),d=this.option(u);l.replaceWith(d)}else{var p=this.option(a);if(a.children){var h=this.convertToOptions(a.children);f.appendMany(p,h)}i.push(p)}}return i},r}),e.define("select2/data/ajax",["./array","../utils","jquery"],function(e,t,o){function n(e,t){this.ajaxOptions=this._applyDefaults(t.get("ajax")),null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults),n.__super__.constructor.call(this,e,t)}return t.Extend(n,e),n.prototype._applyDefaults=function(e){var t={data:function(e){return o.extend({},e,{q:e.term})},transport:function(e,t,n){var r=o.ajax(e);return r.then(t),r.fail(n),r}};return o.extend({},t,e,!0)},n.prototype.processResults=function(e){return e},n.prototype.query=function(n,r){var i=this;null!=this._request&&(o.isFunction(this._request.abort)&&this._request.abort(),this._request=null);var t=o.extend({type:"GET"},this.ajaxOptions);function e(){var e=t.transport(t,function(e){var t=i.processResults(e,n);i.options.get("debug")&&window.console&&console.error&&(t&&t.results&&o.isArray(t.results)||console.error("Select2: The AJAX results did not return an array in the `results` key of the response.")),r(t)},function(){"status"in e&&(0===e.status||"0"===e.status)||i.trigger("results:message",{message:"errorLoading"})});i._request=e}"function"==typeof t.url&&(t.url=t.url.call(this.$element,n)),"function"==typeof t.data&&(t.data=t.data.call(this.$element,n)),this.ajaxOptions.delay&&null!=n.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(e,this.ajaxOptions.delay)):e()},n}),e.define("select2/data/tags",["jquery"],function(u){function e(e,t,n){var r=n.get("tags"),i=n.get("createTag");void 0!==i&&(this.createTag=i);var o=n.get("insertTag");if(void 0!==o&&(this.insertTag=o),e.call(this,t,n),u.isArray(r))for(var s=0;s<r.length;s++){var a=r[s],l=this._normalizeItem(a),c=this.option(l);this.$element.append(c)}}return e.prototype.query=function(e,c,u){var d=this;this._removeOldTags(),null!=c.term&&null==c.page?e.call(this,c,function e(t,n){for(var r=t.results,i=0;i<r.length;i++){var o=r[i],s=null!=o.children&&!e({results:o.children},!0);if((o.text||"").toUpperCase()===(c.term||"").toUpperCase()||s)return!n&&(t.data=r,void u(t))}if(n)return!0;var a=d.createTag(c);if(null!=a){var l=d.option(a);l.attr("data-select2-tag",!0),d.addOptions([l]),d.insertTag(r,a)}t.results=r,u(t)}):e.call(this,c,u)},e.prototype.createTag=function(e,t){var n=u.trim(t.term);return""===n?null:{id:n,text:n}},e.prototype.insertTag=function(e,t,n){t.unshift(n)},e.prototype._removeOldTags=function(e){this.$element.find("option[data-select2-tag]").each(function(){this.selected||u(this).remove()})},e}),e.define("select2/data/tokenizer",["jquery"],function(d){function e(e,t,n){var r=n.get("tokenizer");void 0!==r&&(this.tokenizer=r),e.call(this,t,n)}return e.prototype.bind=function(e,t,n){e.call(this,t,n),this.$search=t.dropdown.$search||t.selection.$search||n.find(".select2-search__field")},e.prototype.query=function(e,t,n){var i=this;t.term=t.term||"";var r=this.tokenizer(t,this.options,function(e){var t,n=i._normalizeItem(e);if(!i.$element.find("option").filter(function(){return d(this).val()===n.id}).length){var r=i.option(n);r.attr("data-select2-tag",!0),i._removeOldTags(),i.addOptions([r])}t=n,i.trigger("select",{data:t})});r.term!==t.term&&(this.$search.length&&(this.$search.val(r.term),this.$search.trigger("focus")),t.term=r.term),e.call(this,t,n)},e.prototype.tokenizer=function(e,t,n,r){for(var i=n.get("tokenSeparators")||[],o=t.term,s=0,a=this.createTag||function(e){return{id:e.term,text:e.term}};s<o.length;){var l=o[s];if(-1!==d.inArray(l,i)){var c=o.substr(0,s),u=a(d.extend({},t,{term:c}));null!=u?(r(u),o=o.substr(s+1)||"",s=0):s++}else s++}return{term:o}},e}),e.define("select2/data/minimumInputLength",[],function(){function e(e,t,n){this.minimumInputLength=n.get("minimumInputLength"),e.call(this,t,n)}return e.prototype.query=function(e,t,n){t.term=t.term||"",t.term.length<this.minimumInputLength?this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:t.term,params:t}}):e.call(this,t,n)},e}),e.define("select2/data/maximumInputLength",[],function(){function e(e,t,n){this.maximumInputLength=n.get("maximumInputLength"),e.call(this,t,n)}return e.prototype.query=function(e,t,n){t.term=t.term||"",0<this.maximumInputLength&&t.term.length>this.maximumInputLength?this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:t.term,params:t}}):e.call(this,t,n)},e}),e.define("select2/data/maximumSelectionLength",[],function(){function e(e,t,n){this.maximumSelectionLength=n.get("maximumSelectionLength"),e.call(this,t,n)}return e.prototype.bind=function(e,t,n){var r=this;e.call(this,t,n),t.on("select",function(){r._checkIfMaximumSelected()})},e.prototype.query=function(e,t,n){var r=this;this._checkIfMaximumSelected(function(){e.call(r,t,n)})},e.prototype._checkIfMaximumSelected=function(e,n){var r=this;this.current(function(e){var t=null!=e?e.length:0;0<r.maximumSelectionLength&&t>=r.maximumSelectionLength?r.trigger("results:message",{message:"maximumSelected",args:{maximum:r.maximumSelectionLength}}):n&&n()})},e}),e.define("select2/dropdown",["jquery","./utils"],function(t,e){function n(e,t){this.$element=e,this.options=t,n.__super__.constructor.call(this)}return e.Extend(n,e.Observable),n.prototype.render=function(){var e=t('<span class="select2-dropdown"><span class="select2-results"></span></span>');return e.attr("dir",this.options.get("dir")),this.$dropdown=e},n.prototype.bind=function(){},n.prototype.position=function(e,t){},n.prototype.destroy=function(){this.$dropdown.remove()},n}),e.define("select2/dropdown/search",["jquery","../utils"],function(o,e){function t(){}return t.prototype.render=function(e){var t=e.call(this),n=o('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" role="searchbox" aria-autocomplete="list" /></span>');return this.$searchContainer=n,this.$search=n.find("input"),t.prepend(n),t},t.prototype.bind=function(e,t,n){var r=this,i=t.id+"-results";e.call(this,t,n),this.$search.on("keydown",function(e){r.trigger("keypress",e),r._keyUpPrevented=e.isDefaultPrevented()}),this.$search.on("input",function(e){o(this).off("keyup")}),this.$search.on("keyup input",function(e){r.handleSearch(e)}),t.on("open",function(){r.$search.attr("tabindex",0),r.$search.attr("aria-controls",i),r.$search.trigger("focus"),window.setTimeout(function(){r.$search.trigger("focus")},0)}),t.on("close",function(){r.$search.attr("tabindex",-1),r.$search.removeAttr("aria-controls"),r.$search.removeAttr("aria-activedescendant"),r.$search.val(""),r.$search.trigger("blur")}),t.on("focus",function(){t.isOpen()||r.$search.trigger("focus")}),t.on("results:all",function(e){null!=e.query.term&&""!==e.query.term||(r.showSearch(e)?r.$searchContainer.removeClass("select2-search--hide"):r.$searchContainer.addClass("select2-search--hide"))}),t.on("results:focus",function(e){e.data._resultId?r.$search.attr("aria-activedescendant",e.data._resultId):r.$search.removeAttr("aria-activedescendant")})},t.prototype.handleSearch=function(e){if(!this._keyUpPrevented){var t=this.$search.val();this.trigger("query",{term:t})}this._keyUpPrevented=!1},t.prototype.showSearch=function(e,t){return!0},t}),e.define("select2/dropdown/hidePlaceholder",[],function(){function e(e,t,n,r){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),e.call(this,t,n,r)}return e.prototype.append=function(e,t){t.results=this.removePlaceholder(t.results),e.call(this,t)},e.prototype.normalizePlaceholder=function(e,t){return"string"==typeof t&&(t={id:"",text:t}),t},e.prototype.removePlaceholder=function(e,t){for(var n=t.slice(0),r=t.length-1;0<=r;r--){var i=t[r];this.placeholder.id===i.id&&n.splice(r,1)}return n},e}),e.define("select2/dropdown/infiniteScroll",["jquery"],function(n){function e(e,t,n,r){this.lastParams={},e.call(this,t,n,r),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return e.prototype.append=function(e,t){this.$loadingMore.remove(),this.loading=!1,e.call(this,t),this.showLoadingMore(t)&&(this.$results.append(this.$loadingMore),this.loadMoreIfNeeded())},e.prototype.bind=function(e,t,n){var r=this;e.call(this,t,n),t.on("query",function(e){r.lastParams=e,r.loading=!0}),t.on("query:append",function(e){r.lastParams=e,r.loading=!0}),this.$results.on("scroll",this.loadMoreIfNeeded.bind(this))},e.prototype.loadMoreIfNeeded=function(){var e=n.contains(document.documentElement,this.$loadingMore[0]);if(!this.loading&&e){var t=this.$results.offset().top+this.$results.outerHeight(!1);this.$loadingMore.offset().top+this.$loadingMore.outerHeight(!1)<=t+50&&this.loadMore()}},e.prototype.loadMore=function(){this.loading=!0;var e=n.extend({},{page:1},this.lastParams);e.page++,this.trigger("query:append",e)},e.prototype.showLoadingMore=function(e,t){return t.pagination&&t.pagination.more},e.prototype.createLoadingMore=function(){var e=n('<li class="select2-results__option select2-results__option--load-more"role="option" aria-disabled="true"></li>'),t=this.options.get("translations").get("loadingMore");return e.html(t(this.lastParams)),e},e}),e.define("select2/dropdown/attachBody",["jquery","../utils"],function(f,a){function e(e,t,n){this.$dropdownParent=f(n.get("dropdownParent")||document.body),e.call(this,t,n)}return e.prototype.bind=function(e,t,n){var r=this;e.call(this,t,n),t.on("open",function(){r._showDropdown(),r._attachPositioningHandler(t),r._bindContainerResultHandlers(t)}),t.on("close",function(){r._hideDropdown(),r._detachPositioningHandler(t)}),this.$dropdownContainer.on("mousedown",function(e){e.stopPropagation()})},e.prototype.destroy=function(e){e.call(this),this.$dropdownContainer.remove()},e.prototype.position=function(e,t,n){t.attr("class",n.attr("class")),t.removeClass("select2"),t.addClass("select2-container--open"),t.css({position:"absolute",top:-999999}),this.$container=n},e.prototype.render=function(e){var t=f("<span></span>"),n=e.call(this);return t.append(n),this.$dropdownContainer=t},e.prototype._hideDropdown=function(e){this.$dropdownContainer.detach()},e.prototype._bindContainerResultHandlers=function(e,t){if(!this._containerResultsHandlersBound){var n=this;t.on("results:all",function(){n._positionDropdown(),n._resizeDropdown()}),t.on("results:append",function(){n._positionDropdown(),n._resizeDropdown()}),t.on("results:message",function(){n._positionDropdown(),n._resizeDropdown()}),t.on("select",function(){n._positionDropdown(),n._resizeDropdown()}),t.on("unselect",function(){n._positionDropdown(),n._resizeDropdown()}),this._containerResultsHandlersBound=!0}},e.prototype._attachPositioningHandler=function(e,t){var n=this,r="scroll.select2."+t.id,i="resize.select2."+t.id,o="orientationchange.select2."+t.id,s=this.$container.parents().filter(a.hasScroll);s.each(function(){a.StoreData(this,"select2-scroll-position",{x:f(this).scrollLeft(),y:f(this).scrollTop()})}),s.on(r,function(e){var t=a.GetData(this,"select2-scroll-position");f(this).scrollTop(t.y)}),f(window).on(r+" "+i+" "+o,function(e){n._positionDropdown(),n._resizeDropdown()})},e.prototype._detachPositioningHandler=function(e,t){var n="scroll.select2."+t.id,r="resize.select2."+t.id,i="orientationchange.select2."+t.id;this.$container.parents().filter(a.hasScroll).off(n),f(window).off(n+" "+r+" "+i)},e.prototype._positionDropdown=function(){var e=f(window),t=this.$dropdown.hasClass("select2-dropdown--above"),n=this.$dropdown.hasClass("select2-dropdown--below"),r=null,i=this.$container.offset();i.bottom=i.top+this.$container.outerHeight(!1);var o={height:this.$container.outerHeight(!1)};o.top=i.top,o.bottom=i.top+o.height;var s=this.$dropdown.outerHeight(!1),a=e.scrollTop(),l=e.scrollTop()+e.height(),c=a<i.top-s,u=l>i.bottom+s,d={left:i.left,top:o.bottom},p=this.$dropdownParent;"static"===p.css("position")&&(p=p.offsetParent());var h={top:0,left:0};(f.contains(document.body,p[0])||p[0].isConnected)&&(h=p.offset()),d.top-=h.top,d.left-=h.left,t||n||(r="below"),u||!c||t?!c&&u&&t&&(r="below"):r="above",("above"==r||t&&"below"!==r)&&(d.top=o.top-h.top-s),null!=r&&(this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--"+r),this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--"+r)),this.$dropdownContainer.css(d)},e.prototype._resizeDropdown=function(){var e={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(e.minWidth=e.width,e.position="relative",e.width="auto"),this.$dropdown.css(e)},e.prototype._showDropdown=function(e){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},e}),e.define("select2/dropdown/minimumResultsForSearch",[],function(){function e(e,t,n,r){this.minimumResultsForSearch=n.get("minimumResultsForSearch"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0),e.call(this,t,n,r)}return e.prototype.showSearch=function(e,t){return!(function e(t){for(var n=0,r=0;r<t.length;r++){var i=t[r];i.children?n+=e(i.children):n++}return n}(t.data.results)<this.minimumResultsForSearch)&&e.call(this,t)},e}),e.define("select2/dropdown/selectOnClose",["../utils"],function(o){function e(){}return e.prototype.bind=function(e,t,n){var r=this;e.call(this,t,n),t.on("close",function(e){r._handleSelectOnClose(e)})},e.prototype._handleSelectOnClose=function(e,t){if(t&&null!=t.originalSelect2Event){var n=t.originalSelect2Event;if("select"===n._type||"unselect"===n._type)return}var r=this.getHighlightedResults();if(!(r.length<1)){var i=o.GetData(r[0],"data");null!=i.element&&i.element.selected||null==i.element&&i.selected||this.trigger("select",{data:i})}},e}),e.define("select2/dropdown/closeOnSelect",[],function(){function e(){}return e.prototype.bind=function(e,t,n){var r=this;e.call(this,t,n),t.on("select",function(e){r._selectTriggered(e)}),t.on("unselect",function(e){r._selectTriggered(e)})},e.prototype._selectTriggered=function(e,t){var n=t.originalEvent;n&&(n.ctrlKey||n.metaKey)||this.trigger("close",{originalEvent:n,originalSelect2Event:t})},e}),e.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(e){var t=e.input.length-e.maximum,n="Please delete "+t+" character";return 1!=t&&(n+="s"),n},inputTooShort:function(e){return"Please enter "+(e.minimum-e.input.length)+" or more characters"},loadingMore:function(){return"Loading more results…"},maximumSelected:function(e){var t="You can only select "+e.maximum+" item";return 1!=e.maximum&&(t+="s"),t},noResults:function(){return"No results found"},searching:function(){return"Searching…"},removeAllItems:function(){return"Remove all items"}}}),e.define("select2/defaults",["jquery","require","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./i18n/en"],function(c,u,d,p,h,f,g,m,v,y,s,t,_,$,b,w,A,x,D,S,E,C,O,T,q,L,I,j,e){function n(){this.reset()}return n.prototype.apply=function(e){if(null==(e=c.extend(!0,{},this.defaults,e)).dataAdapter){if(null!=e.ajax?e.dataAdapter=b:null!=e.data?e.dataAdapter=$:e.dataAdapter=_,0<e.minimumInputLength&&(e.dataAdapter=y.Decorate(e.dataAdapter,x)),0<e.maximumInputLength&&(e.dataAdapter=y.Decorate(e.dataAdapter,D)),0<e.maximumSelectionLength&&(e.dataAdapter=y.Decorate(e.dataAdapter,S)),e.tags&&(e.dataAdapter=y.Decorate(e.dataAdapter,w)),null==e.tokenSeparators&&null==e.tokenizer||(e.dataAdapter=y.Decorate(e.dataAdapter,A)),null!=e.query){var t=u(e.amdBase+"compat/query");e.dataAdapter=y.Decorate(e.dataAdapter,t)}if(null!=e.initSelection){var n=u(e.amdBase+"compat/initSelection");e.dataAdapter=y.Decorate(e.dataAdapter,n)}}if(null==e.resultsAdapter&&(e.resultsAdapter=d,null!=e.ajax&&(e.resultsAdapter=y.Decorate(e.resultsAdapter,T)),null!=e.placeholder&&(e.resultsAdapter=y.Decorate(e.resultsAdapter,O)),e.selectOnClose&&(e.resultsAdapter=y.Decorate(e.resultsAdapter,I))),null==e.dropdownAdapter){if(e.multiple)e.dropdownAdapter=E;else{var r=y.Decorate(E,C);e.dropdownAdapter=r}if(0!==e.minimumResultsForSearch&&(e.dropdownAdapter=y.Decorate(e.dropdownAdapter,L)),e.closeOnSelect&&(e.dropdownAdapter=y.Decorate(e.dropdownAdapter,j)),null!=e.dropdownCssClass||null!=e.dropdownCss||null!=e.adaptDropdownCssClass){var i=u(e.amdBase+"compat/dropdownCss");e.dropdownAdapter=y.Decorate(e.dropdownAdapter,i)}e.dropdownAdapter=y.Decorate(e.dropdownAdapter,q)}if(null==e.selectionAdapter){if(e.multiple?e.selectionAdapter=h:e.selectionAdapter=p,null!=e.placeholder&&(e.selectionAdapter=y.Decorate(e.selectionAdapter,f)),e.allowClear&&(e.selectionAdapter=y.Decorate(e.selectionAdapter,g)),e.multiple&&(e.selectionAdapter=y.Decorate(e.selectionAdapter,m)),null!=e.containerCssClass||null!=e.containerCss||null!=e.adaptContainerCssClass){var o=u(e.amdBase+"compat/containerCss");e.selectionAdapter=y.Decorate(e.selectionAdapter,o)}e.selectionAdapter=y.Decorate(e.selectionAdapter,v)}e.language=this._resolveLanguage(e.language),e.language.push("en");for(var s=[],a=0;a<e.language.length;a++){var l=e.language[a];-1===s.indexOf(l)&&s.push(l)}return e.language=s,e.translations=this._processTranslations(e.language,e.debug),e},n.prototype.reset=function(){function a(e){return e.replace(/[^\u0000-\u007E]/g,function(e){return t[e]||e})}this.defaults={amdBase:"./",amdLanguageBase:"./i18n/",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:y.escapeMarkup,language:{},matcher:function e(t,n){if(""===c.trim(t.term))return n;if(n.children&&0<n.children.length){for(var r=c.extend(!0,{},n),i=n.children.length-1;0<=i;i--)null==e(t,n.children[i])&&r.children.splice(i,1);return 0<r.children.length?r:e(t,r)}var o=a(n.text).toUpperCase(),s=a(t.term).toUpperCase();return-1<o.indexOf(s)?n:null},minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,scrollAfterSelect:!1,sorter:function(e){return e},templateResult:function(e){return e.text},templateSelection:function(e){return e.text},theme:"default",width:"resolve"}},n.prototype.applyFromElement=function(e,t){var n=e.language,r=this.defaults.language,i=t.prop("lang"),o=t.closest("[lang]").prop("lang"),s=Array.prototype.concat.call(this._resolveLanguage(i),this._resolveLanguage(n),this._resolveLanguage(r),this._resolveLanguage(o));return e.language=s,e},n.prototype._resolveLanguage=function(e){if(!e)return[];if(c.isEmptyObject(e))return[];if(c.isPlainObject(e))return[e];var t;t=c.isArray(e)?e:[e];for(var n=[],r=0;r<t.length;r++)if(n.push(t[r]),"string"==typeof t[r]&&0<t[r].indexOf("-")){var i=t[r].split("-")[0];n.push(i)}return n},n.prototype._processTranslations=function(e,t){for(var n=new s,r=0;r<e.length;r++){var i=new s,o=e[r];if("string"==typeof o)try{i=s.loadPath(o)}catch(e){try{o=this.defaults.amdLanguageBase+o,i=s.loadPath(o)}catch(e){t&&window.console&&console.warn&&console.warn('Select2: The language file for "'+o+'" could not be automatically loaded. A fallback will be used instead.')}}else i=c.isPlainObject(o)?new s(o):o;n.extend(i)}return n},n.prototype.set=function(e,t){var n={};n[c.camelCase(e)]=t;var r=y._convertData(n);c.extend(!0,this.defaults,r)},new n}),e.define("select2/options",["require","jquery","./defaults","./utils"],function(r,d,i,p){function e(e,t){if(this.options=e,null!=t&&this.fromElement(t),null!=t&&(this.options=i.applyFromElement(this.options,t)),this.options=i.apply(this.options),t&&t.is("input")){var n=r(this.get("amdBase")+"compat/inputData");this.options.dataAdapter=p.Decorate(this.options.dataAdapter,n)}}return e.prototype.fromElement=function(e){var t=["select2"];null==this.options.multiple&&(this.options.multiple=e.prop("multiple")),null==this.options.disabled&&(this.options.disabled=e.prop("disabled")),null==this.options.dir&&(e.prop("dir")?this.options.dir=e.prop("dir"):e.closest("[dir]").prop("dir")?this.options.dir=e.closest("[dir]").prop("dir"):this.options.dir="ltr"),e.prop("disabled",this.options.disabled),e.prop("multiple",this.options.multiple),p.GetData(e[0],"select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),p.StoreData(e[0],"data",p.GetData(e[0],"select2Tags")),p.StoreData(e[0],"tags",!0)),p.GetData(e[0],"ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),e.attr("ajax--url",p.GetData(e[0],"ajaxUrl")),p.StoreData(e[0],"ajax-Url",p.GetData(e[0],"ajaxUrl")));var n={};function r(e,t){return t.toUpperCase()}for(var i=0;i<e[0].attributes.length;i++){var o=e[0].attributes[i].name,s="data-";if(o.substr(0,s.length)==s){var a=o.substring(s.length),l=p.GetData(e[0],a);n[a.replace(/-([a-z])/g,r)]=l}}d.fn.jquery&&"1."==d.fn.jquery.substr(0,2)&&e[0].dataset&&(n=d.extend(!0,{},e[0].dataset,n));var c=d.extend(!0,{},p.GetData(e[0]),n);for(var u in c=p._convertData(c))-1<d.inArray(u,t)||(d.isPlainObject(this.options[u])?d.extend(this.options[u],c[u]):this.options[u]=c[u]);return this},e.prototype.get=function(e){return this.options[e]},e.prototype.set=function(e,t){this.options[e]=t},e}),e.define("select2/core",["jquery","./options","./utils","./keys"],function(o,c,u,r){var d=function(e,t){null!=u.GetData(e[0],"select2")&&u.GetData(e[0],"select2").destroy(),this.$element=e,this.id=this._generateId(e),t=t||{},this.options=new c(t,e),d.__super__.constructor.call(this);var n=e.attr("tabindex")||0;u.StoreData(e[0],"old-tabindex",n),e.attr("tabindex","-1");var r=this.options.get("dataAdapter");this.dataAdapter=new r(e,this.options);var i=this.render();this._placeContainer(i);var o=this.options.get("selectionAdapter");this.selection=new o(e,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,i);var s=this.options.get("dropdownAdapter");this.dropdown=new s(e,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,i);var a=this.options.get("resultsAdapter");this.results=new a(e,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var l=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current(function(e){l.trigger("selection:update",{data:e})}),e.addClass("select2-hidden-accessible"),e.attr("aria-hidden","true"),this._syncAttributes(),u.StoreData(e[0],"select2",this),e.data("select2",this)};return u.Extend(d,u.Observable),d.prototype._generateId=function(e){return"select2-"+(null!=e.attr("id")?e.attr("id"):null!=e.attr("name")?e.attr("name")+"-"+u.generateChars(2):u.generateChars(4)).replace(/(:|\.|\[|\]|,)/g,"")},d.prototype._placeContainer=function(e){e.insertAfter(this.$element);var t=this._resolveWidth(this.$element,this.options.get("width"));null!=t&&e.css("width",t)},d.prototype._resolveWidth=function(e,t){var n=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if("resolve"==t){var r=this._resolveWidth(e,"style");return null!=r?r:this._resolveWidth(e,"element")}if("element"==t){var i=e.outerWidth(!1);return i<=0?"auto":i+"px"}if("style"!=t)return"computedstyle"!=t?t:window.getComputedStyle(e[0]).width;var o=e.attr("style");if("string"!=typeof o)return null;for(var s=o.split(";"),a=0,l=s.length;a<l;a+=1){var c=s[a].replace(/\s/g,"").match(n);if(null!==c&&1<=c.length)return c[1]}return null},d.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},d.prototype._registerDomEvents=function(){var t=this;this.$element.on("change.select2",function(){t.dataAdapter.current(function(e){t.trigger("selection:update",{data:e})})}),this.$element.on("focus.select2",function(e){t.trigger("focus",e)}),this._syncA=u.bind(this._syncAttributes,this),this._syncS=u.bind(this._syncSubtree,this),this.$element[0].attachEvent&&this.$element[0].attachEvent("onpropertychange",this._syncA);var e=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;null!=e?(this._observer=new e(function(e){t._syncA(),t._syncS(null,e)}),this._observer.observe(this.$element[0],{attributes:!0,childList:!0,subtree:!1})):this.$element[0].addEventListener&&(this.$element[0].addEventListener("DOMAttrModified",t._syncA,!1),this.$element[0].addEventListener("DOMNodeInserted",t._syncS,!1),this.$element[0].addEventListener("DOMNodeRemoved",t._syncS,!1))},d.prototype._registerDataEvents=function(){var n=this;this.dataAdapter.on("*",function(e,t){n.trigger(e,t)})},d.prototype._registerSelectionEvents=function(){var n=this,r=["toggle","focus"];this.selection.on("toggle",function(){n.toggleDropdown()}),this.selection.on("focus",function(e){n.focus(e)}),this.selection.on("*",function(e,t){-1===o.inArray(e,r)&&n.trigger(e,t)})},d.prototype._registerDropdownEvents=function(){var n=this;this.dropdown.on("*",function(e,t){n.trigger(e,t)})},d.prototype._registerResultsEvents=function(){var n=this;this.results.on("*",function(e,t){n.trigger(e,t)})},d.prototype._registerEvents=function(){var n=this;this.on("open",function(){n.$container.addClass("select2-container--open")}),this.on("close",function(){n.$container.removeClass("select2-container--open")}),this.on("enable",function(){n.$container.removeClass("select2-container--disabled")}),this.on("disable",function(){n.$container.addClass("select2-container--disabled")}),this.on("blur",function(){n.$container.removeClass("select2-container--focus")}),this.on("query",function(t){n.isOpen()||n.trigger("open",{}),this.dataAdapter.query(t,function(e){n.trigger("results:all",{data:e,query:t})})}),this.on("query:append",function(t){this.dataAdapter.query(t,function(e){n.trigger("results:append",{data:e,query:t})})}),this.on("keypress",function(e){var t=e.which;n.isOpen()?t===r.ESC||t===r.TAB||t===r.UP&&e.altKey?(n.close(e),e.preventDefault()):t===r.ENTER?(n.trigger("results:select",{}),e.preventDefault()):t===r.SPACE&&e.ctrlKey?(n.trigger("results:toggle",{}),e.preventDefault()):t===r.UP?(n.trigger("results:previous",{}),e.preventDefault()):t===r.DOWN&&(n.trigger("results:next",{}),e.preventDefault()):(t===r.ENTER||t===r.SPACE||t===r.DOWN&&e.altKey)&&(n.open(),e.preventDefault())})},d.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.isDisabled()?(this.isOpen()&&this.close(),this.trigger("disable",{})):this.trigger("enable",{})},d.prototype._isChangeMutation=function(e,t){var n=!1,r=this;if(!e||!e.target||"OPTION"===e.target.nodeName||"OPTGROUP"===e.target.nodeName){if(t)if(t.addedNodes&&0<t.addedNodes.length)for(var i=0;i<t.addedNodes.length;i++){t.addedNodes[i].selected&&(n=!0)}else t.removedNodes&&0<t.removedNodes.length?n=!0:o.isArray(t)&&o.each(t,function(e,t){if(r._isChangeMutation(e,t))return!(n=!0)});else n=!0;return n}},d.prototype._syncSubtree=function(e,t){var n=this._isChangeMutation(e,t),r=this;n&&this.dataAdapter.current(function(e){r.trigger("selection:update",{data:e})})},d.prototype.trigger=function(e,t){var n=d.__super__.trigger,r={open:"opening",close:"closing",select:"selecting",unselect:"unselecting",clear:"clearing"};if(void 0===t&&(t={}),e in r){var i=r[e],o={prevented:!1,name:e,args:t};if(n.call(this,i,o),o.prevented)return void(t.prevented=!0)}n.call(this,e,t)},d.prototype.toggleDropdown=function(){this.isDisabled()||(this.isOpen()?this.close():this.open())},d.prototype.open=function(){this.isOpen()||this.isDisabled()||this.trigger("query",{})},d.prototype.close=function(e){this.isOpen()&&this.trigger("close",{originalEvent:e})},d.prototype.isEnabled=function(){return!this.isDisabled()},d.prototype.isDisabled=function(){return this.options.get("disabled")},d.prototype.isOpen=function(){return this.$container.hasClass("select2-container--open")},d.prototype.hasFocus=function(){return this.$container.hasClass("select2-container--focus")},d.prototype.focus=function(e){this.hasFocus()||(this.$container.addClass("select2-container--focus"),this.trigger("focus",{}))},d.prototype.enable=function(e){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.'),null!=e&&0!==e.length||(e=[!0]);var t=!e[0];this.$element.prop("disabled",t)},d.prototype.data=function(){this.options.get("debug")&&0<arguments.length&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var t=[];return this.dataAdapter.current(function(e){t=e}),t},d.prototype.val=function(e){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),null==e||0===e.length)return this.$element.val();var t=e[0];o.isArray(t)&&(t=o.map(t,function(e){return e.toString()})),this.$element.val(t).trigger("input").trigger("change")},d.prototype.destroy=function(){this.$container.remove(),this.$element[0].detachEvent&&this.$element[0].detachEvent("onpropertychange",this._syncA),null!=this._observer?(this._observer.disconnect(),this._observer=null):this.$element[0].removeEventListener&&(this.$element[0].removeEventListener("DOMAttrModified",this._syncA,!1),this.$element[0].removeEventListener("DOMNodeInserted",this._syncS,!1),this.$element[0].removeEventListener("DOMNodeRemoved",this._syncS,!1)),this._syncA=null,this._syncS=null,this.$element.off(".select2"),this.$element.attr("tabindex",u.GetData(this.$element[0],"old-tabindex")),this.$element.removeClass("select2-hidden-accessible"),this.$element.attr("aria-hidden","false"),u.RemoveData(this.$element[0]),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},d.prototype.render=function(){var e=o('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');return e.attr("dir",this.options.get("dir")),this.$container=e,this.$container.addClass("select2-container--"+this.options.get("theme")),u.StoreData(e[0],"element",this.$element),e},d}),e.define("jquery-mousewheel",["jquery"],function(e){return e}),e.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults","./select2/utils"],function(i,e,o,t,s){if(null==i.fn.select2){var a=["open","close","destroy"];i.fn.select2=function(t){if("object"==typeof(t=t||{}))return this.each(function(){var e=i.extend(!0,{},t);new o(i(this),e)}),this;if("string"!=typeof t)throw new Error("Invalid arguments for Select2: "+t);var n,r=Array.prototype.slice.call(arguments,1);return this.each(function(){var e=s.GetData(this,"select2");null==e&&window.console&&console.error&&console.error("The select2('"+t+"') method was called on an element that is not using Select2."),n=e[t].apply(e,r)}),-1<i.inArray(t,a)?this:n}}return null==i.fn.select2.defaults&&(i.fn.select2.defaults=t),o}),{define:e.define,require:e.require}}(),t=e.require("jquery.select2");return u.fn.select2.amd=e,t});;!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.moment=t()}(this,function(){"use strict";var e,i;function c(){return e.apply(null,arguments)}function o(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function u(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function l(e){return void 0===e}function h(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function d(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function f(e,t){var n,s=[];for(n=0;n<e.length;++n)s.push(t(e[n],n));return s}function m(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function _(e,t){for(var n in t)m(t,n)&&(e[n]=t[n]);return m(t,"toString")&&(e.toString=t.toString),m(t,"valueOf")&&(e.valueOf=t.valueOf),e}function y(e,t,n,s){return Tt(e,t,n,s,!0).utc()}function g(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}),e._pf}function v(e){if(null==e._isValid){var t=g(e),n=i.call(t.parsedDateParts,function(e){return null!=e}),s=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(s=s&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return s;e._isValid=s}return e._isValid}function p(e){var t=y(NaN);return null!=e?_(g(t),e):g(t).userInvalidated=!0,t}i=Array.prototype.some?Array.prototype.some:function(e){for(var t=Object(this),n=t.length>>>0,s=0;s<n;s++)if(s in t&&e.call(this,t[s],s,t))return!0;return!1};var r=c.momentProperties=[];function w(e,t){var n,s,i;if(l(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),l(t._i)||(e._i=t._i),l(t._f)||(e._f=t._f),l(t._l)||(e._l=t._l),l(t._strict)||(e._strict=t._strict),l(t._tzm)||(e._tzm=t._tzm),l(t._isUTC)||(e._isUTC=t._isUTC),l(t._offset)||(e._offset=t._offset),l(t._pf)||(e._pf=g(t)),l(t._locale)||(e._locale=t._locale),0<r.length)for(n=0;n<r.length;n++)l(i=t[s=r[n]])||(e[s]=i);return e}var t=!1;function M(e){w(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===t&&(t=!0,c.updateOffset(this),t=!1)}function k(e){return e instanceof M||null!=e&&null!=e._isAMomentObject}function S(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function D(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=S(t)),n}function a(e,t,n){var s,i=Math.min(e.length,t.length),r=Math.abs(e.length-t.length),a=0;for(s=0;s<i;s++)(n&&e[s]!==t[s]||!n&&D(e[s])!==D(t[s]))&&a++;return a+r}function Y(e){!1===c.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function n(i,r){var a=!0;return _(function(){if(null!=c.deprecationHandler&&c.deprecationHandler(null,i),a){for(var e,t=[],n=0;n<arguments.length;n++){if(e="","object"==typeof arguments[n]){for(var s in e+="\n["+n+"] ",arguments[0])e+=s+": "+arguments[0][s]+", ";e=e.slice(0,-2)}else e=arguments[n];t.push(e)}Y(i+"\nArguments: "+Array.prototype.slice.call(t).join("")+"\n"+(new Error).stack),a=!1}return r.apply(this,arguments)},r)}var s,O={};function T(e,t){null!=c.deprecationHandler&&c.deprecationHandler(e,t),O[e]||(Y(t),O[e]=!0)}function b(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function x(e,t){var n,s=_({},e);for(n in t)m(t,n)&&(u(e[n])&&u(t[n])?(s[n]={},_(s[n],e[n]),_(s[n],t[n])):null!=t[n]?s[n]=t[n]:delete s[n]);for(n in e)m(e,n)&&!m(t,n)&&u(e[n])&&(s[n]=_({},s[n]));return s}function P(e){null!=e&&this.set(e)}c.suppressDeprecationWarnings=!1,c.deprecationHandler=null,s=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)m(e,t)&&n.push(t);return n};var W={};function C(e,t){var n=e.toLowerCase();W[n]=W[n+"s"]=W[t]=e}function H(e){return"string"==typeof e?W[e]||W[e.toLowerCase()]:void 0}function R(e){var t,n,s={};for(n in e)m(e,n)&&(t=H(n))&&(s[t]=e[n]);return s}var U={};function F(e,t){U[e]=t}function L(e,t,n){var s=""+Math.abs(e),i=t-s.length;return(0<=e?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+s}var N=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,G=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,V={},E={};function I(e,t,n,s){var i=s;"string"==typeof s&&(i=function(){return this[s]()}),e&&(E[e]=i),t&&(E[t[0]]=function(){return L(i.apply(this,arguments),t[1],t[2])}),n&&(E[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function A(e,t){return e.isValid()?(t=j(t,e.localeData()),V[t]=V[t]||function(s){var e,i,t,r=s.match(N);for(e=0,i=r.length;e<i;e++)E[r[e]]?r[e]=E[r[e]]:r[e]=(t=r[e]).match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"");return function(e){var t,n="";for(t=0;t<i;t++)n+=b(r[t])?r[t].call(e,s):r[t];return n}}(t),V[t](e)):e.localeData().invalidDate()}function j(e,t){var n=5;function s(e){return t.longDateFormat(e)||e}for(G.lastIndex=0;0<=n&&G.test(e);)e=e.replace(G,s),G.lastIndex=0,n-=1;return e}var Z=/\d/,z=/\d\d/,$=/\d{3}/,q=/\d{4}/,J=/[+-]?\d{6}/,B=/\d\d?/,Q=/\d\d\d\d?/,X=/\d\d\d\d\d\d?/,K=/\d{1,3}/,ee=/\d{1,4}/,te=/[+-]?\d{1,6}/,ne=/\d+/,se=/[+-]?\d+/,ie=/Z|[+-]\d\d:?\d\d/gi,re=/Z|[+-]\d\d(?::?\d\d)?/gi,ae=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,oe={};function ue(e,n,s){oe[e]=b(n)?n:function(e,t){return e&&s?s:n}}function le(e,t){return m(oe,e)?oe[e](t._strict,t._locale):new RegExp(he(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,s,i){return t||n||s||i})))}function he(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var de={};function ce(e,n){var t,s=n;for("string"==typeof e&&(e=[e]),h(n)&&(s=function(e,t){t[n]=D(e)}),t=0;t<e.length;t++)de[e[t]]=s}function fe(e,i){ce(e,function(e,t,n,s){n._w=n._w||{},i(e,n._w,n,s)})}var me=0,_e=1,ye=2,ge=3,ve=4,pe=5,we=6,Me=7,ke=8;function Se(e){return De(e)?366:365}function De(e){return e%4==0&&e%100!=0||e%400==0}I("Y",0,0,function(){var e=this.year();return e<=9999?""+e:"+"+e}),I(0,["YY",2],0,function(){return this.year()%100}),I(0,["YYYY",4],0,"year"),I(0,["YYYYY",5],0,"year"),I(0,["YYYYYY",6,!0],0,"year"),C("year","y"),F("year",1),ue("Y",se),ue("YY",B,z),ue("YYYY",ee,q),ue("YYYYY",te,J),ue("YYYYYY",te,J),ce(["YYYYY","YYYYYY"],me),ce("YYYY",function(e,t){t[me]=2===e.length?c.parseTwoDigitYear(e):D(e)}),ce("YY",function(e,t){t[me]=c.parseTwoDigitYear(e)}),ce("Y",function(e,t){t[me]=parseInt(e,10)}),c.parseTwoDigitYear=function(e){return D(e)+(68<D(e)?1900:2e3)};var Ye,Oe=Te("FullYear",!0);function Te(t,n){return function(e){return null!=e?(xe(this,t,e),c.updateOffset(this,n),this):be(this,t)}}function be(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function xe(e,t,n){e.isValid()&&!isNaN(n)&&("FullYear"===t&&De(e.year())&&1===e.month()&&29===e.date()?e._d["set"+(e._isUTC?"UTC":"")+t](n,e.month(),Pe(n,e.month())):e._d["set"+(e._isUTC?"UTC":"")+t](n))}function Pe(e,t){if(isNaN(e)||isNaN(t))return NaN;var n,s=(t%(n=12)+n)%n;return e+=(t-s)/12,1===s?De(e)?29:28:31-s%7%2}Ye=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},I("M",["MM",2],"Mo",function(){return this.month()+1}),I("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),I("MMMM",0,0,function(e){return this.localeData().months(this,e)}),C("month","M"),F("month",8),ue("M",B),ue("MM",B,z),ue("MMM",function(e,t){return t.monthsShortRegex(e)}),ue("MMMM",function(e,t){return t.monthsRegex(e)}),ce(["M","MM"],function(e,t){t[_e]=D(e)-1}),ce(["MMM","MMMM"],function(e,t,n,s){var i=n._locale.monthsParse(e,s,n._strict);null!=i?t[_e]=i:g(n).invalidMonth=e});var We=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Ce="January_February_March_April_May_June_July_August_September_October_November_December".split("_");var He="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function Re(e,t){var n;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=D(t);else if(!h(t=e.localeData().monthsParse(t)))return e;return n=Math.min(e.date(),Pe(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function Ue(e){return null!=e?(Re(this,e),c.updateOffset(this,!0),this):be(this,"Month")}var Fe=ae;var Le=ae;function Ne(){function e(e,t){return t.length-e.length}var t,n,s=[],i=[],r=[];for(t=0;t<12;t++)n=y([2e3,t]),s.push(this.monthsShort(n,"")),i.push(this.months(n,"")),r.push(this.months(n,"")),r.push(this.monthsShort(n,""));for(s.sort(e),i.sort(e),r.sort(e),t=0;t<12;t++)s[t]=he(s[t]),i[t]=he(i[t]);for(t=0;t<24;t++)r[t]=he(r[t]);this._monthsRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+s.join("|")+")","i")}function Ge(e){var t;if(e<100&&0<=e){var n=Array.prototype.slice.call(arguments);n[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)}else t=new Date(Date.UTC.apply(null,arguments));return t}function Ve(e,t,n){var s=7+t-n;return-((7+Ge(e,0,s).getUTCDay()-t)%7)+s-1}function Ee(e,t,n,s,i){var r,a,o=1+7*(t-1)+(7+n-s)%7+Ve(e,s,i);return a=o<=0?Se(r=e-1)+o:o>Se(e)?(r=e+1,o-Se(e)):(r=e,o),{year:r,dayOfYear:a}}function Ie(e,t,n){var s,i,r=Ve(e.year(),t,n),a=Math.floor((e.dayOfYear()-r-1)/7)+1;return a<1?s=a+Ae(i=e.year()-1,t,n):a>Ae(e.year(),t,n)?(s=a-Ae(e.year(),t,n),i=e.year()+1):(i=e.year(),s=a),{week:s,year:i}}function Ae(e,t,n){var s=Ve(e,t,n),i=Ve(e+1,t,n);return(Se(e)-s+i)/7}I("w",["ww",2],"wo","week"),I("W",["WW",2],"Wo","isoWeek"),C("week","w"),C("isoWeek","W"),F("week",5),F("isoWeek",5),ue("w",B),ue("ww",B,z),ue("W",B),ue("WW",B,z),fe(["w","ww","W","WW"],function(e,t,n,s){t[s.substr(0,1)]=D(e)});function je(e,t){return e.slice(t,7).concat(e.slice(0,t))}I("d",0,"do","day"),I("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),I("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),I("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),I("e",0,0,"weekday"),I("E",0,0,"isoWeekday"),C("day","d"),C("weekday","e"),C("isoWeekday","E"),F("day",11),F("weekday",11),F("isoWeekday",11),ue("d",B),ue("e",B),ue("E",B),ue("dd",function(e,t){return t.weekdaysMinRegex(e)}),ue("ddd",function(e,t){return t.weekdaysShortRegex(e)}),ue("dddd",function(e,t){return t.weekdaysRegex(e)}),fe(["dd","ddd","dddd"],function(e,t,n,s){var i=n._locale.weekdaysParse(e,s,n._strict);null!=i?t.d=i:g(n).invalidWeekday=e}),fe(["d","e","E"],function(e,t,n,s){t[s]=D(e)});var Ze="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_");var ze="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_");var $e="Su_Mo_Tu_We_Th_Fr_Sa".split("_");var qe=ae;var Je=ae;var Be=ae;function Qe(){function e(e,t){return t.length-e.length}var t,n,s,i,r,a=[],o=[],u=[],l=[];for(t=0;t<7;t++)n=y([2e3,1]).day(t),s=this.weekdaysMin(n,""),i=this.weekdaysShort(n,""),r=this.weekdays(n,""),a.push(s),o.push(i),u.push(r),l.push(s),l.push(i),l.push(r);for(a.sort(e),o.sort(e),u.sort(e),l.sort(e),t=0;t<7;t++)o[t]=he(o[t]),u[t]=he(u[t]),l[t]=he(l[t]);this._weekdaysRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function Xe(){return this.hours()%12||12}function Ke(e,t){I(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function et(e,t){return t._meridiemParse}I("H",["HH",2],0,"hour"),I("h",["hh",2],0,Xe),I("k",["kk",2],0,function(){return this.hours()||24}),I("hmm",0,0,function(){return""+Xe.apply(this)+L(this.minutes(),2)}),I("hmmss",0,0,function(){return""+Xe.apply(this)+L(this.minutes(),2)+L(this.seconds(),2)}),I("Hmm",0,0,function(){return""+this.hours()+L(this.minutes(),2)}),I("Hmmss",0,0,function(){return""+this.hours()+L(this.minutes(),2)+L(this.seconds(),2)}),Ke("a",!0),Ke("A",!1),C("hour","h"),F("hour",13),ue("a",et),ue("A",et),ue("H",B),ue("h",B),ue("k",B),ue("HH",B,z),ue("hh",B,z),ue("kk",B,z),ue("hmm",Q),ue("hmmss",X),ue("Hmm",Q),ue("Hmmss",X),ce(["H","HH"],ge),ce(["k","kk"],function(e,t,n){var s=D(e);t[ge]=24===s?0:s}),ce(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),ce(["h","hh"],function(e,t,n){t[ge]=D(e),g(n).bigHour=!0}),ce("hmm",function(e,t,n){var s=e.length-2;t[ge]=D(e.substr(0,s)),t[ve]=D(e.substr(s)),g(n).bigHour=!0}),ce("hmmss",function(e,t,n){var s=e.length-4,i=e.length-2;t[ge]=D(e.substr(0,s)),t[ve]=D(e.substr(s,2)),t[pe]=D(e.substr(i)),g(n).bigHour=!0}),ce("Hmm",function(e,t,n){var s=e.length-2;t[ge]=D(e.substr(0,s)),t[ve]=D(e.substr(s))}),ce("Hmmss",function(e,t,n){var s=e.length-4,i=e.length-2;t[ge]=D(e.substr(0,s)),t[ve]=D(e.substr(s,2)),t[pe]=D(e.substr(i))});var tt,nt=Te("Hours",!0),st={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Ce,monthsShort:He,week:{dow:0,doy:6},weekdays:Ze,weekdaysMin:$e,weekdaysShort:ze,meridiemParse:/[ap]\.?m?\.?/i},it={},rt={};function at(e){return e?e.toLowerCase().replace("_","-"):e}function ot(e){var t=null;if(!it[e]&&"undefined"!=typeof module&&module&&module.exports)try{t=tt._abbr,require("./locale/"+e),ut(t)}catch(e){}return it[e]}function ut(e,t){var n;return e&&((n=l(t)?ht(e):lt(e,t))?tt=n:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),tt._abbr}function lt(e,t){if(null===t)return delete it[e],null;var n,s=st;if(t.abbr=e,null!=it[e])T("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),s=it[e]._config;else if(null!=t.parentLocale)if(null!=it[t.parentLocale])s=it[t.parentLocale]._config;else{if(null==(n=ot(t.parentLocale)))return rt[t.parentLocale]||(rt[t.parentLocale]=[]),rt[t.parentLocale].push({name:e,config:t}),null;s=n._config}return it[e]=new P(x(s,t)),rt[e]&&rt[e].forEach(function(e){lt(e.name,e.config)}),ut(e),it[e]}function ht(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return tt;if(!o(e)){if(t=ot(e))return t;e=[e]}return function(e){for(var t,n,s,i,r=0;r<e.length;){for(t=(i=at(e[r]).split("-")).length,n=(n=at(e[r+1]))?n.split("-"):null;0<t;){if(s=ot(i.slice(0,t).join("-")))return s;if(n&&n.length>=t&&a(i,n,!0)>=t-1)break;t--}r++}return tt}(e)}function dt(e){var t,n=e._a;return n&&-2===g(e).overflow&&(t=n[_e]<0||11<n[_e]?_e:n[ye]<1||n[ye]>Pe(n[me],n[_e])?ye:n[ge]<0||24<n[ge]||24===n[ge]&&(0!==n[ve]||0!==n[pe]||0!==n[we])?ge:n[ve]<0||59<n[ve]?ve:n[pe]<0||59<n[pe]?pe:n[we]<0||999<n[we]?we:-1,g(e)._overflowDayOfYear&&(t<me||ye<t)&&(t=ye),g(e)._overflowWeeks&&-1===t&&(t=Me),g(e)._overflowWeekday&&-1===t&&(t=ke),g(e).overflow=t),e}function ct(e,t,n){return null!=e?e:null!=t?t:n}function ft(e){var t,n,s,i,r,a=[];if(!e._d){var o,u;for(o=e,u=new Date(c.now()),s=o._useUTC?[u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate()]:[u.getFullYear(),u.getMonth(),u.getDate()],e._w&&null==e._a[ye]&&null==e._a[_e]&&function(e){var t,n,s,i,r,a,o,u;if(null!=(t=e._w).GG||null!=t.W||null!=t.E)r=1,a=4,n=ct(t.GG,e._a[me],Ie(bt(),1,4).year),s=ct(t.W,1),((i=ct(t.E,1))<1||7<i)&&(u=!0);else{r=e._locale._week.dow,a=e._locale._week.doy;var l=Ie(bt(),r,a);n=ct(t.gg,e._a[me],l.year),s=ct(t.w,l.week),null!=t.d?((i=t.d)<0||6<i)&&(u=!0):null!=t.e?(i=t.e+r,(t.e<0||6<t.e)&&(u=!0)):i=r}s<1||s>Ae(n,r,a)?g(e)._overflowWeeks=!0:null!=u?g(e)._overflowWeekday=!0:(o=Ee(n,s,i,r,a),e._a[me]=o.year,e._dayOfYear=o.dayOfYear)}(e),null!=e._dayOfYear&&(r=ct(e._a[me],s[me]),(e._dayOfYear>Se(r)||0===e._dayOfYear)&&(g(e)._overflowDayOfYear=!0),n=Ge(r,0,e._dayOfYear),e._a[_e]=n.getUTCMonth(),e._a[ye]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=a[t]=s[t];for(;t<7;t++)e._a[t]=a[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[ge]&&0===e._a[ve]&&0===e._a[pe]&&0===e._a[we]&&(e._nextDay=!0,e._a[ge]=0),e._d=(e._useUTC?Ge:function(e,t,n,s,i,r,a){var o;return e<100&&0<=e?(o=new Date(e+400,t,n,s,i,r,a),isFinite(o.getFullYear())&&o.setFullYear(e)):o=new Date(e,t,n,s,i,r,a),o}).apply(null,a),i=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[ge]=24),e._w&&void 0!==e._w.d&&e._w.d!==i&&(g(e).weekdayMismatch=!0)}}var mt=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,_t=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,yt=/Z|[+-]\d\d(?::?\d\d)?/,gt=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],vt=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],pt=/^\/?Date\((\-?\d+)/i;function wt(e){var t,n,s,i,r,a,o=e._i,u=mt.exec(o)||_t.exec(o);if(u){for(g(e).iso=!0,t=0,n=gt.length;t<n;t++)if(gt[t][1].exec(u[1])){i=gt[t][0],s=!1!==gt[t][2];break}if(null==i)return void(e._isValid=!1);if(u[3]){for(t=0,n=vt.length;t<n;t++)if(vt[t][1].exec(u[3])){r=(u[2]||" ")+vt[t][0];break}if(null==r)return void(e._isValid=!1)}if(!s&&null!=r)return void(e._isValid=!1);if(u[4]){if(!yt.exec(u[4]))return void(e._isValid=!1);a="Z"}e._f=i+(r||"")+(a||""),Yt(e)}else e._isValid=!1}var Mt=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/;function kt(e,t,n,s,i,r){var a=[function(e){var t=parseInt(e,10);{if(t<=49)return 2e3+t;if(t<=999)return 1900+t}return t}(e),He.indexOf(t),parseInt(n,10),parseInt(s,10),parseInt(i,10)];return r&&a.push(parseInt(r,10)),a}var St={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Dt(e){var t,n,s,i=Mt.exec(e._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(i){var r=kt(i[4],i[3],i[2],i[5],i[6],i[7]);if(t=i[1],n=r,s=e,t&&ze.indexOf(t)!==new Date(n[0],n[1],n[2]).getDay()&&(g(s).weekdayMismatch=!0,!(s._isValid=!1)))return;e._a=r,e._tzm=function(e,t,n){if(e)return St[e];if(t)return 0;var s=parseInt(n,10),i=s%100;return(s-i)/100*60+i}(i[8],i[9],i[10]),e._d=Ge.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),g(e).rfc2822=!0}else e._isValid=!1}function Yt(e){if(e._f!==c.ISO_8601)if(e._f!==c.RFC_2822){e._a=[],g(e).empty=!0;var t,n,s,i,r,a,o,u,l=""+e._i,h=l.length,d=0;for(s=j(e._f,e._locale).match(N)||[],t=0;t<s.length;t++)i=s[t],(n=(l.match(le(i,e))||[])[0])&&(0<(r=l.substr(0,l.indexOf(n))).length&&g(e).unusedInput.push(r),l=l.slice(l.indexOf(n)+n.length),d+=n.length),E[i]?(n?g(e).empty=!1:g(e).unusedTokens.push(i),a=i,u=e,null!=(o=n)&&m(de,a)&&de[a](o,u._a,u,a)):e._strict&&!n&&g(e).unusedTokens.push(i);g(e).charsLeftOver=h-d,0<l.length&&g(e).unusedInput.push(l),e._a[ge]<=12&&!0===g(e).bigHour&&0<e._a[ge]&&(g(e).bigHour=void 0),g(e).parsedDateParts=e._a.slice(0),g(e).meridiem=e._meridiem,e._a[ge]=function(e,t,n){var s;if(null==n)return t;return null!=e.meridiemHour?e.meridiemHour(t,n):(null!=e.isPM&&((s=e.isPM(n))&&t<12&&(t+=12),s||12!==t||(t=0)),t)}(e._locale,e._a[ge],e._meridiem),ft(e),dt(e)}else Dt(e);else wt(e)}function Ot(e){var t,n,s,i,r=e._i,a=e._f;return e._locale=e._locale||ht(e._l),null===r||void 0===a&&""===r?p({nullInput:!0}):("string"==typeof r&&(e._i=r=e._locale.preparse(r)),k(r)?new M(dt(r)):(d(r)?e._d=r:o(a)?function(e){var t,n,s,i,r;if(0===e._f.length)return g(e).invalidFormat=!0,e._d=new Date(NaN);for(i=0;i<e._f.length;i++)r=0,t=w({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[i],Yt(t),v(t)&&(r+=g(t).charsLeftOver,r+=10*g(t).unusedTokens.length,g(t).score=r,(null==s||r<s)&&(s=r,n=t));_(e,n||t)}(e):a?Yt(e):l(n=(t=e)._i)?t._d=new Date(c.now()):d(n)?t._d=new Date(n.valueOf()):"string"==typeof n?(s=t,null===(i=pt.exec(s._i))?(wt(s),!1===s._isValid&&(delete s._isValid,Dt(s),!1===s._isValid&&(delete s._isValid,c.createFromInputFallback(s)))):s._d=new Date(+i[1])):o(n)?(t._a=f(n.slice(0),function(e){return parseInt(e,10)}),ft(t)):u(n)?function(e){if(!e._d){var t=R(e._i);e._a=f([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),ft(e)}}(t):h(n)?t._d=new Date(n):c.createFromInputFallback(t),v(e)||(e._d=null),e))}function Tt(e,t,n,s,i){var r,a={};return!0!==n&&!1!==n||(s=n,n=void 0),(u(e)&&function(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(e.hasOwnProperty(t))return!1;return!0}(e)||o(e)&&0===e.length)&&(e=void 0),a._isAMomentObject=!0,a._useUTC=a._isUTC=i,a._l=n,a._i=e,a._f=t,a._strict=s,(r=new M(dt(Ot(a))))._nextDay&&(r.add(1,"d"),r._nextDay=void 0),r}function bt(e,t,n,s){return Tt(e,t,n,s,!1)}c.createFromInputFallback=n("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),c.ISO_8601=function(){},c.RFC_2822=function(){};var xt=n("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=bt.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:p()}),Pt=n("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=bt.apply(null,arguments);return this.isValid()&&e.isValid()?this<e?this:e:p()});function Wt(e,t){var n,s;if(1===t.length&&o(t[0])&&(t=t[0]),!t.length)return bt();for(n=t[0],s=1;s<t.length;++s)t[s].isValid()&&!t[s][e](n)||(n=t[s]);return n}var Ct=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Ht(e){var t=R(e),n=t.year||0,s=t.quarter||0,i=t.month||0,r=t.week||t.isoWeek||0,a=t.day||0,o=t.hour||0,u=t.minute||0,l=t.second||0,h=t.millisecond||0;this._isValid=function(e){for(var t in e)if(-1===Ye.call(Ct,t)||null!=e[t]&&isNaN(e[t]))return!1;for(var n=!1,s=0;s<Ct.length;++s)if(e[Ct[s]]){if(n)return!1;parseFloat(e[Ct[s]])!==D(e[Ct[s]])&&(n=!0)}return!0}(t),this._milliseconds=+h+1e3*l+6e4*u+1e3*o*60*60,this._days=+a+7*r,this._months=+i+3*s+12*n,this._data={},this._locale=ht(),this._bubble()}function Rt(e){return e instanceof Ht}function Ut(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function Ft(e,n){I(e,0,0,function(){var e=this.utcOffset(),t="+";return e<0&&(e=-e,t="-"),t+L(~~(e/60),2)+n+L(~~e%60,2)})}Ft("Z",":"),Ft("ZZ",""),ue("Z",re),ue("ZZ",re),ce(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=Nt(re,e)});var Lt=/([\+\-]|\d\d)/gi;function Nt(e,t){var n=(t||"").match(e);if(null===n)return null;var s=((n[n.length-1]||[])+"").match(Lt)||["-",0,0],i=60*s[1]+D(s[2]);return 0===i?0:"+"===s[0]?i:-i}function Gt(e,t){var n,s;return t._isUTC?(n=t.clone(),s=(k(e)||d(e)?e.valueOf():bt(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+s),c.updateOffset(n,!1),n):bt(e).local()}function Vt(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function Et(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}c.updateOffset=function(){};var It=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,At=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function jt(e,t){var n,s,i,r=e,a=null;return Rt(e)?r={ms:e._milliseconds,d:e._days,M:e._months}:h(e)?(r={},t?r[t]=e:r.milliseconds=e):(a=It.exec(e))?(n="-"===a[1]?-1:1,r={y:0,d:D(a[ye])*n,h:D(a[ge])*n,m:D(a[ve])*n,s:D(a[pe])*n,ms:D(Ut(1e3*a[we]))*n}):(a=At.exec(e))?(n="-"===a[1]?-1:1,r={y:Zt(a[2],n),M:Zt(a[3],n),w:Zt(a[4],n),d:Zt(a[5],n),h:Zt(a[6],n),m:Zt(a[7],n),s:Zt(a[8],n)}):null==r?r={}:"object"==typeof r&&("from"in r||"to"in r)&&(i=function(e,t){var n;if(!e.isValid()||!t.isValid())return{milliseconds:0,months:0};t=Gt(t,e),e.isBefore(t)?n=zt(e,t):((n=zt(t,e)).milliseconds=-n.milliseconds,n.months=-n.months);return n}(bt(r.from),bt(r.to)),(r={}).ms=i.milliseconds,r.M=i.months),s=new Ht(r),Rt(e)&&m(e,"_locale")&&(s._locale=e._locale),s}function Zt(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function zt(e,t){var n={};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function $t(s,i){return function(e,t){var n;return null===t||isNaN(+t)||(T(i,"moment()."+i+"(period, number) is deprecated. Please use moment()."+i+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),n=e,e=t,t=n),qt(this,jt(e="string"==typeof e?+e:e,t),s),this}}function qt(e,t,n,s){var i=t._milliseconds,r=Ut(t._days),a=Ut(t._months);e.isValid()&&(s=null==s||s,a&&Re(e,be(e,"Month")+a*n),r&&xe(e,"Date",be(e,"Date")+r*n),i&&e._d.setTime(e._d.valueOf()+i*n),s&&c.updateOffset(e,r||a))}jt.fn=Ht.prototype,jt.invalid=function(){return jt(NaN)};var Jt=$t(1,"add"),Bt=$t(-1,"subtract");function Qt(e,t){var n=12*(t.year()-e.year())+(t.month()-e.month()),s=e.clone().add(n,"months");return-(n+(t-s<0?(t-s)/(s-e.clone().add(n-1,"months")):(t-s)/(e.clone().add(n+1,"months")-s)))||0}function Xt(e){var t;return void 0===e?this._locale._abbr:(null!=(t=ht(e))&&(this._locale=t),this)}c.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",c.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Kt=n("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});function en(){return this._locale}var tn=126227808e5;function nn(e,t){return(e%t+t)%t}function sn(e,t,n){return e<100&&0<=e?new Date(e+400,t,n)-tn:new Date(e,t,n).valueOf()}function rn(e,t,n){return e<100&&0<=e?Date.UTC(e+400,t,n)-tn:Date.UTC(e,t,n)}function an(e,t){I(0,[e,e.length],0,t)}function on(e,t,n,s,i){var r;return null==e?Ie(this,s,i).year:((r=Ae(e,s,i))<t&&(t=r),function(e,t,n,s,i){var r=Ee(e,t,n,s,i),a=Ge(r.year,0,r.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}.call(this,e,t,n,s,i))}I(0,["gg",2],0,function(){return this.weekYear()%100}),I(0,["GG",2],0,function(){return this.isoWeekYear()%100}),an("gggg","weekYear"),an("ggggg","weekYear"),an("GGGG","isoWeekYear"),an("GGGGG","isoWeekYear"),C("weekYear","gg"),C("isoWeekYear","GG"),F("weekYear",1),F("isoWeekYear",1),ue("G",se),ue("g",se),ue("GG",B,z),ue("gg",B,z),ue("GGGG",ee,q),ue("gggg",ee,q),ue("GGGGG",te,J),ue("ggggg",te,J),fe(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,s){t[s.substr(0,2)]=D(e)}),fe(["gg","GG"],function(e,t,n,s){t[s]=c.parseTwoDigitYear(e)}),I("Q",0,"Qo","quarter"),C("quarter","Q"),F("quarter",7),ue("Q",Z),ce("Q",function(e,t){t[_e]=3*(D(e)-1)}),I("D",["DD",2],"Do","date"),C("date","D"),F("date",9),ue("D",B),ue("DD",B,z),ue("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}),ce(["D","DD"],ye),ce("Do",function(e,t){t[ye]=D(e.match(B)[0])});var un=Te("Date",!0);I("DDD",["DDDD",3],"DDDo","dayOfYear"),C("dayOfYear","DDD"),F("dayOfYear",4),ue("DDD",K),ue("DDDD",$),ce(["DDD","DDDD"],function(e,t,n){n._dayOfYear=D(e)}),I("m",["mm",2],0,"minute"),C("minute","m"),F("minute",14),ue("m",B),ue("mm",B,z),ce(["m","mm"],ve);var ln=Te("Minutes",!1);I("s",["ss",2],0,"second"),C("second","s"),F("second",15),ue("s",B),ue("ss",B,z),ce(["s","ss"],pe);var hn,dn=Te("Seconds",!1);for(I("S",0,0,function(){return~~(this.millisecond()/100)}),I(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),I(0,["SSS",3],0,"millisecond"),I(0,["SSSS",4],0,function(){return 10*this.millisecond()}),I(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),I(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),I(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),I(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),I(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),C("millisecond","ms"),F("millisecond",16),ue("S",K,Z),ue("SS",K,z),ue("SSS",K,$),hn="SSSS";hn.length<=9;hn+="S")ue(hn,ne);function cn(e,t){t[we]=D(1e3*("0."+e))}for(hn="S";hn.length<=9;hn+="S")ce(hn,cn);var fn=Te("Milliseconds",!1);I("z",0,0,"zoneAbbr"),I("zz",0,0,"zoneName");var mn=M.prototype;function _n(e){return e}mn.add=Jt,mn.calendar=function(e,t){var n=e||bt(),s=Gt(n,this).startOf("day"),i=c.calendarFormat(this,s)||"sameElse",r=t&&(b(t[i])?t[i].call(this,n):t[i]);return this.format(r||this.localeData().calendar(i,this,bt(n)))},mn.clone=function(){return new M(this)},mn.diff=function(e,t,n){var s,i,r;if(!this.isValid())return NaN;if(!(s=Gt(e,this)).isValid())return NaN;switch(i=6e4*(s.utcOffset()-this.utcOffset()),t=H(t)){case"year":r=Qt(this,s)/12;break;case"month":r=Qt(this,s);break;case"quarter":r=Qt(this,s)/3;break;case"second":r=(this-s)/1e3;break;case"minute":r=(this-s)/6e4;break;case"hour":r=(this-s)/36e5;break;case"day":r=(this-s-i)/864e5;break;case"week":r=(this-s-i)/6048e5;break;default:r=this-s}return n?r:S(r)},mn.endOf=function(e){var t;if(void 0===(e=H(e))||"millisecond"===e||!this.isValid())return this;var n=this._isUTC?rn:sn;switch(e){case"year":t=n(this.year()+1,0,1)-1;break;case"quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=n(this.year(),this.month()+1,1)-1;break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=36e5-nn(t+(this._isUTC?0:6e4*this.utcOffset()),36e5)-1;break;case"minute":t=this._d.valueOf(),t+=6e4-nn(t,6e4)-1;break;case"second":t=this._d.valueOf(),t+=1e3-nn(t,1e3)-1;break}return this._d.setTime(t),c.updateOffset(this,!0),this},mn.format=function(e){e||(e=this.isUtc()?c.defaultFormatUtc:c.defaultFormat);var t=A(this,e);return this.localeData().postformat(t)},mn.from=function(e,t){return this.isValid()&&(k(e)&&e.isValid()||bt(e).isValid())?jt({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},mn.fromNow=function(e){return this.from(bt(),e)},mn.to=function(e,t){return this.isValid()&&(k(e)&&e.isValid()||bt(e).isValid())?jt({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},mn.toNow=function(e){return this.to(bt(),e)},mn.get=function(e){return b(this[e=H(e)])?this[e]():this},mn.invalidAt=function(){return g(this).overflow},mn.isAfter=function(e,t){var n=k(e)?e:bt(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=H(t)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())},mn.isBefore=function(e,t){var n=k(e)?e:bt(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=H(t)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())},mn.isBetween=function(e,t,n,s){var i=k(e)?e:bt(e),r=k(t)?t:bt(t);return!!(this.isValid()&&i.isValid()&&r.isValid())&&("("===(s=s||"()")[0]?this.isAfter(i,n):!this.isBefore(i,n))&&(")"===s[1]?this.isBefore(r,n):!this.isAfter(r,n))},mn.isSame=function(e,t){var n,s=k(e)?e:bt(e);return!(!this.isValid()||!s.isValid())&&("millisecond"===(t=H(t)||"millisecond")?this.valueOf()===s.valueOf():(n=s.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))},mn.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},mn.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)},mn.isValid=function(){return v(this)},mn.lang=Kt,mn.locale=Xt,mn.localeData=en,mn.max=Pt,mn.min=xt,mn.parsingFlags=function(){return _({},g(this))},mn.set=function(e,t){if("object"==typeof e)for(var n=function(e){var t=[];for(var n in e)t.push({unit:n,priority:U[n]});return t.sort(function(e,t){return e.priority-t.priority}),t}(e=R(e)),s=0;s<n.length;s++)this[n[s].unit](e[n[s].unit]);else if(b(this[e=H(e)]))return this[e](t);return this},mn.startOf=function(e){var t;if(void 0===(e=H(e))||"millisecond"===e||!this.isValid())return this;var n=this._isUTC?rn:sn;switch(e){case"year":t=n(this.year(),0,1);break;case"quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case"month":t=n(this.year(),this.month(),1);break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=n(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=nn(t+(this._isUTC?0:6e4*this.utcOffset()),36e5);break;case"minute":t=this._d.valueOf(),t-=nn(t,6e4);break;case"second":t=this._d.valueOf(),t-=nn(t,1e3);break}return this._d.setTime(t),c.updateOffset(this,!0),this},mn.subtract=Bt,mn.toArray=function(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]},mn.toObject=function(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}},mn.toDate=function(){return new Date(this.valueOf())},mn.toISOString=function(e){if(!this.isValid())return null;var t=!0!==e,n=t?this.clone().utc():this;return n.year()<0||9999<n.year()?A(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):b(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",A(n,"Z")):A(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},mn.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="";this.isLocal()||(e=0===this.utcOffset()?"moment.utc":"moment.parseZone",t="Z");var n="["+e+'("]',s=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",i=t+'[")]';return this.format(n+s+"-MM-DD[T]HH:mm:ss.SSS"+i)},mn.toJSON=function(){return this.isValid()?this.toISOString():null},mn.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},mn.unix=function(){return Math.floor(this.valueOf()/1e3)},mn.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},mn.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},mn.year=Oe,mn.isLeapYear=function(){return De(this.year())},mn.weekYear=function(e){return on.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},mn.isoWeekYear=function(e){return on.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},mn.quarter=mn.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},mn.month=Ue,mn.daysInMonth=function(){return Pe(this.year(),this.month())},mn.week=mn.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},mn.isoWeek=mn.isoWeeks=function(e){var t=Ie(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},mn.weeksInYear=function(){var e=this.localeData()._week;return Ae(this.year(),e.dow,e.doy)},mn.isoWeeksInYear=function(){return Ae(this.year(),1,4)},mn.date=un,mn.day=mn.days=function(e){if(!this.isValid())return null!=e?this:NaN;var t,n,s=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(t=e,n=this.localeData(),e="string"!=typeof t?t:isNaN(t)?"number"==typeof(t=n.weekdaysParse(t))?t:null:parseInt(t,10),this.add(e-s,"d")):s},mn.weekday=function(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},mn.isoWeekday=function(e){if(!this.isValid())return null!=e?this:NaN;if(null==e)return this.day()||7;var t,n,s=(t=e,n=this.localeData(),"string"==typeof t?n.weekdaysParse(t)%7||7:isNaN(t)?null:t);return this.day(this.day()%7?s:s-7)},mn.dayOfYear=function(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},mn.hour=mn.hours=nt,mn.minute=mn.minutes=ln,mn.second=mn.seconds=dn,mn.millisecond=mn.milliseconds=fn,mn.utcOffset=function(e,t,n){var s,i=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null==e)return this._isUTC?i:Vt(this);if("string"==typeof e){if(null===(e=Nt(re,e)))return this}else Math.abs(e)<16&&!n&&(e*=60);return!this._isUTC&&t&&(s=Vt(this)),this._offset=e,this._isUTC=!0,null!=s&&this.add(s,"m"),i!==e&&(!t||this._changeInProgress?qt(this,jt(e-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,c.updateOffset(this,!0),this._changeInProgress=null)),this},mn.utc=function(e){return this.utcOffset(0,e)},mn.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Vt(this),"m")),this},mn.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=Nt(ie,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this},mn.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?bt(e).utcOffset():0,(this.utcOffset()-e)%60==0)},mn.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},mn.isLocal=function(){return!!this.isValid()&&!this._isUTC},mn.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},mn.isUtc=Et,mn.isUTC=Et,mn.zoneAbbr=function(){return this._isUTC?"UTC":""},mn.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},mn.dates=n("dates accessor is deprecated. Use date instead.",un),mn.months=n("months accessor is deprecated. Use month instead",Ue),mn.years=n("years accessor is deprecated. Use year instead",Oe),mn.zone=n("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}),mn.isDSTShifted=n("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!l(this._isDSTShifted))return this._isDSTShifted;var e={};if(w(e,this),(e=Ot(e))._a){var t=e._isUTC?y(e._a):bt(e._a);this._isDSTShifted=this.isValid()&&0<a(e._a,t.toArray())}else this._isDSTShifted=!1;return this._isDSTShifted});var yn=P.prototype;function gn(e,t,n,s){var i=ht(),r=y().set(s,t);return i[n](r,e)}function vn(e,t,n){if(h(e)&&(t=e,e=void 0),e=e||"",null!=t)return gn(e,t,n,"month");var s,i=[];for(s=0;s<12;s++)i[s]=gn(e,s,n,"month");return i}function pn(e,t,n,s){t=("boolean"==typeof e?h(t)&&(n=t,t=void 0):(t=e,e=!1,h(n=t)&&(n=t,t=void 0)),t||"");var i,r=ht(),a=e?r._week.dow:0;if(null!=n)return gn(t,(n+a)%7,s,"day");var o=[];for(i=0;i<7;i++)o[i]=gn(t,(i+a)%7,s,"day");return o}yn.calendar=function(e,t,n){var s=this._calendar[e]||this._calendar.sameElse;return b(s)?s.call(t,n):s},yn.longDateFormat=function(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])},yn.invalidDate=function(){return this._invalidDate},yn.ordinal=function(e){return this._ordinal.replace("%d",e)},yn.preparse=_n,yn.postformat=_n,yn.relativeTime=function(e,t,n,s){var i=this._relativeTime[n];return b(i)?i(e,t,n,s):i.replace(/%d/i,e)},yn.pastFuture=function(e,t){var n=this._relativeTime[0<e?"future":"past"];return b(n)?n(t):n.replace(/%s/i,t)},yn.set=function(e){var t,n;for(n in e)b(t=e[n])?this[n]=t:this["_"+n]=t;this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},yn.months=function(e,t){return e?o(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||We).test(t)?"format":"standalone"][e.month()]:o(this._months)?this._months:this._months.standalone},yn.monthsShort=function(e,t){return e?o(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[We.test(t)?"format":"standalone"][e.month()]:o(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},yn.monthsParse=function(e,t,n){var s,i,r;if(this._monthsParseExact)return function(e,t,n){var s,i,r,a=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],s=0;s<12;++s)r=y([2e3,s]),this._shortMonthsParse[s]=this.monthsShort(r,"").toLocaleLowerCase(),this._longMonthsParse[s]=this.months(r,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(i=Ye.call(this._shortMonthsParse,a))?i:null:-1!==(i=Ye.call(this._longMonthsParse,a))?i:null:"MMM"===t?-1!==(i=Ye.call(this._shortMonthsParse,a))?i:-1!==(i=Ye.call(this._longMonthsParse,a))?i:null:-1!==(i=Ye.call(this._longMonthsParse,a))?i:-1!==(i=Ye.call(this._shortMonthsParse,a))?i:null}.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),s=0;s<12;s++){if(i=y([2e3,s]),n&&!this._longMonthsParse[s]&&(this._longMonthsParse[s]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[s]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[s]||(r="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[s]=new RegExp(r.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[s].test(e))return s;if(n&&"MMM"===t&&this._shortMonthsParse[s].test(e))return s;if(!n&&this._monthsParse[s].test(e))return s}},yn.monthsRegex=function(e){return this._monthsParseExact?(m(this,"_monthsRegex")||Ne.call(this),e?this._monthsStrictRegex:this._monthsRegex):(m(this,"_monthsRegex")||(this._monthsRegex=Le),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},yn.monthsShortRegex=function(e){return this._monthsParseExact?(m(this,"_monthsRegex")||Ne.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(m(this,"_monthsShortRegex")||(this._monthsShortRegex=Fe),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},yn.week=function(e){return Ie(e,this._week.dow,this._week.doy).week},yn.firstDayOfYear=function(){return this._week.doy},yn.firstDayOfWeek=function(){return this._week.dow},yn.weekdays=function(e,t){var n=o(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"];return!0===e?je(n,this._week.dow):e?n[e.day()]:n},yn.weekdaysMin=function(e){return!0===e?je(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin},yn.weekdaysShort=function(e){return!0===e?je(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort},yn.weekdaysParse=function(e,t,n){var s,i,r;if(this._weekdaysParseExact)return function(e,t,n){var s,i,r,a=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],s=0;s<7;++s)r=y([2e3,1]).day(s),this._minWeekdaysParse[s]=this.weekdaysMin(r,"").toLocaleLowerCase(),this._shortWeekdaysParse[s]=this.weekdaysShort(r,"").toLocaleLowerCase(),this._weekdaysParse[s]=this.weekdays(r,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(i=Ye.call(this._weekdaysParse,a))?i:null:"ddd"===t?-1!==(i=Ye.call(this._shortWeekdaysParse,a))?i:null:-1!==(i=Ye.call(this._minWeekdaysParse,a))?i:null:"dddd"===t?-1!==(i=Ye.call(this._weekdaysParse,a))?i:-1!==(i=Ye.call(this._shortWeekdaysParse,a))?i:-1!==(i=Ye.call(this._minWeekdaysParse,a))?i:null:"ddd"===t?-1!==(i=Ye.call(this._shortWeekdaysParse,a))?i:-1!==(i=Ye.call(this._weekdaysParse,a))?i:-1!==(i=Ye.call(this._minWeekdaysParse,a))?i:null:-1!==(i=Ye.call(this._minWeekdaysParse,a))?i:-1!==(i=Ye.call(this._weekdaysParse,a))?i:-1!==(i=Ye.call(this._shortWeekdaysParse,a))?i:null}.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),s=0;s<7;s++){if(i=y([2e3,1]).day(s),n&&!this._fullWeekdaysParse[s]&&(this._fullWeekdaysParse[s]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[s]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[s]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[s]||(r="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[s]=new RegExp(r.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[s].test(e))return s;if(n&&"ddd"===t&&this._shortWeekdaysParse[s].test(e))return s;if(n&&"dd"===t&&this._minWeekdaysParse[s].test(e))return s;if(!n&&this._weekdaysParse[s].test(e))return s}},yn.weekdaysRegex=function(e){return this._weekdaysParseExact?(m(this,"_weekdaysRegex")||Qe.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(m(this,"_weekdaysRegex")||(this._weekdaysRegex=qe),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},yn.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(m(this,"_weekdaysRegex")||Qe.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(m(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Je),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},yn.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(m(this,"_weekdaysRegex")||Qe.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(m(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Be),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},yn.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},yn.meridiem=function(e,t,n){return 11<e?n?"pm":"PM":n?"am":"AM"},ut("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===D(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),c.lang=n("moment.lang is deprecated. Use moment.locale instead.",ut),c.langData=n("moment.langData is deprecated. Use moment.localeData instead.",ht);var wn=Math.abs;function Mn(e,t,n,s){var i=jt(t,n);return e._milliseconds+=s*i._milliseconds,e._days+=s*i._days,e._months+=s*i._months,e._bubble()}function kn(e){return e<0?Math.floor(e):Math.ceil(e)}function Sn(e){return 4800*e/146097}function Dn(e){return 146097*e/4800}function Yn(e){return function(){return this.as(e)}}var On=Yn("ms"),Tn=Yn("s"),bn=Yn("m"),xn=Yn("h"),Pn=Yn("d"),Wn=Yn("w"),Cn=Yn("M"),Hn=Yn("Q"),Rn=Yn("y");function Un(e){return function(){return this.isValid()?this._data[e]:NaN}}var Fn=Un("milliseconds"),Ln=Un("seconds"),Nn=Un("minutes"),Gn=Un("hours"),Vn=Un("days"),En=Un("months"),In=Un("years");var An=Math.round,jn={ss:44,s:45,m:45,h:22,d:26,M:11};var Zn=Math.abs;function zn(e){return(0<e)-(e<0)||+e}function $n(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n=Zn(this._milliseconds)/1e3,s=Zn(this._days),i=Zn(this._months);t=S((e=S(n/60))/60),n%=60,e%=60;var r=S(i/12),a=i%=12,o=s,u=t,l=e,h=n?n.toFixed(3).replace(/\.?0+$/,""):"",d=this.asSeconds();if(!d)return"P0D";var c=d<0?"-":"",f=zn(this._months)!==zn(d)?"-":"",m=zn(this._days)!==zn(d)?"-":"",_=zn(this._milliseconds)!==zn(d)?"-":"";return c+"P"+(r?f+r+"Y":"")+(a?f+a+"M":"")+(o?m+o+"D":"")+(u||l||h?"T":"")+(u?_+u+"H":"")+(l?_+l+"M":"")+(h?_+h+"S":"")}var qn=Ht.prototype;return qn.isValid=function(){return this._isValid},qn.abs=function(){var e=this._data;return this._milliseconds=wn(this._milliseconds),this._days=wn(this._days),this._months=wn(this._months),e.milliseconds=wn(e.milliseconds),e.seconds=wn(e.seconds),e.minutes=wn(e.minutes),e.hours=wn(e.hours),e.months=wn(e.months),e.years=wn(e.years),this},qn.add=function(e,t){return Mn(this,e,t,1)},qn.subtract=function(e,t){return Mn(this,e,t,-1)},qn.as=function(e){if(!this.isValid())return NaN;var t,n,s=this._milliseconds;if("month"===(e=H(e))||"quarter"===e||"year"===e)switch(t=this._days+s/864e5,n=this._months+Sn(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(Dn(this._months)),e){case"week":return t/7+s/6048e5;case"day":return t+s/864e5;case"hour":return 24*t+s/36e5;case"minute":return 1440*t+s/6e4;case"second":return 86400*t+s/1e3;case"millisecond":return Math.floor(864e5*t)+s;default:throw new Error("Unknown unit "+e)}},qn.asMilliseconds=On,qn.asSeconds=Tn,qn.asMinutes=bn,qn.asHours=xn,qn.asDays=Pn,qn.asWeeks=Wn,qn.asMonths=Cn,qn.asQuarters=Hn,qn.asYears=Rn,qn.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*D(this._months/12):NaN},qn._bubble=function(){var e,t,n,s,i,r=this._milliseconds,a=this._days,o=this._months,u=this._data;return 0<=r&&0<=a&&0<=o||r<=0&&a<=0&&o<=0||(r+=864e5*kn(Dn(o)+a),o=a=0),u.milliseconds=r%1e3,e=S(r/1e3),u.seconds=e%60,t=S(e/60),u.minutes=t%60,n=S(t/60),u.hours=n%24,o+=i=S(Sn(a+=S(n/24))),a-=kn(Dn(i)),s=S(o/12),o%=12,u.days=a,u.months=o,u.years=s,this},qn.clone=function(){return jt(this)},qn.get=function(e){return e=H(e),this.isValid()?this[e+"s"]():NaN},qn.milliseconds=Fn,qn.seconds=Ln,qn.minutes=Nn,qn.hours=Gn,qn.days=Vn,qn.weeks=function(){return S(this.days()/7)},qn.months=En,qn.years=In,qn.humanize=function(e){if(!this.isValid())return this.localeData().invalidDate();var t,n,s,i,r,a,o,u,l,h,d,c=this.localeData(),f=(n=!e,s=c,i=jt(t=this).abs(),r=An(i.as("s")),a=An(i.as("m")),o=An(i.as("h")),u=An(i.as("d")),l=An(i.as("M")),h=An(i.as("y")),(d=r<=jn.ss&&["s",r]||r<jn.s&&["ss",r]||a<=1&&["m"]||a<jn.m&&["mm",a]||o<=1&&["h"]||o<jn.h&&["hh",o]||u<=1&&["d"]||u<jn.d&&["dd",u]||l<=1&&["M"]||l<jn.M&&["MM",l]||h<=1&&["y"]||["yy",h])[2]=n,d[3]=0<+t,d[4]=s,function(e,t,n,s,i){return i.relativeTime(t||1,!!n,e,s)}.apply(null,d));return e&&(f=c.pastFuture(+this,f)),c.postformat(f)},qn.toISOString=$n,qn.toString=$n,qn.toJSON=$n,qn.locale=Xt,qn.localeData=en,qn.toIsoString=n("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",$n),qn.lang=Kt,I("X",0,0,"unix"),I("x",0,0,"valueOf"),ue("x",se),ue("X",/[+-]?\d+(\.\d{1,3})?/),ce("X",function(e,t,n){n._d=new Date(1e3*parseFloat(e,10))}),ce("x",function(e,t,n){n._d=new Date(D(e))}),c.version="2.24.0",e=bt,c.fn=mn,c.min=function(){return Wt("isBefore",[].slice.call(arguments,0))},c.max=function(){return Wt("isAfter",[].slice.call(arguments,0))},c.now=function(){return Date.now?Date.now():+new Date},c.utc=y,c.unix=function(e){return bt(1e3*e)},c.months=function(e,t){return vn(e,t,"months")},c.isDate=d,c.locale=ut,c.invalid=p,c.duration=jt,c.isMoment=k,c.weekdays=function(e,t,n){return pn(e,t,n,"weekdays")},c.parseZone=function(){return bt.apply(null,arguments).parseZone()},c.localeData=ht,c.isDuration=Rt,c.monthsShort=function(e,t){return vn(e,t,"monthsShort")},c.weekdaysMin=function(e,t,n){return pn(e,t,n,"weekdaysMin")},c.defineLocale=lt,c.updateLocale=function(e,t){if(null!=t){var n,s,i=st;null!=(s=ot(e))&&(i=s._config),(n=new P(t=x(i,t))).parentLocale=it[e],it[e]=n,ut(e)}else null!=it[e]&&(null!=it[e].parentLocale?it[e]=it[e].parentLocale:null!=it[e]&&delete it[e]);return it[e]},c.locales=function(){return s(it)},c.weekdaysShort=function(e,t,n){return pn(e,t,n,"weekdaysShort")},c.normalizeUnits=H,c.relativeTimeRounding=function(e){return void 0===e?An:"function"==typeof e&&(An=e,!0)},c.relativeTimeThreshold=function(e,t){return void 0!==jn[e]&&(void 0===t?jn[e]:(jn[e]=t,"s"===e&&(jn.ss=t-1),!0))},c.calendarFormat=function(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"},c.prototype=mn,c.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},c});;/*!lazysizes - v5.2.0*/!function(a,b){var c=b(a,a.document,Date);a.lazySizes=c,"object"==typeof module&&module.exports&&(module.exports=c)}("undefined"!=typeof window?window:{},function(a,b,c){"use strict";var d,e;if(function(){var b,c={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",errorClass:"lazyerror",autosizesClass:"lazyautosizes",srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",minSize:40,customMedia:{},init:!0,expFactor:1.5,hFac:.8,loadMode:2,loadHidden:!0,ricTimeout:0,throttleDelay:125};e=a.lazySizesConfig||a.lazysizesConfig||{};for(b in c)b in e||(e[b]=c[b])}(),!b||!b.getElementsByClassName)return{init:function(){},cfg:e,noSupport:!0};var f=b.documentElement,g=a.HTMLPictureElement,h="addEventListener",i="getAttribute",j=a[h].bind(a),k=a.setTimeout,l=a.requestAnimationFrame||k,m=a.requestIdleCallback,n=/^picture$/i,o=["load","error","lazyincluded","_lazyloaded"],p={},q=Array.prototype.forEach,r=function(a,b){return p[b]||(p[b]=new RegExp("(\\s|^)"+b+"(\\s|$)")),p[b].test(a[i]("class")||"")&&p[b]},s=function(a,b){r(a,b)||a.setAttribute("class",(a[i]("class")||"").trim()+" "+b)},t=function(a,b){var c;(c=r(a,b))&&a.setAttribute("class",(a[i]("class")||"").replace(c," "))},u=function(a,b,c){var d=c?h:"removeEventListener";c&&u(a,b),o.forEach(function(c){a[d](c,b)})},v=function(a,c,e,f,g){var h=b.createEvent("Event");return e||(e={}),e.instance=d,h.initEvent(c,!f,!g),h.detail=e,a.dispatchEvent(h),h},w=function(b,c){var d;!g&&(d=a.picturefill||e.pf)?(c&&c.src&&!b[i]("srcset")&&b.setAttribute("srcset",c.src),d({reevaluate:!0,elements:[b]})):c&&c.src&&(b.src=c.src)},x=function(a,b){return(getComputedStyle(a,null)||{})[b]},y=function(a,b,c){for(c=c||a.offsetWidth;c<e.minSize&&b&&!a._lazysizesWidth;)c=b.offsetWidth,b=b.parentNode;return c},z=function(){var a,c,d=[],e=[],f=d,g=function(){var b=f;for(f=d.length?e:d,a=!0,c=!1;b.length;)b.shift()();a=!1},h=function(d,e){a&&!e?d.apply(this,arguments):(f.push(d),c||(c=!0,(b.hidden?k:l)(g)))};return h._lsFlush=g,h}(),A=function(a,b){return b?function(){z(a)}:function(){var b=this,c=arguments;z(function(){a.apply(b,c)})}},B=function(a){var b,d=0,f=e.throttleDelay,g=e.ricTimeout,h=function(){b=!1,d=c.now(),a()},i=m&&g>49?function(){m(h,{timeout:g}),g!==e.ricTimeout&&(g=e.ricTimeout)}:A(function(){k(h)},!0);return function(a){var e;(a=!0===a)&&(g=33),b||(b=!0,e=f-(c.now()-d),e<0&&(e=0),a||e<9?i():k(i,e))}},C=function(a){var b,d,e=99,f=function(){b=null,a()},g=function(){var a=c.now()-d;a<e?k(g,e-a):(m||f)(f)};return function(){d=c.now(),b||(b=k(g,e))}},D=function(){var g,m,o,p,y,D,F,G,H,I,J,K,L=/^img$/i,M=/^iframe$/i,N="onscroll"in a&&!/(gle|ing)bot/.test(navigator.userAgent),O=0,P=0,Q=0,R=-1,S=function(a){Q--,(!a||Q<0||!a.target)&&(Q=0)},T=function(a){return null==K&&(K="hidden"==x(b.body,"visibility")),K||!("hidden"==x(a.parentNode,"visibility")&&"hidden"==x(a,"visibility"))},U=function(a,c){var d,e=a,g=T(a);for(G-=c,J+=c,H-=c,I+=c;g&&(e=e.offsetParent)&&e!=b.body&&e!=f;)(g=(x(e,"opacity")||1)>0)&&"visible"!=x(e,"overflow")&&(d=e.getBoundingClientRect(),g=I>d.left&&H<d.right&&J>d.top-1&&G<d.bottom+1);return g},V=function(){var a,c,h,j,k,l,n,o,q,r,s,t,u=d.elements;if((p=e.loadMode)&&Q<8&&(a=u.length)){for(c=0,R++;c<a;c++)if(u[c]&&!u[c]._lazyRace)if(!N||d.prematureUnveil&&d.prematureUnveil(u[c]))ba(u[c]);else if((o=u[c][i]("data-expand"))&&(l=1*o)||(l=P),r||(r=!e.expand||e.expand<1?f.clientHeight>500&&f.clientWidth>500?500:370:e.expand,d._defEx=r,s=r*e.expFactor,t=e.hFac,K=null,P<s&&Q<1&&R>2&&p>2&&!b.hidden?(P=s,R=0):P=p>1&&R>1&&Q<6?r:O),q!==l&&(D=innerWidth+l*t,F=innerHeight+l,n=-1*l,q=l),h=u[c].getBoundingClientRect(),(J=h.bottom)>=n&&(G=h.top)<=F&&(I=h.right)>=n*t&&(H=h.left)<=D&&(J||I||H||G)&&(e.loadHidden||T(u[c]))&&(m&&Q<3&&!o&&(p<3||R<4)||U(u[c],l))){if(ba(u[c]),k=!0,Q>9)break}else!k&&m&&!j&&Q<4&&R<4&&p>2&&(g[0]||e.preloadAfterLoad)&&(g[0]||!o&&(J||I||H||G||"auto"!=u[c][i](e.sizesAttr)))&&(j=g[0]||u[c]);j&&!k&&ba(j)}},W=B(V),X=function(a){var b=a.target;if(b._lazyCache)return void delete b._lazyCache;S(a),s(b,e.loadedClass),t(b,e.loadingClass),u(b,Z),v(b,"lazyloaded")},Y=A(X),Z=function(a){Y({target:a.target})},$=function(a,b){try{a.contentWindow.location.replace(b)}catch(c){a.src=b}},_=function(a){var b,c=a[i](e.srcsetAttr);(b=e.customMedia[a[i]("data-media")||a[i]("media")])&&a.setAttribute("media",b),c&&a.setAttribute("srcset",c)},aa=A(function(a,b,c,d,f){var g,h,j,l,m,p;(m=v(a,"lazybeforeunveil",b)).defaultPrevented||(d&&(c?s(a,e.autosizesClass):a.setAttribute("sizes",d)),h=a[i](e.srcsetAttr),g=a[i](e.srcAttr),f&&(j=a.parentNode,l=j&&n.test(j.nodeName||"")),p=b.firesLoad||"src"in a&&(h||g||l),m={target:a},s(a,e.loadingClass),p&&(clearTimeout(o),o=k(S,2500),u(a,Z,!0)),l&&q.call(j.getElementsByTagName("source"),_),h?a.setAttribute("srcset",h):g&&!l&&(M.test(a.nodeName)?$(a,g):a.src=g),f&&(h||l)&&w(a,{src:g})),a._lazyRace&&delete a._lazyRace,t(a,e.lazyClass),z(function(){var b=a.complete&&a.naturalWidth>1;p&&!b||(b&&s(a,"ls-is-cached"),X(m),a._lazyCache=!0,k(function(){"_lazyCache"in a&&delete a._lazyCache},9)),"lazy"==a.loading&&Q--},!0)}),ba=function(a){if(!a._lazyRace){var b,c=L.test(a.nodeName),d=c&&(a[i](e.sizesAttr)||a[i]("sizes")),f="auto"==d;(!f&&m||!c||!a[i]("src")&&!a.srcset||a.complete||r(a,e.errorClass)||!r(a,e.lazyClass))&&(b=v(a,"lazyunveilread").detail,f&&E.updateElem(a,!0,a.offsetWidth),a._lazyRace=!0,Q++,aa(a,b,f,d,c))}},ca=C(function(){e.loadMode=3,W()}),da=function(){3==e.loadMode&&(e.loadMode=2),ca()},ea=function(){if(!m){if(c.now()-y<999)return void k(ea,999);m=!0,e.loadMode=3,W(),j("scroll",da,!0)}};return{_:function(){y=c.now(),d.elements=b.getElementsByClassName(e.lazyClass),g=b.getElementsByClassName(e.lazyClass+" "+e.preloadClass),j("scroll",W,!0),j("resize",W,!0),j("pageshow",function(a){if(a.persisted){var c=b.querySelectorAll("."+e.loadingClass);c.length&&c.forEach&&l(function(){c.forEach(function(a){a.complete&&ba(a)})})}}),a.MutationObserver?new MutationObserver(W).observe(f,{childList:!0,subtree:!0,attributes:!0}):(f[h]("DOMNodeInserted",W,!0),f[h]("DOMAttrModified",W,!0),setInterval(W,999)),j("hashchange",W,!0),["focus","mouseover","click","load","transitionend","animationend"].forEach(function(a){b[h](a,W,!0)}),/d$|^c/.test(b.readyState)?ea():(j("load",ea),b[h]("DOMContentLoaded",W),k(ea,2e4)),d.elements.length?(V(),z._lsFlush()):W()},checkElems:W,unveil:ba,_aLSL:da}}(),E=function(){var a,c=A(function(a,b,c,d){var e,f,g;if(a._lazysizesWidth=d,d+="px",a.setAttribute("sizes",d),n.test(b.nodeName||""))for(e=b.getElementsByTagName("source"),f=0,g=e.length;f<g;f++)e[f].setAttribute("sizes",d);c.detail.dataAttr||w(a,c.detail)}),d=function(a,b,d){var e,f=a.parentNode;f&&(d=y(a,f,d),e=v(a,"lazybeforesizes",{width:d,dataAttr:!!b}),e.defaultPrevented||(d=e.detail.width)&&d!==a._lazysizesWidth&&c(a,f,e,d))},f=function(){var b,c=a.length;if(c)for(b=0;b<c;b++)d(a[b])},g=C(f);return{_:function(){a=b.getElementsByClassName(e.autosizesClass),j("resize",g)},checkElems:g,updateElem:d}}(),F=function(){!F.i&&b.getElementsByClassName&&(F.i=!0,E._(),D._())};return k(function(){e.init&&F()}),d={cfg:e,autoSizer:E,loader:D,init:F,uP:w,aC:s,rC:t,hC:r,fire:v,gW:y,rAF:z}});;const nearByBranchApi="/api/v1/get-one-nearby-branch";const promotionsApi='/api/v1/web-promotions';const searchKey='fca2cd09af45d7872342a882f035a6e3';const nearbyOutletApi='/api/v1/near_by_outlets';const advertisementApi='/api/v1/get-advertisement';let storeQuery;let branchSelectorBranchId;const branchUrlByStoreCodeUrl='/api/v1/branch-url/';function isDeliveryPage(){return window.location.pathname==='/delivery-home-page'||window.location.pathname==='/delivery';}
(function($,Drupal){Drupal.behaviors.promotions={attach:function(context,settings){}};$(()=>{branchSelectorBranchId=localStorage.getItem('branch_id');if(localStorage.getItem('international')==1&&(isHomePage()||isDeliveryPage())){$.get({url:branchUrlByStoreCodeUrl+localStorage.getItem('branch_id'),headers:getHeaders(),success(data){window.location.href=data;}});}
if(branchSelectorBranchId){if(isHomePage()){selectedBranchId=branchSelectorBranchId;populateNearbyBranches=true;}
setContentBasedOnLocation(localStorage.getItem('branch_name'),branchSelectorBranchId,localStorage.getItem('city_name'));if(isHomePage()){updateContent();}}else{setGpsLocation();}
setBranchPromotions();});function setGpsLocation(){if(navigator.geolocation){navigator.geolocation.getCurrentPosition(setNearByBranch,narError,{enableHighAccuracy:false,maximumAge:0,timeout:2000});}}
function narError(error){if(isHomePage()){updateContent();}}
function updateContent(){getPromotions();getVouchers();getBranches();getAdvertisement();}
function setNearByBranch(position){$.ajax({url:nearByBranchApi,type:'POST',headers:getHeaders(),data:JSON.stringify({"lat":position.coords.latitude,"long":position.coords.longitude}),dataType:"json",success:function(data){if(!$.isEmptyObject(data)){setBranchInLocalStorage(data.branch_id,data.branch_name,data.city_name,data.international);setContentBasedOnLocation(data.branch_name,data.branch_id,data.city_name);if(isHomePage()){updateContent();}}}});}
function setContentBasedOnLocation(branch_name,branch_id,city_name){$('header .select-address-outlet #bbq-selected-branch, .header-left #bbq-selected-branch, #block-bbqlocationdropdown-7 #bbq-selected-branch, #block-bbqlocationdropdown-6 #bbq-selected-branch').text(branch_name+', '+city_name);$('header .select-address-outlet #bbq-location-select, .header-left #bbq-location-select, #block-bbqlocationdropdown-7 #bbq-location-select, #block-bbqlocationdropdown-6 #bbq-location-select').val(branch_id).trigger('change');$('header .select-address-outlet #bbq-location-select-delivery, .header-left #bbq-location-select-delivery, #block-bbqlocationdropdown-7 #bbq-location-select-delivery, #block-bbqlocationdropdown-6 #bbq-location-select-delivery').val(branch_id).trigger('change');}
function setBranchInLocalStorage(branch_id,branch_name,city_name,international=0){localStorage.setItem('branch_id',branch_id);localStorage.setItem('branch_name',branch_name);localStorage.setItem('city_name',city_name);localStorage.setItem('international',international);}
$('#bbq-location-card').click(function(){navigator.permissions.query({name:'geolocation'}).then(function(permissionStatus){if(permissionStatus.state=='granted'){localStorage.removeItem('branch_id');setGpsLocation();setTimeout(()=>{location.reload();},500);}else{alert('Please allow access to your location for us to get nearest branch');}});});$('.delivery__branch-location #bbq-branch-location').click(function(){$('.delivery__branch-location #bbq-branch-location').toggleClass('show');$('.delivery__branch-location #bbq-location-dropdown').toggleClass('show');});$('.header-left #bbq-branch-location').click(function(){$('.header-left #bbq-branch-location').toggleClass('show');$('.header-left #bbq-location-dropdown').toggleClass('show');});$('header .select-address-outlet #bbq-location-select, .header-left #bbq-location-select, header #block-bbqlocationdropdown-7 #bbq-location-select, #block-bbqlocationdropdown-6 #bbq-location-select').on('select2:select',function(e){var data=e.params.data;setBranchInLocalStorage(data.id,data.text,data.element.parentElement.label,data.element.getAttribute('data-international'));setContentBasedOnLocation(data.text,data.id,data.element.parentElement.label);const url=window.location.pathname;if(url.match('\/(restaurants)\/.[^\s]*')||data.element.getAttribute('data-international')==1){e.preventDefault();$.get({url:branchUrlByStoreCodeUrl+data.id,headers:getHeaders(),success(data){window.location.href=data;}});}else{$.ajax({url:'/api/v1/branches/'+data.id,type:'GET',headers:getHeaders(),success:function(data){if(!$.isEmptyObject(data)){localStorage.setItem('branch_latitude',data.latitude);localStorage.setItem('branch_longitude',data.longitude);location.reload();}else{location.reload();}}});}});function matchStart(params,data){if($.trim(params.term)===''){return data;}
if(typeof data.children==='undefined'){return null;}
var filteredChildren=[];$.each(data.children,function(idx,child){if(child.text.toUpperCase().indexOf(params.term.toUpperCase())==0){filteredChildren.push(child);}});if(filteredChildren.length){var modifiedData=$.extend({},data,true);modifiedData.children=filteredChildren;return modifiedData;}
return null;}
$("#block-bbqlocationdropdown-6 #bbq-location-select-delivery, .header-left #bbq-location-select-delivery ").select2({placeholder:'Select Location',matcher:matchBranch});$("#block-bbqlocationdropdown-6 .location--select, .header-left #bbq-location-select").select2({placeholder:'Select Location',matcher:matchBranch});function matchBranch(params,data){if($.trim(params.term)===''){return data;}
if(typeof data.children==='undefined'){return null;}
if(data.text.toUpperCase().indexOf(params.term.toUpperCase())>-1){return $.extend({},data,true);}
const filteredChildren=[];$.each(data.children,function(idx,child){if(child.text.toUpperCase().indexOf(params.term.toUpperCase())>-1){filteredChildren.push(child);}});if(filteredChildren.length){const modifiedData=$.extend({},data,true);modifiedData.children=filteredChildren;return modifiedData;}
return null;}
$(document).mouseup(function(e){var location=$('#bbq-location-block');if(!location.is(e.target)&&location.has(e.target).length===0){$('#bbq-location-dropdown').removeClass('show');$('#bbq-branch-location').removeClass('show');}else
$('.select2-search__field').click(function(){$('#bbq-location-dropdown').addClass('show');$('#bbq-branch-location').addClass('show');});});$('.branch__info .addtoany_share').append('<span>Share</span>');function getPromotions(){storeQuery=localStorage.getItem('branch_id')?'?branch_id='+localStorage.getItem('branch_id'):'';$.get({url:promotionsApi+storeQuery,headers:getHeaders(),success(data){if(data.featured_web_promotions.length){heroPromotions(data.featured_web_promotions);}
if(data.web_promotions.length){teaserPromotions(data.web_promotions);teaserPromotionsNew(data.web_promotions);}}});}
function heroPromotions(data){let promotionHtml='';promotionHtml=`<div class="card-carousel" >`;data.forEach((promotion)=>{if(promotion.variant==='SIDEBAR'){promotionHtml+=sidebarVariant(promotion.variant,promotion.sub_variant,promotion.hero_text_one,promotion.hero_text_two,promotion.cta_label,promotion.cta_link,promotion.hero_banner);}else{promotionHtml+=gradientVariant(promotion.variant,promotion.sub_variant,promotion.hero_text_one,promotion.hero_text_two,promotion.cta_label,promotion.cta_link,promotion.hero_banner);}});promotionHtml+=`</div>`;$("#homepage-hero-promotions").html(promotionHtml);$('.card-carousel').not('.slick-initialized').slick({infinite:true,slidesToShow:1,slidesToScroll:1,dots:true,arrows:false,fade:true,speed:1000,autoplay:true,});}
function teaserPromotions(data){let promotionHtml='';$(window).resize(function(){if($(window).width()<=640){promotionHtml=promotionTeasersHeader();promotionHtml+=`<div class="events-carousel bbq-event-mobile">`;data.forEach((promotion)=>{promotionHtml+=promotionTeasers(promotion.title,promotion.teaser_text_one,promotion.teaser_text_two,promotion.promotion_url,promotion.teaser_banner,promotion.teaser_banner_alt);});promotionHtml+=`</div>`;$("#homepage-promotions").html(promotionHtml);}else{promotionHtml=promotionTeasersHeader();promotionHtml+=`<div class="events-carousel">`;data.forEach((promotion)=>{promotionHtml+=promotionTeasers(promotion.title,promotion.teaser_text_one,promotion.teaser_text_two,promotion.promotion_url,promotion.teaser_banner,promotion.teaser_banner_alt);});promotionHtml+=`</div>`;$("#homepage-promotions").html(promotionHtml);$('.events-carousel').not('.slick-initialized').slick({infinite:true,slidesToShow:4,slidesToScroll:1,dots:true,responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:1,mobileFirst:true,}},{breakpoint:680,settings:{slidesToShow:2,slidesToScroll:1,mobileFirst:true,}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1,variableWidth:true}}]});$('.slick-track .slick-slide .events--card').parent('div').addClass('slick-item');}}).resize();}
function teaserPromotionsNew(data){let promotionHtml='';promotionHtml+=`<div class="image-carousel">`;data.forEach((promotion)=>{promotionHtml+=promotionTeasersNew(promotion.promotion_url,promotion.teaser_banner,promotion.teaser_banner_alt);});promotionHtml+=`</div>`;$("#homepage-promotions-new").html(promotionHtml);$('.image-carousel').not('.slick-initialized').slick({infinite:true,slidesToShow:4,slidesToScroll:1,dots:false,arrows:true,autoplay:true,speed:1000,responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:1,mobileFirst:true,}},{breakpoint:680,settings:{slidesToShow:2,slidesToScroll:1,mobileFirst:true,}},{breakpoint:480,settings:{slidesToShow:2,slidesToScroll:1,rows:1,arrows:false,variableWidth:true,}}]});$('.slick-track .slick-slide .card-item').parent('div').addClass('delivery-slick-item');}
function sidebarVariant(variant,subVariant,heroTextOne,heroTextTwo,cta,ctaLink,banner){return `<div>
            <div class="card card--variant-${variant} card--subvar-${subVariant}">
              <div class= "card-details" >
                <div class="card-title">
                  ${heroTextOne}
                </div>
                <div class="card-price">
                    ${heroTextTwo}
                </div>
                <div class="card-cta">
                  <a href="${ctaLink}">
                    ${cta}
                  </a>
                </div>
              </div>
              <div class="card-image">
                <img class="lazyload" data-src="${banner}" alt="${heroTextOne} ${heroTextTwo}">
              </div>
            </div>
          </div>`;}
function gradientVariant(variant,subVariant,heroTextOne,heroTextTwo,cta,ctaLink,banner){return `<div>
          <div class="card card--variant-${variant} card--subvar-${subVariant}">
            <div class= "card-details" >
              <div class="card-details--left">
                <div class="card-price">
                  ${heroTextOne}
                </div>
                <div class="card-title">
                  ${heroTextTwo}
                </div>
              </div>
              <div class="card-details--right">
                  <div class="card-cta">
                    <a href="${ctaLink}" id="promotion--banner-booknow">
                      ${cta}
                    </a>
                  </div>
              </div>
            </div >
            <div class="card-image">
              <img class="lazyload" data-src="${banner}" alt="${heroTextOne} ${heroTextTwo}">
            </div>
          </div>
        </div>`;}
function promotionTeasers(name,teaserTextOne,teaserTextTwo,url,banner,alt){return `
            <div class="events--card" onclick = "window.location = '${url}'">
            <div class="events--card-details">
              <div class="events--card-details--title">
                ${name}
              </div>
              <div class="events--card-details--bottom">
              ${teaserTextOne}
              </div>
              <div class="events--card-details--description">
                ${teaserTextTwo}
              </div>
              <div class="events--card-details--link">
                <a href="${url}" title="">
                  READ MORE
                  <span class="viewMore"></span>
                </a>
              </div>
            </div>
            <div class="events--card-image">
              <img class="lazyload" data-src="${banner}" alt="${alt}">
            </div>
          </div>`;}
function promotionTeasersHeader(){return `<div class="layout--header row space-between align-center">
                <div class="layout--header-title">
                  What’s On BBQN
                </div>
                <div class="layout--header-link">
                  <a class="row align-center" href="/promotions" title="">
                    View all
                    <span class="viewMore"></span>
                  </a>
                </div>
              </div>`;}
function promotionTeasersNew(url,banner,alt){return `<div class="card-item" onclick = "window.location = '${url}'">
      <img class="lazyload" data-src="${banner}" alt="${alt}">
  </div>
  <div class="card-item" onclick = "window.location = '${url}'">
      <img class="lazyload" data-src="${banner}" alt="${alt}">
  </div>
  <div class="card-item" onclick = "window.location = '${url}'">
      <img class="lazyload" data-src="${banner}" alt="${alt}">
  </div>
  `;}
function getVouchers(){storeQuery=localStorage.getItem('branch_id')?'?branchId.equals='+localStorage.getItem('branch_id'):'';$.get({url:voucherListingUrl+storeQuery,headers:getHeaders(),success(data){if(data.content){homepageVouchers(data.content);}}});}
function homepageVouchers(data){let vouchersHtml='';vouchersHtml=vouchersHeader();vouchersHtml+=`<div class="vouchers-carousel">`;data.forEach((voucher)=>{vouchersHtml+=vouchers(voucher.voucher_id,voucher.voucher_url,voucher.voucher_name,voucher.currency_code,voucher.price,voucher.voucher_banner);});vouchersHtml+=`</div>`;$("#homepage-gift-vouchers").html(vouchersHtml);$(".vouchers-carousel").not('.slick-initialized').slick({slidesToShow:3,slidesToScroll:1,dots:true,loop:false,infinite:false,responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:1,mobileFirst:true,}},{breakpoint:680,settings:{slidesToShow:2,slidesToScroll:2,rows:1,mobileFirst:true,}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1,rows:1,variableWidth:true,}}]});$('.voucher--details .button--atc').click(function(e){e.preventDefault();$(this).next().show();$(this).hide();});}
function vouchers(voucher_id,voucher_url,voucher_name,currency_code,price,voucher_banner){return `<article id="${voucher_id}">
                        <div class="voucher">
                            <div class="voucher--details">
                              <div class="voucher--details-title">
                                <a href="${voucher_url}">
                                  ${voucher_name}
                                </a>
                              </div>
                              <div class="voucher--details-price">${getCurrencyCode(currency_code)}${price.toLocaleString("en")}</div>
                              <div class="voucher--details-cta atc">
                                <a id="add-to-cart-${voucher_id}" class="button button--atc">Buy Now</a>
                                <div class="card__footer__form-wrap">
                                  <div class="form form--atc">
                                    <div class="value-button decrease-item">-</div>
                                      <input type="text" class="voucher-quantity-${voucher_id} number" value="0" readonly/>
                                    <div class="value-button increase-item">+</div>
                                  </div>
                                </div>
                              </div>
                            </div>
                            <div class="voucher--image">
                              <img class="lazyload" data-src="${voucher_banner}" alt="Voucher - ${voucher_name}">
                            </div>
                        </div>
                      </article>`;}
function vouchersHeader(){return `<div class="layout--header row space-between align-center">
                <div class="layout--header-title">
                  Happiness Card For You
                </div>
                <div class="layout--header-link">
                  <a class="row align-center" href="/vouchers" title="">
                    View all
                    <span class="viewMore"></span>
                  </a>
                </div>
              </div>`;}
function getBranches(){storeQuery=localStorage.getItem('branch_id')?'?store_code='+localStorage.getItem('branch_id'):'';$.get({url:nearbyOutletApi+storeQuery+'&web_only=1',headers:getHeaders(),success(data){if(!$.isEmptyObject(data)){nearbyOutlets(data);}}});}
function nearbyOutlets(data){let outletsHtml='';outletsHtml=outletsHeader();outletsHtml+=`<div class="nearbyOutlets--block row align-center space-evenly">
           <div class="nearbyOutlets-carousel">`;data.forEach((outlet)=>{outletsHtml+=outletData(outlet.branch_name,outlet.address,outlet.link,outlet.latitude,outlet.longitude,outlet.image);});outletsHtml+=`</div></div>`;$("#bbq-nearby-outlets").html(outletsHtml);$('.nearbyOutlets-carousel').not('.slick-initialized').slick({infinite:true,slidesToShow:3,slidesToScroll:1,dots:true,responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:1,mobileFirst:true,}},{breakpoint:680,settings:{slidesToShow:2,slidesToScroll:1,mobileFirst:true,}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1,variableWidth:true}}]});}
function outletData(branchName,address,link,latitude,longitude,image){return `<div><div class="nearbyOutlets--card">
                <div class="nearbyOutlets--card-details">
                  <div class="nearbyOutlets--card-details--location">
                    ${branchName}
                  </div>
                  <div class="nearbyOutlets--card-details--address">
                    ${address}
                  </div>
                  <div class="nearbyOutlets--card-details--options">
                    <ul class="row">
                      <li>
                        <a href="${link}#offers">
                          <img class="lazyload" data-src="/themes/custom/bbq_nation/assets/images/offer.svg" alt="">
                          <span>What's On BBQN</span>
                        </a>
                      </li>
                      <li>
                        <a href="${link}#s-branch-menu-tab">
                          <img class="lazyload" data-src="/themes/custom/bbq_nation/assets/images/menu01.svg" alt="">
                          <span>Menu</span>
                        </a>
                      </li>
                      <li>
                        <a href="https://www.google.com/maps?z=12&t=m&q=loc:${latitude}+${longitude}" target="_blank">
                          <img class="lazyload" data-src="/themes/custom/bbq_nation/assets/images/map.svg" alt="">
                          <span>Map</span>
                        </a>
                      </li>
                    </ul>
                  </div>
                  <div class="nearbyOutlets--card-details--link">
                    <a href="${link}" title="">
                      Explore
                      <span class="viewMore"></span>
                    </a>
                  </div>
                  <div class="nearbyOutlets--card-details--cta">
                    <a href="${link}" title="">
                      Reserve table
                    </a>
                  </div>
                </div>
                <div class="nearbyOutlets--card-image">
                  <img class="lazyload" data-src="${image}" alt="Restaurant in ${branchName}">
                </div>
              </div></div>`;}
function outletsHeader(){return `<div class="nearbyOutlets--content">
                  <div class="nearbyOutlets--content-title">
                    Explore Nearby Restaurants
                  </div>
                  <div class="nearbyOutlets--content-description">
                    Explore BBQ Restaurants near your Neighbourhood and enjoy our latest cuisines with our exlusive offers and coupons...
                  </div>
                  <div class="nearbyOutlets--content-link">
                    <a href="/restaurants" id="view--all-restaurants">
                      View all locations
                      <span class="viewMore"></span>
                    </a>
                  </div>
                </div>`;}
function getAdvertisement(){storeQuery=localStorage.getItem('branch_id')?'?store_code='+localStorage.getItem('branch_id'):'';$.get({url:advertisementApi+storeQuery,headers:getHeaders(),success(data){if(!$.isEmptyObject(data)){getLocationBasedAdvertisement(data);}}});}
function getLocationBasedAdvertisement(data){let outletsHtml='';outletsHtml=`<div class="custom-advertisment-mobile">
                      <h2>${data.advertisement_title}</h2>
                      <div class="field-advertisement-image image">
                        <img src="${data.advertisement_image}" alt="${data.advertisement_image_alt_text}">
                      </div>
                      <div class="field-link link"><a href="${data.advertisement_link}">${data.advertisement_link}</a></div>
                    </div>`;$("#bbq-advertisement").html(outletsHtml);}
function setBranchPromotions(){const branchId=$('#branch-id');if(branchId.length>0){storeQuery='?branch_id='+branchId.val();$.get({url:promotionsApi+storeQuery,headers:getHeaders(),success(data){if(data.web_promotions.length){branchPromotions(data.web_promotions);}}});}}
function branchPromotions(data){let promotionHtml='';promotionHtml=promotionTeasersHeader();promotionHtml+=`<div class="events-carousel">`;data.forEach((promotion)=>{promotionHtml+=promotionTeasers(promotion.title,promotion.teaser_text_one,promotion.teaser_text_two,promotion.promotion_url,promotion.teaser_banner,promotion.teaser_banner_alt);});promotionHtml+=`</div>`;$("#bbq-branch-promotions").html(promotionHtml);$('.events-carousel').slick({infinite:true,slidesToShow:4,slidesToScroll:1,dots:true,responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:1,mobileFirst:true,}},{breakpoint:680,settings:{slidesToShow:2,slidesToScroll:1,mobileFirst:true,}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1,variableWidth:true}}]});$('.slick-track .slick-slide .events--card').parent('div').addClass('slick-item');}
$(document).on('click','#header--todaysmenu',(e)=>{if(branchSelectorBranchId&&branchSelectorBranchId.length>0){e.preventDefault();$.get({url:branchUrlByStoreCodeUrl+branchSelectorBranchId,headers:getHeaders(),success(data){window.location.href=data+'#s-branch-menu-tab';}});}});})(jQuery,Drupal);;(function($,Drupal,drupalSettings){Drupal.behaviors.bbqSignin={attach:function(context,settings){$(context).find("#countdown").once("bbqtimerload").each(function(){startTimer();});$(context).find(".signin").once("bbqtoastrmsg").each(function(){toastr_message();});if($.cookie('Drupal.visitor.social_token_stored')){$('.button--signin').once('bbqclicklogin').trigger('click');$("#form--item-name").show();$(".sign-in").hide();$(".sign-up").hide();$(".sign__social").hide();}
if($.cookie('Drupal.visitor.social_login_success')){toastr_message();$.removeCookie('Drupal.visitor.social_login_success',{path:'/'});}}};$(()=>{$('.social-auth:first-child').addClass('social-login-fb');$('.social-auth:nth-child(2)').addClass('social-login-google');$('.social-auth:nth-child(3)').addClass('social-login-insta');});$(document).on('click','.verify_submit',function(){if(($.cookie('Drupal.visitor.social_token_stored'))){$.removeCookie("Drupal.visitor.social_token_stored");$.removeCookie('Drupal.visitor.social_token_stored',{path:'/'});}});$(document).on('click','#sign-up',function(){$("#form--item-name").show();$(".sign-in").show();$(".sign-up").hide();validLoginSignUpSubmitButton();});$(document).on('click','#sign-in',function(){$("#form--item-name").hide();$(".sign-in").hide();$(".sign-up").show();validLoginSignUpSubmitButton();});$(document).on('click','#close-popup',function(){setTimeout(function(){$.removeCookie("Drupal.visitor.error_msg");$.removeCookie("Drupal.visitor.success_msg");$.removeCookie("Drupal.visitor.bbq_user_exist");$.removeCookie("Drupal.visitor.social_token_stored");$.removeCookie('Drupal.visitor.error_msg',{path:'/'});$.removeCookie('Drupal.visitor.success_msg',{path:'/'});$.removeCookie('Drupal.visitor.bbq_user_exist',{path:'/'});$.removeCookie('Drupal.visitor.social_token_stored',{path:'/'});},1);$('.ui-button-icon').trigger('click');});$(document).on('click','#social-fb-login',function(){$('.social-login-fb img').trigger('click');Moengage.add_user_attribute("ATTRIBUTE_NAME_1","Facebook Login");});$(document).on('click','#social-insta-login',function(){$('.social-login-insta img').trigger('click');Moengage.add_user_attribute("ATTRIBUTE_NAME_1","Insta Login");});$(document).on('click','#social-google-login',function(){$('.social-login-google img').trigger('click');});$(document).on('click','.resend-user-otp',function(){var obj={};obj['country_code']=$('.mobile--country-code .form-item-step2-country-code .form-select option:selected').val();obj['mobile_number']=$('.mobile--country-code .form-item-step2-mobile-number .form-text').val();obj['otp_id']=$('.otp-id .form-item-otp-id .form-number').val();$(this).addClass('resend-otp-once')
ResendOtp(obj);});function startTimer(){var presentTime=document.getElementById('countdown').innerHTML;var timeArray=presentTime.split(/[:]+/);var m=timeArray[0];var s=checkSecond((timeArray[1]-1));if(s==59){m=m-1}
if(m<0){m=0;s=0;}
document.getElementById('countdown').innerHTML=m+':'+s;setTimeout(startTimer,1000);}
function checkSecond(sec){if(sec<10&&sec>=0){sec='0'+sec};if(sec<0){sec='59'};return sec;}
function toastr_message(){if($.cookie('Drupal.visitor.bbq_user_exist')){$('#close-popup').trigger('click');}
if($.cookie('Drupal.visitor.error_msg')){var error_msg=$.cookie("Drupal.visitor.error_msg");const mobileNumber=$('.login-customer-mobile-number').val();console.info(mobileNumber);if(error_msg){toastr.error(error_msg);Moengage.track_event("Login_Home",{"Login_Type":'Failure - '+error_msg,});$.removeCookie('Drupal.visitor.error_msg',{path:'/'});$.removeCookie("Drupal.visitor.error_msg");}}
if($.cookie('Drupal.visitor.success_msg')){var success_msg=$.cookie("Drupal.visitor.success_msg");$.removeCookie('Drupal.visitor.success_msg',{path:'/'});switch(success_msg){case 'SignUp Successful':toastr.success(success_msg);$('.signin__form-wrapper').hide();$('.signin__success').show();$.removeCookie("Drupal.visitor.social_token_stored");$.removeCookie('Drupal.visitor.social_token_stored',{path:'/'});$('.ui-button-icon').trigger('click');Moengage.add_mobile(localStorage.getItem('mobile_number'));Moengage.add_email(localStorage.getItem('email'));Moengage.track_event("Login_Home",{"Mobile":localStorage.getItem('mobile_number'),"Login_Type":localStorage.getItem('email'),"Success":localStorage.getItem('mobile_number'),});location.reload();$.removeCookie("Drupal.visitor.success_msg");break;case 'Login Successful':toastr.success(success_msg);$.removeCookie("Drupal.visitor.social_token_stored");$.removeCookie('Drupal.visitor.social_token_stored',{path:'/'});$.removeCookie("Drupal.visitor.success_msg");$('.ui-button-icon').trigger('click');Moengage.add_mobile(localStorage.getItem('mobile_number'));Moengage.track_event("Login_Home",{"Mobile":localStorage.getItem('mobile_number'),"Login_Type":localStorage.getItem('email'),"Success":localStorage.getItem('mobile_number'),});location.reload();break;case 'Otp Sent':toastr.success(success_msg);$.removeCookie("Drupal.visitor.success_msg");break;default:break;}}}
function ResendOtp(obj){$.ajax({url:"/api/v1/generate-otp",data:JSON.stringify(obj),type:'POST',headers:getHeaders(),contentType:"application/json; charset=utf-8",dataType:"json",success:function(result){},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");toastr.error(err.fieldErrors[0].message);}});}
$(document).on('input','.sign-up-customer-name',(e)=>{const regex=new RegExp("^[a-zA-Z ]+$");const input=e.currentTarget.value;if(regex.test(input)){validLoginSignUpSubmitButton();return true;}
e.preventDefault();validLoginSignUpSubmitButton();e.currentTarget.value=input.substring(0,input.length-1);return false;});$(document).on('input','.login-customer-mobile-number',()=>{validLoginSignUpSubmitButton();});$(document).on('DOMSubtreeModified','#drupal-modal',()=>{validLoginSignUpSubmitButton();});function validLoginSignUpSubmitButton(){let nameStatus;if($('#form--item-name').is(':visible')){const name=$('.sign-up-customer-name').val();Moengage.add_first_name(name);if(name){nameStatus=true;}else{nameStatus=false;}}else{nameStatus=true;}
let mobileNumberStatus;const mobileNumber=$('.login-customer-mobile-number').val();Moengage.add_mobile(mobileNumber);if(mobileNumber&&mobileNumber.length>6){mobileNumberStatus=true;}else{mobileNumberStatus=false;}
if(nameStatus&&mobileNumberStatus){enableLoginSignUpButton();}else{disableLoginSignUpButton();}}
$(document).on('input','.login-sign-up-otp-input-field',(e)=>{const otp=e.currentTarget.value;if(otp&&otp.length===6){enableOtpSubmitButton();}else{disableOtpSubmitButton();}});function disableOtpSubmitButton(){$('.login-sign-up-otp-submit-button').addClass('anchor-disabled');}
function enableOtpSubmitButton(){$('.login-sign-up-otp-submit-button').removeClass('anchor-disabled');}
function disableLoginSignUpButton(){$('.login-sign-up-submit-button').addClass('anchor-disabled');}
function enableLoginSignUpButton(){$('.login-sign-up-submit-button').removeClass('anchor-disabled');}})(jQuery,Drupal,drupalSettings);;const userApi="/api/v1/user";const cartApi="/api/v1/cart-count";(function($,Drupal){Drupal.behaviors.notifications={attach:function(context,settings){},};$(()=>{if(!isAnonymous()){$.get({url:userApi,headers:getHeaders(),success(data){setProfile(data);cartCount(data.cart_count);},});}
if(isAnonymous()){if(localStorage.getItem("orderId")!=null){$.get({url:cartApi+"?order_id="+localStorage.getItem("orderId"),headers:getHeaders(),success(data){cartCount(data);},});}}});function cartCount(data){$("#cart-count").html(data);}
function setProfile(data){$(".bbq-mega-profile-name").html(data.name);$("#bbq-profile-name").html(data.name);$("#bbq-reward-points").html(data.bbq_points);$(".bbq-mega-reward-points").html(data.bbq_points);$("#notifications-count").html(data.notification_count);}})(jQuery,Drupal);;const REQUEST_METHODS={POST:'POST',GET:'GET',PUT:'PUT',};const booking_info={price:0,bbqn_smiles_final:'no',bbqn_smiles_explored:'no',happiness_card:null,happiness_card_explored:'no',coupon:null,coupon_explored:'no',reservationDate:null,};const PROPS={CURRENCY_CODE:getCurrencyCode(),COUPON_TYPE:'GIFT_COUPON',VOUCHER_TYPE:'GIFT_VOUCHER',DEFAULT_CURRENCY:'INR',VOUCHER_CODE:'GV',COUPON_CODE:'GC',TOTAL_QUANTITY:0,TOTAL_AMOUNT:0,HIDE_LOYALTY_BLOCK:false,ADVANCE_AMOUNT_PAID:0,ADDITIONAL_DISCOUNTS:0,BOOKING_TOTAL:0,NET_PAYABLE:0,SUB_TOTAL:0,REMOVED_PAX_AMOUNT:0,GST_BASE_AMOUNT:0,CGST_AMOUNT:0,SGST_AMOUNT:0,CGST_PER:0,SGST_PER:0,CESS:0,SERVICE_CHARGE:0,VAT_AMOUNT:0,ADDITIONAL_TAXES:0,TAX_AMOUNT:0};const URL={GET_BILLING_DETAILS:'/api/v1/bookings/bill-details/',GET_NEARBY_BRANCHES:'/api/v1/slots',GET_ALL_BRANCHES:'/api/v1/get-all-nearby-branches',GET_BRANCH_BY_ID:(branchId)=>"/api/v1/branches/"+branchId,BUFFET_LIST:'/api/v1/menu-buffet-price',VERIFY_VOUCHERS_ON_RESERVATION:'/api/v1/verify-reservation-vouchers',VERIFY_CORPORATE:'/api/v1/verify-corporates',VERIFY_EMAIL_OTP:'/api/v1/verifyotp',CREATE_BOOKING:'/api/v1/bookings',CREATE_BOOKING_RAZORPAY_ORDER:'/api/v1/bookings/generate-rp-order',GET_OCCASION_JOINED_BY:'/api/v1/get-occasion-joined-by-master',UPDATE_OCCASION_JOINED_BY_SPECIAL_INSTRUCTIONS:'/api/v1/bookings/special-instructions',GET_CORPORATE_OFFERS:'/api/v1/corporate-vouchers',GET_LOYALTY_EXCHANGE_RATE:'/api/v1/loyalty-points-value',GOOGLE_MAPS:'http://maps.google.com/maps?daddr=',BOOKING_RESCHEDULE:'/api/v1/bookings/reschedule',VOUCHER_COUPONS_BASE:'/api/v1/vouchers?transaction_type=BOOKING&voucher_type=',RESERVATION_RULES:'/api/v1/reservation/reservation-rules',UPDATE_ADV_RES_PAYMENT:'/api/v1/reservation/update-adv-res-payment',USER_VOUCHERS:function(){return this.VOUCHER_COUPONS_BASE+PROPS.VOUCHER_CODE;},USER_COUPONS:function(){return this.VOUCHER_COUPONS_BASE+PROPS.COUPON_CODE;}};const TYPE={GET_BILLING_DETAILS:'GET_BILLING_DETAILS',};let preferredBranch;let branchList=[];const singleBranchConstant='SINGLE_BRANCH';const allBranchesConstant='ALL_BRANCHES';const buffetConstant='BUFFET';const menuConstant='MENU';const branchMenuConstant='BRANCH_MENU';const corporateVerificationConstant='VERIFY_CORPORATE';const corporateEmailOtpVerificationConstant='VALIDATE_CORPORATE_EMAIL_OTP';const showVouchersConstant='SHOW_VOUCHERS_CONSTANT';const showCouponsConstant='SHOW_COUPONS_CONSTANT';const applyCouponsConstant='APPLY_COUPONS_CONSTANT';const createBookingConstant='CREAT_BOOKING';const createBookingWithAdvanceConstant='CREAT_BOOKING_WITH_ADVANCE';const payAdvanceAmountConstant='PAY_ADVANCE';const checkAdvanceAmountBranchConstant='CHECK_ADVANCE_BRANCH';const updateAdvanceResPaymentConstant='UPDATE_ADV_RES_PAYMENT';const updateAdvanceResPaymentOnCompleteConstant='UPDATE_ADV_RES_PAYMENT_ON_COMPLETE';const payAdvanceAmountBranchConstant='PAY_ADVANCE_BRANCH';const updateBookingConstant='UPDATE_BOOKING';const completeBookingConstant='COMPLETE_BOOKING';const completeBookingWithAdvanceConstant='COMPLETE_BOOKING_WITH_ADVANCE';const getOccasionJoinedByConstant='OCCASION_JOINED_BY_CONSTANT';const updateSpecialInstructionsConstant='UPDATE_SPECIAL_INSTRUCTIONS_CONSTANT';const corporateOffersConstant='GET_CORPORATE_OFFERS';const getLoyaltyExchangeRateUrlConstant='GET_LOYALTY_EXCHANGE_RATE';const reservationRulesConstant='RESERVATION_RULES';const razorPayApiKey='rzp_live_woEpCznOt0mINU';let isCorporatePageActive=false;let loyaltyPointsApplied;let loyaltyDiscountApplied;let applyLoyaltyPoints=false;let loyaltyPoints;let loyaltyExchangeRate;let selectedBranchId;let selectedBranchName;let selectedDiningType;let selectedSlotId;let selectedSlotName;const todayDate=moment();const tomorrowDate=moment().add(1,'days');let selectedReservationDate=todayDate.clone();let menuList;let buffetList;let multiKidsPack=false;let menuId;let bookingList=new Map();let orderList=new Map();let buffetCurrency;let corporateEmail;let corporateOtpId;let corporateVerified=false;let corporateCouponList=new Map();let couponList=new Map();let voucherList=new Map();let appliedCorporateCoupon;let appliedCoupon;let couponUsed;let appliedVouchers=[];let populateNearbyBranches;let advancePaymentDetails;let advanceTransactionDetails;let advanceBookingData;let specialInstructionsBuilt=false;let bookingId;let billAmount;let currency;let advanceAmount;let selectedReservationTime;let voucherDiscountApplied;let noOfVoucherDiscountAppliedWithPax;let voucherDiscountAppliedWithPax;let couponDiscountApplied;let rescheduledBookingId;let rescheduledBranchId;let bookingData;let branchDetailSelectedBranchId;let branchDetailSelectedReservationDate=todayDate.clone();let branchDetailSelectedSlotId;let branchDetailSelectedReservationTime;let branchDetailSelectedDiningType;let branchDetailSelectedSlotName;const branchSlotConstant="BRANCH_SLOT_CONSTANT";const branchSlotCapacityConstant="BRANCH_SLOT_CAPACITY_CONSTANT";const branchMenu='BRANCH_MENU';const bookingMenu='BOOKING_MENU';const lunchConstant='LUNCH';const dinnerConstant='DINNER';(function($,Drupal){Drupal.behaviors.bbqBooking={attach:function(context,settings){userId=settings.user.uid;}};class CreateBooking{constructor(){this.booking_id=rescheduledBookingId;this.branch_id=selectedBranchId;this.slot_id=selectedSlotId;this.reservation_time=selectedReservationTime;this.reservation_date=getFormattedReservationDate(selectedReservationDate);this.booking_details=Array.from(bookingList.values());this.voucher_details=getVoucherDetails();this.loyalty_points=applyLoyaltyPoints?Math.ceil(loyaltyPointsApplied):undefined;this.reservation_type_id=4;this.voucher_meal_discount=calculateVoucherMealDiscount();}}
class BillingDetails{constructor(billingDetails){this.id=billingDetails.id;this.bookingId=billingDetails.booking_id;this.bookingStatus=billingDetails.booking_status;this.advanceAmount=billingDetails.advance_amount;this.currency=billingDetails.currency;this.mobileNumber=billingDetails.mobile_number;this.countryCode=billingDetails.country_code;this.title=billingDetails.title;this.customerName=billingDetails.customer_name;this.branchId=billingDetails.branch_id;this.slotId=billingDetails.slot_id;this.reservationDate=billingDetails.reservation_date;this.createdDate=billingDetails.created_date;this.modifiedDate=billingDetails.modified_date;this.createdBy=billingDetails.created_by;this.modifiedBy=billingDetails.modified_by;this.billWithoutTax=billingDetails.bill_without_tax;this.serviceCharge=billingDetails.service_charge;this.serviceChargeAmount=billingDetails.service_charge_amount;this.reservationTime=billingDetails.reservation_time;this.loyaltyPointsAmount=billingDetails.loyalty_points_amount;this.loyaltyPoints=billingDetails.loyalty_points;this.finalBillAmount=billingDetails.final_bill_amount;this.netPayableAmount=billingDetails.net_payable_amount;this.billLink=billingDetails.bill_link;this.packs=billingDetails.packs;this.reservationTypeId=billingDetails.reservation_type_id;this.loyaltyPointsRefund=billingDetails.loyalty_points_refund;this.billJson=new BillJson(JSON.parse(billingDetails.bill_json));}}
class BillJson{constructor(billJson){this.date=billJson.date;this.email=billJson.email;this.phone=billJson.phone;this.cessAmount=billJson.cessamt;this.cessInPlaceOfVat=billJson.cessinplaceofvat;this.vatAmount=billJson.vat_amt;this.vatPercentage=billJson.vat_per;this.cgstAmount=billJson.cgst_amt;this.cgstPercentage=billJson.cgst_per;this.sgstAmount=billJson.sgst_amt;this.sgstPercentage=billJson.sgst_per;this.storeNumber=billJson.store_no;this.tableNumber=billJson.table_no;this.numberOfPax=billJson.no_of_pax;this.subTotal=billJson.sub_total;this.vatBaseAmount=billJson.vatbaeamt;this.billStatus=billJson.billstatus;this.gstBaseAmount=billJson.gstbaseamt;this.guestName=billJson.guest_name;this.receiptNumber=billJson.receipt_no;this.serviceCharge=billJson.servcharge;this.storeName=billJson.store_name;this.netPayable=billJson.net_payable;this.officeAddress=billJson.off_address;this.totalAmount=billJson.totalamount;this.crsBookingId=billJson.crsbookingid;this.restAddress=billJson.rest_address;this.specialBooking=billJson.special_booking;this.orderDetails=billJson.order_details?billJson.order_details.map((orderDetails)=>new OrderDetails(orderDetails)):[];this.paymentDetails=billJson.payment_details?billJson.payment_details.map((paymentDetails)=>new PaymentDetails(paymentDetails)):[];this.discountDetails=billJson.discount_details?billJson.discount_details.map((discountDetails)=>new DiscountDetails(discountDetails)):[];}}
class OrderDetails{constructor(orderDetails){this.description=orderDetails.description;this.qty=orderDetails.qty;this.rate=orderDetails.rate;this.net=orderDetails.net;}}
class PaymentDetails{constructor(paymentDetails){this.name=paymentDetails.name;this.amount=paymentDetails.amount;this.type=paymentDetails.type;this.voucherNumber=paymentDetails.voucher_number;this.paxApplicable=paymentDetails.pax_applicable?paymentDetails.pax_applicable:0;}}
class DiscountDetails{constructor(discountDetails){this.name=discountDetails.name;this.amount=discountDetails.amount;this.type=discountDetails.type;this.couponNumber=discountDetails.coupon_number;}}
function getVoucherDetails(){let vouchers=[];if(appliedVouchers&&appliedVouchers.length>0){vouchers=appliedVouchers.map((voucher)=>{return new BookingVoucher(voucher);});}
if(appliedCoupon){vouchers.push(new BookingVoucher(appliedCoupon));}else if(appliedCorporateCoupon){vouchers.push(new BookingVoucher(appliedCorporateCoupon));}
if(vouchers.length>0){return vouchers;}
return undefined;}
class BookingVoucher{constructor(voucher){this.title=voucher.title;this.voucher_code=voucher.barCode;this.voucher_type=voucher.voucherType;this.amount=voucher.denomination;this.pax_applicable=voucher.paxApplicable?voucher.paxApplicable:0;}}
class CurrentBooking{constructor(buffetId,quantity,total,unitPrice){this.menu_id=menuId;this.buffet_id=buffetId;this.packs=quantity;this.total=total;this.unit_price=unitPrice;}}
class Buffet{constructor(data){this.buffetData=data.buffet_data?data.buffet_data.map((buffetData)=>{return new BuffetData(buffetData)}):[];}}
class BuffetData{constructor(buffetData){this.buffetId=buffetData.priceId;this.buffetName=buffetData.foodType;this.buffetCustomerType=buffetData.customerType;this.buffetPrice=buffetData.baseAmount;this.buffetCurrency=buffetData.buffetCurrency??'INR';this.buffetType=buffetData.foodType;this.buffetItems=buffetData.buffet_items?buffetData.buffet_items.map((buffetItem)=>{return new BuffetItem(buffetItem)}):[];}}
class BuffetItem{constructor(buffetItem){this.name=buffetItem.name;this.menuItems=buffetItem.menu_items?buffetItem.menu_items.map((item)=>{return new MenuItem(item)}):[];}}
class MenuItem{constructor(menuItem){this.id=menuItem.id;this.name=menuItem.name;this.tags=menuItem.tags;this.type=menuItem.type;this.image=menuItem.image;this.category=menuItem.category;this.posCode=menuItem.pos_code;this.description=menuItem.description;this.defaultPrice=menuItem.default_price;this.saleTypeAlaCarte=menuItem.sale_type_ala_carte;}}
class SlotPostData{constructor(date){this.reservation_date=date;this.branch_id=selectedBranchId?selectedBranchId:undefined;this.dining_type=selectedDiningType?selectedDiningType:undefined;}}
class BranchSlotPostData{constructor(){this.reservation_date=getFormattedReservationDate(branchDetailSelectedReservationDate);this.branch_id=branchDetailSelectedBranchId;this.dining_type=branchDetailSelectedDiningType?branchDetailSelectedDiningType:undefined;}}
class MenuPostData{constructor(){this.reservation_date=getFormattedReservationDate(selectedReservationDate);this.branch_id=selectedBranchId;this.slot_id=selectedSlotId;this.reservation_time=selectedReservationTime;}}
class PreferredBranch{constructor(data,date){this.branchId=data.branch_id;this.branchName=data.branch_name;this.amenities=data.amenities?data.amenities.map((amenity)=>{return new Amenity(amenity)}):[];this.branchImages=data.branch_images;this.slotsAvailabe=data.slots_available?data.slots_available.map((slot)=>{if(slot&&slot.slot_start_time&&slot.slot_start_time.length>0){if(date.isSame(todayDate,'day')){const formattedReservationDate=getFormattedReservationDate(date)+' ';if(moment(formattedReservationDate+slot.slot_start_time).isAfter(todayDate)){return new Slot(slot);}}else{return new Slot(slot);}}}):[];this.taxDetails=data.taxes.map((tax)=>{return new TaxDetails(tax)});this.serviceCharge=data.service_charge;this.terms=data.terms;}}
class TaxDetails{constructor(tax){this.tax=tax.tax;this.taxPercentage=tax.tax_percentage;}}
class Amenity{constructor(amenity){this.name=amenity.name;this.description=amenity.description;this.image=amenity.image;}}
class Slot{constructor(slot){this.slotId=slot.slot_id;this.slotDesc=slot.slot_desc;this.diningType=slot.dining_type;this.slotStartTime=getFormattedSlotTime(slot.slot_start_time);this.slotReservationTime=slot.slot_start_time;this.slotStopTime=slot.slot_stop_time;this.totalCapacity=slot.total_capacity;this.availableCapacity=slot.available_capacity;}}
class BranchList{constructor(branch){this.branchId=branch.branch_id;this.branchName=branch.branch_name;}}
class EmailOtpVerification{constructor(email,otpId,otp){this.email=email;this.otp_id=otpId;this.otp=otp;}}
class AppliedCoupon{constructor(code,type,denomination){this.voucher_code=code;this.voucher_type=type.trim();this.amount=denomination;}}
class Voucher{constructor(voucher){this.barCode=voucher.bar_code;this.currency=voucher.currency;this.denomination=voucher.denomination;this.source=voucher.source;this.status=voucher.status;this.title=voucher.title;this.voucherType=voucher.voucher_type;this.image=voucher.image;this.applicability=voucher.applicability;this.description=voucher.description;this.paxApplicable=voucher.pax_applicable?voucher.pax_applicable:0;}}
$.fakeLoader({spinner:'spinner6',bgColor:'rgba(0, 0, 0, 0.5)'});$('.slot-dropdown').select2();$('.branch-dropdown').select2();function isProfilePage(){return window.location.pathname.indexOf("profile")!==-1;}
function isPayBillPage(){return window.location.pathname.match(/\/(pay-bill.+)/);}
function setRescheduledData(){selectedBranchId=rescheduledBranchId;getBranchList();$('.booking-datepicker').datepicker('setDate',getDatePickerFormattedDate(selectedReservationDate));updateBookingInformation(getFormattedReservationDate(selectedReservationDate));}
$(()=>{if(isPayBillPage()){getBookingDetails(window.location.pathname.split("/").pop());}else{$('#menu-tab').tabs();if(!isProfilePage()){disableReserveButton();const branchIdInput=$('#branch-id');if(branchIdInput){const branchId=branchIdInput.val();if(branchId&&branchId.length>0){updateMenuInBranchDetailPage(branchId);}}
if(checkLocalStorageDetails()){const isUserIdDefined=setInterval(()=>{if(userId!=='undefined'){clearInterval(isUserIdDefined);if(userId&&parseInt(userId,10)!==0){populateBranchList(branchList);populateBranches(preferredBranch,true);$('.reservation--curtain').addClass('reservation--visible');setBranchDateAndSlot();setDiningType(selectedDiningType,'.lunch','.dinner');setTodayTomorrowCheckBox();updateMenuListing(selectedBranchId);}else{getNearbyByOrBranchList();}}},100);}else{getNearbyByOrBranchList();}}else{const observerConfig={attributes:true};const bookingRescheduleBlock=document.getElementById('rescheduled-booking-id');const observer=new MutationObserver(()=>{setRescheduledData();observer.disconnect();});observer.observe(bookingRescheduleBlock,observerConfig);}}});function updateMenuInBranchDetailPage(branchId){const branchMenuTab=$('#branch-menu-tab');if(branchMenuTab.length>0){branchMenuTab.tabs();}
$('#branch-details-menu-slot').select2();$('#branch-details-menu-date-picker').datepicker({dateFormat:'dd/mm/yy',minDate:0,maxDate:moment().add(1,'M').toDate(),onSelect:updateReservationDateInBranchDetail}).datepicker('setDate',getDatePickerFormattedDate(branchDetailSelectedReservationDate));selectedBranchId=branchId;branchDetailSelectedBranchId=branchId;populateNearbyBranches=true;updateMenuListing(selectedBranchId);getBranchSlot();}
function updateBranchMenu(){bookingHttpRequest(URL.BUFFET_LIST,REQUEST_METHODS.POST,{reservation_date:getFormattedReservationDate(branchDetailSelectedReservationDate),branch_id:branchDetailSelectedBranchId,slot_id:branchDetailSelectedSlotId,reservation_time:branchDetailSelectedReservationTime},branchMenuConstant);}
function updateReservationDateInBranchDetail(date){let selectedDate;if(date instanceof moment){selectedDate=date;}else{selectedDate=moment(date,'DD/MM/YYYY');}
if(!selectedDate.isSame(branchDetailSelectedReservationDate,'day')){branchDetailSelectedReservationDate=selectedDate;updateBranchTodayTomorrowTabs();getBranchSlot();}}
function getBranchSlot(){branchDetailSelectedSlotId=undefined;branchDetailSelectedReservationTime=undefined;branchDetailSelectedSlotName=undefined;bookingHttpRequest(URL.GET_NEARBY_BRANCHES,REQUEST_METHODS.POST,new BranchSlotPostData(),branchSlotConstant);}
function updateBranchSlot(data){let branch=new PreferredBranch(data.preferred_branch,branchDetailSelectedReservationDate);buildSlotHtml(branch,'#branch-details-menu-slot',branchMenu);updateBranchMenu();}
function updateBranchTodayTomorrowTabs(){updateTodayTomorrowTabs(branchDetailSelectedReservationDate,'#branch-details-menu-today','#branch-details-menu-tomorrow');}
function setTodayTomorrowCheckBox(){updateTodayTomorrowTabs(selectedReservationDate,'.booking-today','.booking-tomorrow');}
function updateTodayTomorrowTabs(date,todaySelector,tomorrowSelector){if(date.isSame(todayDate,'day')){enableOrDisableCheckBox(todaySelector,true);enableOrDisableCheckBox(tomorrowSelector,false);}else if(date.isSame(tomorrowDate,'day')){enableOrDisableCheckBox(tomorrowSelector,true);enableOrDisableCheckBox(todaySelector,false);}else{enableOrDisableCheckBox(tomorrowSelector,false);enableOrDisableCheckBox(todaySelector,false);}}
function enableOrDisableCheckBox(selector,status){$(selector).prop('checked',status);}
function getNearbyByOrBranchList(){getBranchList();}
function populateMenuList(data,isBranch=false){const buffets=data.buffets.buffet_data;const alaCarte=data.menu_data;const beverages=data.beverage_data;let buffetHtml='';let alaCarteHtml='';let beveragesHtml='';let menuItems;let menuTabOne;let menuTabTwo;let menuTabThree;let buffetMenu;let alaCarteMenu;let beveragesMenu;if(isBranch){menuItems=$('#target_menu');menuTabOne=$('#branch-menu-tab-1-main');menuTabTwo=$('#branch-menu-tab-2-main');menuTabThree=$('#branch-menu-tab-3-main');buffetMenu=$('#branch-buffet-menu');alaCarteMenu=$('#branch-a-la-carte-menu');beveragesMenu=$('#branch-beverages-menu');}else{menuItems=$('#booking-menu-items');menuTabOne=$('#menu-tab-1-main');menuTabTwo=$('#menu-tab-2-main');menuTabThree=$('#menu-tab-3-main');buffetMenu=$('#buffet-menu');alaCarteMenu=$('#a-la-carte-menu');beveragesMenu=$('#beverages-menu');}
if(!buffets&&!alaCarte&&!beverages){menuItems.hide();}else{menuItems.show();}
if(buffets&&buffets.length>0){menuTabOne.show();buffets.forEach((buffet)=>{buffetHtml+=buildBuffetMenuHtml(buffet);});buffetMenu.html(buffetHtml);}else{menuTabOne.hide();}
if(alaCarte&&alaCarte.length>0){menuTabTwo.show();alaCarte.forEach((item)=>{alaCarteHtml+=buildOtherMenu(item);});alaCarteMenu.html(alaCarteHtml);}else{menuTabTwo.hide();}
if(beverages&&beverages.length>0){menuTabThree.show();beverages.forEach((item)=>{beveragesHtml+=buildOtherMenu(item);});beveragesMenu.html(beveragesHtml);}else{menuTabThree.hide();}}
function clearMenu(){menuId=undefined;buffetList=undefined;$('#booking-food-preferences').hide();$('#booking-menu-items').hide();$('.basic-info__menu-block').hide();}
function populateBuffetList(data){menuId=data.menu_id??0;const apiBuffets=data.buffets;buffetList=new Buffet(apiBuffets);let buffetHtml='';let kidsPackCount=0;if(apiBuffets){$('#booking-food-preferences').show();$('#booking-no-food-preferences').hide();buffetList.buffetData.every((buffet)=>{if(buffet.buffetCustomerType=='Child'){kidsPackCount++;}
if(kidsPackCount>1){multiKidsPack=true;return false;}
return true;});buffetList.buffetData.forEach((buffet)=>{if(!buffetCurrency){currency=buffet.buffetCurrency;buffetCurrency=getCurrencyCode(currency);}
buffetHtml+=generateBuffetItemHtml(buffet);});$('#buffet-items').html(buffetHtml);}else{$('#booking-food-preferences').hide();$('#booking-no-food-preferences').show();}}
function getBuffetId(event){return parseInt($(event.target).closest('form').attr('id'),10);}
function showTotalVoucherAndCorporate(status=true){if(status){$('.reservation__sub-total').show();$('.reservation__discount').addClass('show');PROPS.HIDE_LOYALTY_BLOCK=false;$('.reservation__apply-vouchers').show();$('.reservation__corporate-offers').show();$('.reservation__total').addClass('show');$('.reservation__tnc').show();$('#booking-reserve-button').css('display','block');$('#booking-applied-vouchers').show();}else{$('.reservation__sub-total').hide();$('.reservation__discount').removeClass('show');PROPS.HIDE_LOYALTY_BLOCK=true;$('.reservation__apply-vouchers').hide();$('.reservation__corporate-offers').hide();$('.reservation__total').removeClass('show');$('.reservation__tnc').hide();$('#booking-reserve-button').hide();$('#booking-applied-vouchers').hide();}}
$(document).on('click','.decrease-buffet-quantity',(e)=>{updateBooking(e,false);});$(document).on('click','.increase-buffet-quantity',(e)=>{showTotalVoucherAndCorporate();updateBooking(e);});function updateBooking(e,increase=true){if(appliedCorporateCoupon||appliedCoupon||(appliedVouchers&&appliedVouchers.length>0)){e.stopPropagation();toastr.error('Please remove the applied coupons/vouchers to change the quantity');}else{const buffetId=getBuffetId(e);const buffetTotalElement=$(`#booking-buffet-total-${buffetId}`);const unitPrice=parseFloat($(`#buffet-unit-price-${buffetId}`).val());const quantityElement=$(`.buffet-quantity-${buffetId}`);let currentQuantity=parseInt(quantityElement.val(),10);if(increase){if(currentQuantity===0){buffetTotalElement.show();}
currentQuantity++;const buffetTotal=unitPrice*currentQuantity;setAmountDetails();updateBookingDetails(quantityElement,currentQuantity,buffetTotalElement,buffetTotal,increase,buffetId,unitPrice);}else{if(currentQuantity>0){currentQuantity--;}
const buffetTotal=unitPrice*currentQuantity;if(validateBuffetTotal(buffetId,buffetTotal,currentQuantity)){appliedCoupon=undefined;couponUsed=undefined;appliedVouchers=[];appliedCorporateCoupon=undefined;voucherDiscountApplied=undefined;noOfVoucherDiscountAppliedWithPax=undefined;voucherDiscountAppliedWithPax=undefined;couponDiscountApplied=undefined;$('#booking-applied-vouchers').empty();enableCorporateAndCouponLink();setAmountDetails();updateBookingDetails(quantityElement,currentQuantity,buffetTotalElement,buffetTotal,increase,buffetId,unitPrice);}}}}
function updateBookingDetails(quantityElement,currentQuantity,buffetTotalElement,buffetTotal,increase,buffetId,unitPrice){quantityElement.val(currentQuantity);buffetTotalElement.html(getCurrencyCode(buffetCurrency)+''+buffetTotal);if(currentQuantity>0){bookingList.set(buffetId,new CurrentBooking(buffetId,currentQuantity,buffetTotal,unitPrice));}else if(!increase&&currentQuantity===0){buffetTotalElement.hide();if(bookingList.has(buffetId)){bookingList.delete(buffetId);}
if(bookingList.size===0){showTotalVoucherAndCorporate(false);}}
setBuffetTotal();}
function validateBuffetTotal(buffetId,buffetTotal,currentQuantity){if(applyLoyaltyPoints){toastr.error('Please remove the applied smiles before reducing the quantity');return false;}
return true;}
function setBuffetTotal(){let totalQuantity=0;PROPS.SUB_TOTAL=0;PROPS.REMOVED_PAX_AMOUNT=0;bookingList.forEach((v,k)=>{PROPS.SUB_TOTAL+=v.total;});if(!isPayBillPage()){if(applyLoyaltyPoints){PROPS.SUB_TOTAL-=loyaltyDiscountApplied;}
if(couponDiscountApplied){PROPS.SUB_TOTAL-=couponDiscountApplied;}
if(noOfVoucherDiscountAppliedWithPax){if(isPayBillPage()){totalQuantity=PROPS.TOTAL_QUANTITY;}
else{totalQuantity=getQuantity();}
if(totalQuantity<=noOfVoucherDiscountAppliedWithPax){PROPS.REMOVED_PAX_AMOUNT=PROPS.SUB_TOTAL;PROPS.SUB_TOTAL=0;}
else{removePaxOnApplyingVoucher();PROPS.SUB_TOTAL-=PROPS.REMOVED_PAX_AMOUNT;}}}
PROPS.SUB_TOTAL=PROPS.SUB_TOTAL<0?0:PROPS.SUB_TOTAL;setAmountDetails();}
function calculateLoyaltyPoints(){if(loyaltyPoints&&loyaltyPoints>0&&loyaltyExchangeRate&&!PROPS.HIDE_LOYALTY_BLOCK){let total=getBookingTotal(false,false,false);if(!isPayBillPage()){if(applyLoyaltyPoints){total+=loyaltyDiscountApplied;}}
const applicableLoyaltyPoints=total/loyaltyExchangeRate;if(!applicableLoyaltyPoints){applyLoyaltyPoints=false;}else if(loyaltyPoints>=applicableLoyaltyPoints){loyaltyPointsApplied=applicableLoyaltyPoints;}else{loyaltyPointsApplied=loyaltyPoints;}
loyaltyDiscountApplied=loyaltyPointsApplied*loyaltyExchangeRate;setLoyaltyPointsHtml();}else{$('#cart-loyalty-points').empty();}}
function removePaxOnApplyingVoucher(){let noOfPaxToRemove=noOfVoucherDiscountAppliedWithPax;PROPS.REMOVED_PAX_AMOUNT=0;if(!isPayBillPage()){let sortedBuffetItems=new Map([...bookingList.entries()].sort((a,b)=>b[1].unit_price-a[1].unit_price));sortedBuffetItems.forEach((v,k)=>{if(noOfPaxToRemove>0){if(noOfPaxToRemove<=v.packs){PROPS.REMOVED_PAX_AMOUNT+=v.unit_price*noOfPaxToRemove;noOfPaxToRemove-=noOfPaxToRemove;}
else{PROPS.REMOVED_PAX_AMOUNT+=v.total;noOfPaxToRemove-=v.packs;}}});}else{let sortedOrderDetails=new Map([...orderList.entries()].sort((a,b)=>b[1].rate-a[1].rate));sortedOrderDetails.forEach((v,k)=>{if(noOfPaxToRemove>0){if(noOfPaxToRemove<=v.qty){PROPS.REMOVED_PAX_AMOUNT+=v.rate*noOfPaxToRemove;noOfPaxToRemove-=noOfPaxToRemove;}
else{PROPS.REMOVED_PAX_AMOUNT+=v.net;noOfPaxToRemove-=v.qty;}}});}}
function setAmountDetails(reCalculateTax=false){if(!isPayBillPage()){setSubTotal();calculateTaxAmount();}
if(isPayBillPage()&&reCalculateTax){reCalculateTaxAmount()
resetTax()}
calculateLoyaltyPoints();setBookingTotal();}
function setLoyaltyPointsHtml(){let anchorLink;let loyaltyText;let skipLoyalty=false;if(applyLoyaltyPoints){anchorLink='<a href="#" class="remove-link" id="remove-booking-loyalty-points">Remove</a>';loyaltyText=Math.ceil(loyaltyPointsApplied)+' Smiles applied for this transaction';}else{if(getBookingTotal()>0){anchorLink=`<a href="#" class="add-link" id="apply-booking-loyalty-points">Add</a>`;loyaltyText=buffetCurrency+Math.ceil(loyaltyDiscountApplied)+' discount applicable by using '+Math.ceil(loyaltyPointsApplied)+' Smiles';}else{skipLoyalty=true;}}
if(!skipLoyalty){let loyaltyHtml=`<div class="left">
                          <div class="heading">
                            <h5>BBQN Smiles</h5>
                            ${anchorLink}
                          </div>
                          <span>${loyaltyText}</span>
                          <a href="#" class="t-and-c-text">*T&Cs applicable</a>
                        </div>`;if(applyLoyaltyPoints){loyaltyHtml+=`<div class="right">- ${buffetCurrency}${Math.ceil(loyaltyDiscountApplied)}</div>`;}
$('#booking-loyalty-points').html(loyaltyHtml);}else{$('#booking-loyalty-points').empty();}}
$(document).on('click','#apply-booking-loyalty-points',(e)=>{e.preventDefault();applyLoyaltyPoints=true;booking_info.bbqn_smiles_final='yes';booking_info.bbqn_smiles_explored='yes';if(!isPayBillPage()){setBuffetTotal();}
setGstBaseAmount();setAmountDetails(true);});$(document).on('click','#remove-booking-loyalty-points',(e)=>{e.preventDefault();applyLoyaltyPoints=false;booking_info.bbqn_smiles_final='no';booking_info.bbqn_smiles_explored='no';if(!isPayBillPage()){setBuffetTotal();}
setGstBaseAmount(false);setAmountDetails(true);});function setSubTotal(){$('#booking-sub-total').html(`${buffetCurrency}${getSubTotal().toFixed(2)}`);}
function getSubTotal(){return PROPS.SUB_TOTAL;}
function getGstBaseAmount(){return PROPS.GST_BASE_AMOUNT;}
function setGstBaseAmount(loyalty=true,tax=false,voucher=false,coupon=true,voucherWithPax=true){if(isPayBillPage()){PROPS.GST_BASE_AMOUNT=getBookingTotal(loyalty,tax,voucher,coupon,voucherWithPax).toFixed(2);}}
function resetTax(){if(isPayBillPage()){$('#billing-tax-details-cgst').text(PROPS.CGST_AMOUNT);$('#billing-tax-details-sgst').text(PROPS.SGST_AMOUNT);$('#billing-total-amount').text(getBookingTotal(true,true,false,true,true).toFixed(2));}}
function setBookingTotal(){let element;if(isPayBillPage()){element=$('.billing-final-payable-amount');}else{element=$('#booking-total');}
element.html(`${buffetCurrency}${getBookingTotal().toFixed(2)}`);}
function getBookingTotal(withLoyalty=true,withTax=true,withVoucher=true,withCoupon=true,withPaxApplicableVoucher=true){let total;total=getSubTotal();if(withTax){total=total+PROPS.TAX_AMOUNT;}
if(isPayBillPage()&&applyLoyaltyPoints&&withLoyalty){total-=loyaltyDiscountApplied;}
if(isPayBillPage()&&couponDiscountApplied&&withCoupon){total-=couponDiscountApplied;}
if(voucherDiscountApplied&&withVoucher){total-=voucherDiscountApplied;}
if(isPayBillPage()&&PROPS.ADVANCE_AMOUNT_PAID&&withVoucher){total-=PROPS.ADVANCE_AMOUNT_PAID;}
if(isPayBillPage()&&PROPS.ADDITIONAL_DISCOUNTS){total-=PROPS.ADDITIONAL_DISCOUNTS;}
if(isPayBillPage()&&noOfVoucherDiscountAppliedWithPax&&withPaxApplicableVoucher){removePaxOnApplyingVoucher();total-=PROPS.REMOVED_PAX_AMOUNT;}
booking_info.price=total;booking_info.reservationDate=selectedReservationDate;return total<0?0:total;}
function populateBranches(data,formatted=false){disableOrEnableReserveButton();selectedSlotId=undefined;selectedReservationTime=undefined;selectedSlotName=undefined;if(!$.isEmptyObject(data)){if(!formatted){preferredBranch=new PreferredBranch(data.preferred_branch,selectedReservationDate);}
const branchDropdown=$('.branch-dropdown');if(branchDropdown.find(':selected').val()!==preferredBranch.branchId){selectedBranchId=preferredBranch.branchId;branchDropdown.val(selectedBranchId).trigger('change');}
buildSlotHtml(preferredBranch,'.slot-dropdown',bookingMenu);$('#selected-reservation-date').text(getFormattedDate(selectedReservationDate));booking_info.reservationDate=selectedReservationDate;$('#booking-slot-value').text(selectedSlotName);$('#selected-branch-name').text(preferredBranch.branchName);refreshData();setBranchImageAndAmenities();disableOrEnableReserveButton();if($('#s-branch-menu-tab').length){$('#target_menu').parent('li').show();}else{$('#target_menu').parent('li').hide();}}}
function buildSlotHtml(branch,selector,type){const slotDropdown=$(selector);slotDropdown.empty();let slotHtml='';branch.slotsAvailabe.forEach((slot)=>{if(slot){if(type===branchMenu){if(!branchDetailSelectedSlotName){branchDetailSelectedSlotName=slot.slotStartTime;}
if(!branchDetailSelectedSlotId){branchDetailSelectedSlotId=slot.slotId;branchDetailSelectedReservationTime=slot.slotReservationTime;}}else if(type===bookingMenu){if(!selectedSlotName){selectedSlotName=slot.slotStartTime;}
if(!selectedSlotId){selectedSlotId=slot.slotId;selectedReservationTime=slot.slotReservationTime;}}
slotHtml+=`<option label="${slot.slotReservationTime}" value="${slot.slotId}">${slot.slotStartTime}</option>`;}});slotDropdown.html(slotHtml);}
function setBranchDateAndSlot(){$('.branch-dropdown').val(selectedBranchId).trigger('change');$('.slot-dropdown').val(selectedSlotId).trigger('change');$('.booking-datepicker').datepicker('setDate',getDatePickerFormattedDate(selectedReservationDate));}
$('.booking-datepicker').datepicker({dateFormat:'dd/mm/yy',minDate:0,maxDate:moment().add(1,'M').toDate(),onSelect:updateReservationDate}).datepicker('setDate',getDatePickerFormattedDate(selectedReservationDate));$('#booking-corporate-email-submit').click((e)=>{sendCorporateOtp();});$('#booking-resend-corporate-otp').click(()=>{sendCorporateOtp();});function sendCorporateOtp(){corporateEmail=$('#booking-corporate-email').val();bookingHttpRequest(URL.VERIFY_CORPORATE,REQUEST_METHODS.POST,{'corporate_email':corporateEmail},corporateVerificationConstant);}
function showCorporateOtpScreen(data,error=false){const emailLabel=$('#booking-corporate-email-label');if(error){emailLabel.text('Please enter a valid corporate email id');emailLabel.addClass('error-message');}else{corporateOtpId=data.otp_id;emailLabel.hide();$('#enter-email').hide();$('#verify-otp').show();}}
$('#verify-otp-cta').click(()=>{const otp=$('#booking-corporate-otp').val();bookingHttpRequest(URL.VERIFY_EMAIL_OTP,REQUEST_METHODS.POST,new EmailOtpVerification(corporateEmail,corporateOtpId,otp),corporateEmailOtpVerificationConstant);});function invalidCorporateEmailOtp(){const otpLabel=$('#corporate-otp-label');otpLabel.text('Please enter a valid otp');otpLabel.addClass('error-message');}
function verifyCorporateEmailOtp(data){$('#verify-otp').hide();$('#verify-status').show();$('#corporate-offer').hide();$('.reservation--curtain').removeClass('open-corporate-form');corporateOtpId=undefined;isCorporatePageActive=true;const emailLabel=$('#booking-corporate-email-label');emailLabel.removeClass('error-message');const otpLabelElement=$('#corporate-otp-label');otpLabelElement.text('Enter the verification code that sent to your email');otpLabelElement.removeClass('error-message');$('#booking-corporate-otp').val('');corporateVerified=true;showOrHideCorporateButtons();$('#reservation-info').show();}
$('#remove-corporate-offer-button').click((e)=>{removeCorporateOffer();e.stopPropagation();});function removeCorporateOffer(){corporateVerified=false;corporateEmail=undefined;corporateOtpId=undefined;showOrHideCorporateButtons(false);$('#enter-email').show().children().show();$('#verify-status').hide();}
function loginLink(){$('.button--signin').trigger('click');}
$('#booking-show-vouchers').click((e)=>{booking_info.happiness_card_explored='yes';if(!isAnonymous()){e.preventDefault();showBillingPageCurtain();$('#reservation-info').hide();$('#coupons-vouchers').show();$('#coupons-listing').empty();bookingHttpRequest(URL.USER_VOUCHERS(),REQUEST_METHODS.GET,getCouponAndVoucherQueryParam(),showVouchersConstant);}else{loginLink();}});function showBillingPageCurtain(){if(isPayBillPage()){$('.reservation--curtain').addClass('reservation--visible');}}
function hideBillingPageCurtain(){if(isPayBillPage()){$('.reservation--curtain').removeClass('reservation--visible');}}
function getCouponAndVoucherQueryParam(){let totalQuantity=0;let total=0;if(isPayBillPage()){totalQuantity=PROPS.TOTAL_QUANTITY;total=PROPS.TOTAL_AMOUNT;}else{bookingList.forEach((v,k)=>{totalQuantity+=v.packs;total+=v.total;});}
if(noOfVoucherDiscountAppliedWithPax){totalQuantity-=noOfVoucherDiscountAppliedWithPax;}
if(selectedReservationTime==undefined||selectedReservationTime.length<=0){let d=new Date;selectedReservationTime=d.getHours()+":"+d.getMinutes()+":00";}
return{packs:totalQuantity,reservation_date:getFormattedReservationDate(selectedReservationDate)+" "+selectedReservationTime.slice(0,-3),branch_id:selectedBranchId,slot_id:selectedSlotId,amount:total,currency:currency};}
$('#booking-show-coupons').click((e)=>{booking_info.coupon_explored='yes';if(!isAnonymous()){e.preventDefault();showBillingPageCurtain();if(appliedCorporateCoupon){toastr.error('You cannot apply coupon with corporate offer applied');}else{$('#reservation-info').hide();$('#coupons-vouchers').show();$('#coupons-listing').empty();bookingHttpRequest(URL.USER_COUPONS(),REQUEST_METHODS.GET,getCouponAndVoucherQueryParam(),showCouponsConstant);}}else{loginLink();}});function populateCouponsAndVouchers(data,type){if(isCorporatePageActive&&type===corporateOffersConstant){$('#coupons-listing').empty();corporateCouponList=new Map();if(data.vouchers&&data.vouchers.length>0){data.vouchers.forEach((coupon)=>{corporateCouponList.set(coupon.bar_code,new Voucher(coupon));});buildVoucherAndCouponHtml(type);}else{$('#coupons-listing').html('<div>No coupons available.</div>');}}else{if(data&&data.vouchers&&data.vouchers.length>0){if(type===PROPS.COUPON_CODE){couponList=new Map();data.vouchers.forEach((coupon)=>{couponList.set(coupon.bar_code,new Voucher(coupon));});buildVoucherAndCouponHtml(type);}else if(type===PROPS.VOUCHER_CODE){voucherList=new Map();data.vouchers.forEach((voucher)=>{voucherList.set(voucher.bar_code,new Voucher(voucher));});buildVoucherAndCouponHtml(type);}}else{let couponOrVoucherText;if(type===PROPS.COUPON_CODE){booking_info.coupon=PROPS.COUPON_CODE;couponOrVoucherText='coupons';}else if(type===PROPS.VOUCHER_CODE){booking_info.happiness_card=PROPS.VOUCHER_CODE;couponOrVoucherText='vouchers';}
$('#coupons-listing').html(`<div>No ${couponOrVoucherText} ${' '} available.</div>`)}}}
function showOrHideCorporateButtons(status=true){if(status){$('#corporate-offer-applied-badge').show();$('#remove-corporate-offer-button').show();}else{$('#corporate-offer-applied-badge').hide();$('#remove-corporate-offer-button').hide();}}
function buildVoucherAndCouponHtml(type){let couponHtml='';let voucherAndCoupons;let tempSubTotal=getBookingTotal();if(isCorporatePageActive&&type===corporateOffersConstant){voucherAndCoupons=corporateCouponList;}else if(type===PROPS.VOUCHER_CODE){voucherAndCoupons=voucherList;}else if(type===PROPS.COUPON_CODE){voucherAndCoupons=couponList;}
voucherAndCoupons.forEach((v,k)=>{const couponItem=voucherAndCouponItemHtml(v.title,v.voucherType,v.barCode,v.currency,v.denomination,tempSubTotal,type,v.applicability,v.description);if(couponItem){couponHtml+=couponItem;}});$('#coupons-listing').html(couponHtml);}
function disableCorporateAndCouponLink(){$('.reservation__corporate-link').addClass('anchor-disabled');$('#booking-show-coupons').addClass('anchor-disabled');}
function enableCorporateAndCouponLink(){$('.reservation__corporate-link').removeClass('anchor-disabled');$('#booking-show-coupons').removeClass('anchor-disabled');}
$('#apply-coupon').click(function(){applyReserveCoupon()});function applyReserveCoupon(){let totalQuantity=0;let total=0;if(isPayBillPage()){totalQuantity=PROPS.TOTAL_QUANTITY;total=PROPS.TOTAL_AMOUNT;}else{bookingList.forEach((v,k)=>{totalQuantity+=v.packs;total+=v.total;});}
if(noOfVoucherDiscountAppliedWithPax){totalQuantity-=noOfVoucherDiscountAppliedWithPax;}
var setManualCoupon=document.getElementById("apply-coupon-value").value.trim();if(selectedReservationTime==undefined||selectedReservationTime.length<=0){let d=new Date;selectedReservationTime=d.getHours()+":"+d.getMinutes()+":00";}
if(setManualCoupon!=0){$.ajax({url:'/api/v1/verify-manual-bar-code',type:'POST',headers:getHeaders(),dataType:"json",data:JSON.stringify({bar_code:setManualCoupon,reservation_date:getFormattedReservationDate(selectedReservationDate)+" "+selectedReservationTime.slice(0,-3),currency:currency,country_code:+91,packs:totalQuantity,amount:total,branch_id:selectedBranchId,slot_id:selectedSlotId,mobile_number:localStorage.getItem('mobile_number'),}),success:function(data){if(data.message_type=="success"){const barCode=data.bar_code;let voucherType=data.voucher_type;let voucher;let validCoupon=false;if(voucherType===PROPS.VOUCHER_CODE){if(!voucherList.has(data.bar_code)){voucherList.set(data.bar_code,new Voucher(data));}
voucher=voucherList.get(barCode);appliedVouchers.push(voucher);}else if(voucherType===PROPS.COUPON_CODE){if(!couponList.has(data.bar_code)){couponList.set(data.bar_code,new Voucher(data));}
voucher=couponList.get(barCode);couponUsed=voucher;verifyCouponOnApplying(setManualCoupon);}else if(voucherType===corporateOffersConstant){if(!corporateCouponList.has(data.bar_code)){corporateCouponList.set(data.bar_code,new Voucher(data));}
voucher=corporateCouponList.get(barCode);disableCorporateAndCouponLink();appliedCorporateCoupon=voucher;}
if(validCoupon||voucherType===PROPS.VOUCHER_CODE){if(voucherType!==PROPS.COUPON_CODE){if(voucher.paxApplicable>0){if(applyLoyaltyPoints||couponDiscountApplied){toastr.error('Previously applied coupon/corporate offers and loyalty points will be removed. Please apply again if needed.');if(applyLoyaltyPoints){$('#remove-booking-loyalty-points').trigger('click');}
if(appliedCoupon){$('.booking-remove-coupon').trigger('click');}
if(appliedCorporateCoupon){$('.booking-remove-corporate-coupon').trigger('click');}}}
$('#booking-applied-vouchers').append(appliedVoucherHtml(voucher,voucherType));buildVoucherAndCouponHtml(voucherType);}}}else if(data.data.fieldErrors){toastr.error(data.fieldErrors.field);}},error(data){toastr.error(data.responseJSON.fieldErrors[0].message);}});}};$(document).on('click','.booking-apply-coupon',(e)=>{e.preventDefault();const target=e.target;const targetElement=$(target);const barCode=target.id;let voucherType=targetElement.closest('div').attr('class');let voucher;let validCoupon=false;if(voucherType===PROPS.VOUCHER_CODE){voucher=voucherList.get(barCode);appliedVouchers.push(voucher);}else if(voucherType===PROPS.COUPON_CODE){voucher=couponList.get(barCode);couponUsed=voucher;verifyCouponOnApplying(barCode);$('#coupons-vouchers-close').trigger('click');}else if(voucherType===corporateOffersConstant){voucher=corporateCouponList.get(barCode);disableCorporateAndCouponLink();appliedCorporateCoupon=voucher;}
if(validCoupon||voucherType===PROPS.VOUCHER_CODE){if(voucherType!==PROPS.COUPON_CODE){if(voucher.paxApplicable>0){if(applyLoyaltyPoints||couponDiscountApplied){toastr.error('Previously applied coupon/corporate offers and loyalty points will be removed. Please apply again if needed.');if(applyLoyaltyPoints){$('#remove-booking-loyalty-points').trigger('click');}
if(appliedCoupon){$('.booking-remove-coupon').trigger('click');}
if(appliedCorporateCoupon){$('.booking-remove-corporate-coupon').trigger('click');}}}
$('#booking-applied-vouchers').append(appliedVoucherHtml(voucher,voucherType));buildVoucherAndCouponHtml(voucherType);}}});function verifyCouponOnApplying(barCode){let totalQuantity=0;let total=0;if(isPayBillPage()){totalQuantity=PROPS.TOTAL_QUANTITY;total=PROPS.TOTAL_AMOUNT;}else{bookingList.forEach((v,k)=>{totalQuantity+=v.packs;total+=v.total;});}
if(noOfVoucherDiscountAppliedWithPax){totalQuantity-=noOfVoucherDiscountAppliedWithPax;}
if(selectedReservationTime==undefined||selectedReservationTime.length<=0){let d=new Date;selectedReservationTime=d.getHours()+":"+d.getMinutes()+":00";}
let couponParameters={'packs':totalQuantity,'reservation_date':getFormattedReservationDate(selectedReservationDate)+" "+selectedReservationTime.slice(0,-3),'branch_id':selectedBranchId,'slot':selectedSlotId,'amount':total,'currency':currency,'bar_code':barCode};bookingHttpRequest(URL.VERIFY_VOUCHERS_ON_RESERVATION,REQUEST_METHODS.POST,couponParameters,applyCouponsConstant);}
function validateBookingTotal(amount,total){if(amount>total){toastr.error('Please add more items to apply this voucher/coupon');return false;}
return true;}
$(document).on('click','.booking-remove-voucher',(e)=>{e.preventDefault();const code=e.target.id;appliedVouchers=appliedVouchers.filter(voucher=>voucher.barCode!==code);if(voucherList.get(code).paxApplicable==0){voucherDiscountApplied-=voucherList.get(code).denomination;if(voucherDiscountApplied<0){voucherDiscountApplied=0;}}
else if(voucherList.get(code).paxApplicable>0){voucherDiscountAppliedWithPax-=voucherList.get(code).denomination;noOfVoucherDiscountAppliedWithPax-=voucherList.get(code).paxApplicable;if(voucherDiscountAppliedWithPax<0){voucherDiscountAppliedWithPax=0;}
if(noOfVoucherDiscountAppliedWithPax<0){noOfVoucherDiscountAppliedWithPax=0;}}
if(!isPayBillPage()){setBuffetTotal();}
setGstBaseAmount();setAmountDetails(true);$(`#applied-voucher-${code}`).remove();});$(document).on('click','.booking-remove-coupon',(e)=>{const code=e.target.id;appliedCoupon=undefined;couponDiscountApplied-=couponList.get(code).denomination;if(couponDiscountApplied<0){couponDiscountApplied=0;}
if(!isPayBillPage()){setBuffetTotal();}
setGstBaseAmount(true,false,false,false);setAmountDetails(true);$(`#applied-coupon-${code}`).remove();enableCorporateAndCouponLink();});$(document).on('click','.booking-remove-corporate-coupon',(e)=>{const code=e.target.id;appliedCorporateCoupon=undefined;couponDiscountApplied-=corporateCouponList.get(code).denomination;if(couponDiscountApplied<0){couponDiscountApplied=0;}
if(!isPayBillPage()){setBuffetTotal();}
setGstBaseAmount(true,false,false,false);setAmountDetails(true);$(`#applied-coupon-${code}`).remove();enableCorporateAndCouponLink();});$('#booking-reserve-button').click(()=>{Moengage.track_event("Reservation_Checkout",{"Login_Type":localStorage.getItem('email'),"Mobile":localStorage.getItem('mobile_number'),"Location":$("#selected-branch-name").text(),});bookingHttpRequest(URL.GET_BRANCH_BY_ID(selectedBranchId),REQUEST_METHODS.GET,undefined,checkAdvanceAmountBranchConstant);});function checkAdvancePaymentRequired(data){selectedBranchName=data.branch_name;if(data.advance_payment=='1'){getBranchSlotCapacity();}
else{createBookingOnly();}}
function showAdvancePayBranchScreen(){element=$('#advance-pay-branch-amount');element.html(`${buffetCurrency}${advancePaymentDetails.data.advance_amount}`);$('#reservation-info').hide();$('#confirm-advance-pay-branch').hide();$('#retry-advance-pay-branch').hide();$('#refund-advance-pay-branch').hide();$('#advance-pay-branch').show();}
function showRetryAdvancePayBranchScreen(){element=$('#retry-advance-pay-branch-amount');element.html(`${buffetCurrency}${advancePaymentDetails.data.advance_amount}`);$('#reservation-info').hide();$('#advance-pay-branch').hide();$('#confirm-advance-pay-branch').hide();$('#refund-advance-pay-branch').hide();$('#retry-advance-pay-branch').show();}
function showRefundInitiatedScreen(data){$('#refund-advance-pay-branch-name').html(`${selectedBranchName}`);$('#refund-advance-pay-branch-time').html(`${moment(selectedReservationTime,'hh:mm A').format('hh:mm A')}`);$('#refund-advance-pay-branch-refund-amount').html(`${buffetCurrency}${data.data.payment_refund_amount}`);$('#refund-advance-pay-branch-refund-id').html(`${data.data.payment_refund_id}`);$('#reservation-info').hide();$('#advance-pay-branch').hide();$('#confirm-advance-pay-branch').hide();$('#retry-advance-pay-branch').hide();$('#refund-advance-pay-branch').show();}
$('#advance-pay-branch-confirm, #retry-advance-pay-branch-confirm, #advance-pay-branch-confirm-reservation').click((e)=>{e.preventDefault();proceedToBranchAdvancePaymentCheckout(advancePaymentDetails);});$('#refund-advance-pay-branch-confirm, #advance-pay-branch-cancel-reservation').click((e)=>{e.preventDefault();redirectToHomePage();});$('#back-to-reserve-page, #retry-back-to-reserve-page').click((e)=>{e.preventDefault();$('#confirm-advance-pay-branch').show();});function getBranchSlotCapacity(){branchDetailSelectedSlotId=undefined;branchDetailSelectedReservationTime=undefined;branchDetailSelectedSlotName=undefined;bookingHttpRequest(URL.GET_NEARBY_BRANCHES,REQUEST_METHODS.POST,new SlotPostData(getFormattedReservationDate(selectedReservationDate)),branchSlotCapacityConstant);}
function checkBranchSlotCapacity(data){let totalQuantity=getQuantity();let selectedSlot=data.preferred_branch.slots_available?data.preferred_branch.slots_available.find(function(slots){return selectedSlotId==slots.slot_id&&selectedReservationTime==slots.slot_start_time;}):[];if(selectedSlot&&selectedSlot.available_capacity>=totalQuantity){checkReservationRules();}
else{toastr.error('Maximum available capacity is '+selectedSlot.available_capacity);}}
function checkReservationRules(){let reservationRuleDetails=new CreateBooking();reservationRuleDetails={...reservationRuleDetails,...{no_of_pax:parseInt(getQuantity()),payable_amt:parseFloat(getBookingTotal().toFixed(2)),}};if(reservationRuleDetails.hasOwnProperty('slot_id')&&typeof reservationRuleDetails.slot_id!=="undefined"){reservationRuleDetails.slot_id=reservationRuleDetails.slot_id.toString();}
if(reservationRuleDetails.hasOwnProperty('loyalty_points')&&typeof reservationRuleDetails.loyalty_points!=="undefined"){reservationRuleDetails.loyalty_points_amount=parseFloat(reservationRuleDetails.loyalty_points).toFixed(2).toString();}
bookingHttpRequest(URL.RESERVATION_RULES,REQUEST_METHODS.POST,reservationRuleDetails,reservationRulesConstant);}
function proceedWithBooking(data){if(data.data.advance_amount>0){advancePaymentDetails=data;showAdvancePayBranchScreen();}else{createBookingOnly();}}
function getQuantity(){let totalQuantity=0;bookingList.forEach((v,k)=>{totalQuantity+=v.packs;});return totalQuantity;}
function proceedToBranchAdvancePaymentCheckout(data){const options={key:razorPayApiKey,order_id:data.data.razor_pay_order_id,amount:data.data.advance_amount*100,currency:currency,name:'Barbeque Nation',image:'/themes/custom/bbq_nation/assets/images/bbqn-logo.svg',handler:((transaction)=>{checkPaymentStatus(transaction);}),};window.rzpay=new Razorpay(options);rzpay.open();}
function checkPaymentStatus(transaction){advanceTransactionDetails=transaction;let updateAdvanceResPayment={'razor_pay_payment_id':transaction?transaction.razorpay_payment_id:undefined,'razor_pay_order_id':transaction?transaction.razorpay_order_id:undefined,'razorpay_signature':transaction?transaction.razorpay_signature:undefined,'payment_gateway':transaction?'RAZOR_PAY':undefined};bookingHttpRequest(URL.UPDATE_ADV_RES_PAYMENT,REQUEST_METHODS.POST,updateAdvanceResPayment,updateAdvanceResPaymentConstant);}
function completeAdvancePayBookingCheckout(advanceBookingId){let updateAdvanceResPayment={'booking_id':advanceBookingId,'razor_pay_order_id':advanceTransactionDetails?advanceTransactionDetails.razorpay_order_id:undefined,};bookingHttpRequest(URL.UPDATE_ADV_RES_PAYMENT,REQUEST_METHODS.POST,updateAdvanceResPayment,updateAdvanceResPaymentOnCompleteConstant);}
function createBookingOnly(advancePay=false){let url;let method;if(rescheduledBookingId){url=URL.BOOKING_RESCHEDULE;method=REQUEST_METHODS.PUT;}else{url=URL.CREATE_BOOKING;method=REQUEST_METHODS.POST;}
if(advancePay){bookingHttpRequest(url,method,new CreateBooking(),createBookingWithAdvanceConstant);}
else{bookingHttpRequest(url,method,new CreateBooking(),createBookingConstant);}}
$('.reservation__success__advance a').click(function(){$('#advance-pay').show();$('#advance-amount').val(billAmount);});$('#advance-amount').click(()=>{$('#booking-confirmed-pay-advance-amount').prop('disabled',true);});$('#booking-confirmed-pay-advance-amount').click((e)=>{e.preventDefault();if(isPayBillPage()){if(getBookingTotal()){generatePayBillRazorPayOrder();}else{completeBookingCheckout();}}else{generateRazorPayOrder();}});function generateRazorPayOrder(){const confirmedAdvanceAmount=parseFloat($('#advance-amount').val());bookingHttpRequest(URL.CREATE_BOOKING_RAZORPAY_ORDER,REQUEST_METHODS.POST,{'booking_id':bookingId,'amount':confirmedAdvanceAmount,'currency':currency},payAdvanceAmountConstant);}
function generatePayBillRazorPayOrder(){const confirmedAdvanceAmount=getBookingTotal().toFixed(2);let bookingDetailsToGenerateRazorPay={'booking_id':bookingId,'amount':confirmedAdvanceAmount,'currency':currency};if(isPayBillPage()){bookingDetailsToGenerateRazorPay={...bookingDetailsToGenerateRazorPay,...{loyalty_points:applyLoyaltyPoints?Math.ceil(loyaltyPointsApplied):undefined}};}
bookingHttpRequest(URL.CREATE_BOOKING_RAZORPAY_ORDER,REQUEST_METHODS.POST,bookingDetailsToGenerateRazorPay,payAdvanceAmountConstant);}
$('#booking-confirmation-done').click((e)=>{e.preventDefault();e.stopPropagation();if(!isProfilePage()){window.location.href='/profile#reservations';}else{window.location.reload();}});function showBookingSuccessScreen(data,hidepayment=false){bookingData=data;bookingId=data.booking_id;billAmount=data.bill_total;Moengage.track_event("Reservation_Status",{"Mobile":localStorage.getItem('mobile_number'),"Login_Type":localStorage.getItem('email'),"Location":data.branch_name,"Booking_id":bookingId,"Reservation_booked_Status":"Success"});let voucherHTML='';let couponHTML='';let voucherApplied=false;let couponApplied=false;booking_info.reservationDate=getFormattedDate(selectedReservationDate);$('#booking-id').text(bookingId);$('#reservation-info').hide();$('#advance-pay-branch').hide();$('#confirm-advance-pay-branch').hide();$('#retry-advance-pay-branch').hide();$('#refund-advance-pay-branch').hide();$('#reservation__success').show();$('#booking-confirmation-buffet-items').html(getBookingConfirmedItemsHtml(data.booking_details));if(data.loyalty_points_amount&&data.loyalty_points_amount>0){$('#booking-confirmation-loyalty-points').text(data.loyalty_points_amount.toFixed(2));}else{$('#booking-confirmation-loyalty-points-block').hide();}
if(data.voucher_details&&data.voucher_details.length>0){data.voucher_details.forEach((voucher)=>{if(voucher.voucher_type=='GV'){voucherApplied=true;if(voucher.pax_applicable&&voucher.pax_applicable>0){voucherHTML+=`<div class="reservation__success__points row align-center space-between applied-vouchers-list">
                          <div class="reservation__success__left__no__logo">${voucher.voucher_code}</div>
                          <div class="reservation__success__right"> - ${voucher.pax_applicable} ${' '} Packs</div>
                        </div>`;}else{voucherHTML+=`<div class="reservation__success__points row align-center space-between applied-vouchers-list">
                          <div class="reservation__success__left__no__logo">${voucher.voucher_code}</div>
                          <div class="reservation__success__right"> ${voucher.amount} </div>
                        </div>`;}}else if(voucher.voucher_type=='GC'){couponApplied=true;couponHTML+=`<div class="reservation__success__points row align-center space-between applied-coupon-list">
                          <div class="reservation__success__left__no__logo">${voucher.voucher_code}</div>
                          <div class="reservation__success__right"> ${voucher.amount} </div>
                        </div>`;}});if(voucherApplied){$('#booking-confirmation-vouchers').html(voucherHTML);}else{$('#booking-confirmation-vouchers-block').hide();}
if(couponApplied){$('#booking-confirmation-coupon').html(couponHTML);}else{$('#booking-confirmation-coupon-block').hide();}}else{$('#booking-confirmation-vouchers-block').hide();$('#booking-confirmation-coupon-block').hide();}
$('#booking-confirmed-bill-total').text(billAmount.toFixed(2).toLocaleString("en"));$('#booking-confirmed-branch-name').text(`get together @ ${data.branch_name}`);$('#booking-confirmed-reservation-date').html(`<span></span>${getFormattedDate(selectedReservationDate)}`);$('#booking-confirmation-navigation').html(`<a class="reservation__success__navigation" href=${URL.GOOGLE_MAPS}${data.lat},${data.long} target="_blank">nav</a>`);$('#booking-confirmation-call').html(`<a class="reservation__success__contact" href="tel:${data.branch_contact_no}">call</a>`)
$('.reservation__success__details').css('background-image',`url(${data.branch_image})`);$('#advance-pay').hide();$('#advance-amount-block').hide();}
$('#booking-confirmation-special-instructions').click(function(){$('#special-request').show();bookingHttpRequest(URL.GET_OCCASION_JOINED_BY,REQUEST_METHODS.GET,undefined,getOccasionJoinedByConstant);});$('#request-close').click(function(){$('#special-request').hide();});$('#update-special-instructions').click((e)=>{const occasion=$('input[name=occasion]:checked').attr('id').substr(9);const joinedBy=$('input[name=joined-by]:checked').attr('id').substr(10);const specialInstructions=$('#booking-special-instructions').val();bookingHttpRequest(URL.UPDATE_OCCASION_JOINED_BY_SPECIAL_INSTRUCTIONS,REQUEST_METHODS.PUT,{'booking_id':bookingId,'occasion_id':occasion?[occasion]:undefined,'joined_by':joinedBy?[joinedBy]:undefined,'special_note':specialInstructions?specialInstructions:undefined},updateSpecialInstructionsConstant);});function cleanup(){showTotalVoucherAndCorporate(false);bookingList=new Map();appliedCoupon=undefined;couponUsed=undefined;corporateEmail=undefined;corporateVerified=false;corporateOtpId=undefined;removeCorporateOffer();$('#booking-sub-total').html(0);$('#booking-tax-details').empty();$('#booking-total').html(0);$('#booking-applied-vouchers').empty();PROPS.TAX_AMOUNT=undefined;}
function disableOrEnableReserveButton(){if(selectedBranchId&&selectedBranchId!==0&&selectedReservationDate&&selectedSlotId&&selectedSlotId!==0){enableReserveButton();}else{disableReserveButton();}}
function disableReserveButton(){$('#reserve-button').prop('disabled',true);}
function enableReserveButton(){$('#reserve-button').prop('disabled',false);}
$('#reserve-button').click((e)=>{e.stopPropagation();e.preventDefault();if($(e.target).hasClass('reservation-button-scroll-top')){$('html, body').animate({scrollTop:0},'swing');}else{if(userId===0||!userId){saveDataInLocalStorage();loginLink();}else{$('.reservation--curtain').addClass('reservation--visible');setBranchDateAndSlot();updateMenuListing(selectedBranchId);Moengage.track_event("Reservation",{"Mobile_Number":localStorage.getItem('mobile_number'),"Login_Type":localStorage.getItem('email'),"Location":$("#initial-booking-form .select2-selection__rendered").attr("title"),"Calendar":getFormattedReservationDate(selectedReservationDate),"Time":selectedReservationTime.toString(),"Reserve_Button":"Clicked"});PROPS.HIDE_LOYALTY_BLOCK=false;getUserLoyaltyPoints();}}});function getUserLoyaltyPoints(){bookingHttpRequest(URL.GET_LOYALTY_EXCHANGE_RATE,REQUEST_METHODS.GET,{amount:1,currency},getLoyaltyExchangeRateUrlConstant);}
$('.branch-dropdown').on('select2:selecting',(e)=>{selectedBranchId=e.params.args.data.id;if(jQuery('option#option-'+selectedBranchId).length>0&&jQuery('option#option-'+selectedBranchId)[0].getAttribute('data-international')==1){$.get({url:branchUrlByStoreCodeUrl+selectedBranchId,headers:getHeaders(),success(data){window.location.href=data;}});}
else{if(selectedBranchId!=='0'){updateBookingInformation(getFormattedReservationDate(selectedReservationDate));disableOrEnableReserveButton();}else{selectedBranchId=undefined;disableOrEnableReserveButton();}
updateMenuListing(selectedBranchId);}});function updateMenuListing(storeId){$.ajax({url:'/views/ajax',type:'POST',data:{view_name:'branch_menu',view_display_id:'branch_menu_store',view_args:(storeId!==0)?storeId:'',},dataType:'json',success:function(response){if(response[3]!==undefined){var viewHtml=response[3].data;var settings=response[0].settings;$('#menu-listing').html(viewHtml);var imageCountmobMenu=$('.branch-menu-booking-row .views-field-branch-menu-image-target-id .field-content .colorbox').length;if(!imageCountmobMenu){$('#menu-listing').html('No menu available.');}
else{var imageCountMenu=imageCountmobMenu-5;for(var i=0;i<=imageCountmobMenu;i++){$('.branch-menu-booking-row .views-field-branch-menu-image-target-id .field-content a').eq(i).addClass('cboxElement colorbox-branch-menu');}
for(var j=0;j<=4;j++){$('.branch-menu-booking-row .views-field-branch-menu-image-target-id .field-content a').eq(j).addClass('s-gallery-item');}
$('.branch-menu-booking-row .views-field-branch-menu-image-target-id .field-content a').eq(0).addClass('s-gallery-item--first').append('<span>'+imageCountmobMenu+' PHOTOS </span>');$('.branch-menu-booking-row .views-field-branch-menu-image-target-id .field-content a').eq(4).addClass('s-gallery-item s-gallery-item--last').wrap('<div class= "wrapper-right"> </div>');if(imageCountmobMenu>5){$('.branch-menu-booking-row .views-field-branch-menu-image-target-id .field-content a').eq(4).append('<span>'+imageCountMenu+' PHOTOS </span>');}
$('head').append(response[1].data);$('head').append(response[2].data);if(!$.isFunction($.colorbox)||typeof settings.colorbox==='undefined'){return;}
if(settings.colorbox.mobiledetect&&window.matchMedia){var mq=window.matchMedia('(max-device-width: '+settings.colorbox.mobiledevicewidth+')');if(mq.matches){$.colorbox.remove();return;}}
settings.colorbox.rel=function(){return $(this).data('colorbox-gallery')};$('.colorbox-branch-menu').once('init-colorbox').each(function(){var extendParams={photo:true};var title=$(this).attr('title');if(title){extendParams.title=Drupal.checkPlain(title);}
$(this).colorbox($.extend({},settings.colorbox,extendParams));});$('.colorbox-branch-menu').colorbox({onComplete:function(e){var focus=$('#cboxContent').find('#cboxPrevious').css('display')!=='none'?$('#cboxContent').find('#cboxPrevious'):$('#cboxContent').find('#cboxClose');focus.focus();$('#cboxContent').on('keydown',function(e){var keyCode=e.keyCode||e.which;var firstElement=$('#cboxContent').find('#cboxPrevious').last().is(':focus');var lastElement=$('#cboxContent').find('#cboxClose').first().is(':focus');if(keyCode===9&&!e.shiftKey&&lastElement){e.preventDefault();$('#cboxContent').find('#cboxPrevious').first().focus();}
else if(keyCode===9&&e.shiftKey&&firstElement){e.preventDefault();$('#cboxContent').find('#cboxClose').first().focus();}});}});}}},error:function(data){$('#menu-listing').html('No menu available.');}});}
function setBranchImageAndAmenities(){$('#branch-background-image').attr('src',preferredBranch.branchImages);const amenities=$('.amenity-images');let amenitiesHtml='';preferredBranch.amenities.forEach((amenity)=>{amenitiesHtml+=`<div class="amenity-icon">
                        <img src="${amenity.image}" alt="">
                      </div>`});amenities.html(amenitiesHtml);}
$('.slot-dropdown').on('select2:selecting',(e)=>{selectedSlotId=parseInt(e.params.args.data.id,10);selectedReservationTime=e.params.args.data.element.label;selectedSlotName=e.params.args.data.text;$('#booking-slot-value').text(selectedSlotName);$('.slot-dropdown').val(selectedSlotId).trigger('change');refreshData();});$('#branch-details-menu-slot').on('select2:selecting',(e)=>{branchDetailSelectedSlotId=parseInt(e.params.args.data.id,10);branchDetailSelectedReservationTime=e.params.args.data.element.label;branchDetailSelectedSlotName=e.params.args.data.text;updateBranchMenu();});$('.booking-tomorrow').click(()=>{$('.booking-datepicker').datepicker('setDate',getDatePickerFormattedDate(tomorrowDate));updateReservationDate(tomorrowDate.clone());});$('.booking-today').click(()=>{$('.booking-datepicker').datepicker('setDate',getDatePickerFormattedDate(todayDate));updateReservationDate(todayDate.clone());});$('#branch-details-menu-today').click(()=>{updateReservationDateInBranchDetail(todayDate.clone());updateBranchDatePicker();});$('#branch-details-menu-tomorrow').click(()=>{updateReservationDateInBranchDetail(tomorrowDate.clone());updateBranchDatePicker();});function updateBranchDatePicker(){$('#branch-details-menu-date-picker').datepicker('setDate',getDatePickerFormattedDate(branchDetailSelectedReservationDate));}
$('.lunch').click(()=>{if(selectedDiningType!==lunchConstant){selectedDiningType=lunchConstant;setDiningType(selectedDiningType,'.lunch','.dinner');updateBookingInformation(getFormattedReservationDate(selectedReservationDate));disableOrEnableReserveButton();}});$('.dinner').click(()=>{if(selectedDiningType!==dinnerConstant){selectedDiningType=dinnerConstant;setDiningType(selectedDiningType,'.lunch','.dinner');updateBookingInformation(getFormattedReservationDate(selectedReservationDate));disableOrEnableReserveButton();}});$('#branch-details-menu-lunch').click(()=>{if(branchDetailSelectedDiningType!==lunchConstant){branchDetailSelectedDiningType=lunchConstant;setDiningType(branchDetailSelectedDiningType,'#branch-details-menu-lunch','#branch-details-menu-dinner');getBranchSlot();}});$('#branch-details-menu-dinner').click(()=>{if(branchDetailSelectedDiningType!==dinnerConstant){branchDetailSelectedDiningType=dinnerConstant;setDiningType(branchDetailSelectedDiningType,'#branch-details-menu-lunch','#branch-details-menu-dinner');getBranchSlot();}});function setDiningType(value,lunchSelector,dinnerSelector){if(value===lunchConstant){$(lunchSelector).prop('checked',true);}else if(value===dinnerConstant){$(dinnerSelector).prop('checked',true);}}
function loaderStop(){$('.reservation__block').removeClass('disable-click-event');$('.fakeLoader').removeClass('display-block');$('.fakeLoader').addClass('hide');}
$(document).click((e)=>{const branchInfoCard=$('.basic-info__form');if(!$(e.target).parents('.basic-info__form').length&&branchInfoCard.is(':visible')){branchInfoCard.hide();$('.basic-info__card').show();}});function loaderStart(){$('.reservation__block').addClass('disable-click-event');$('.fakeLoader').removeClass('hide');$('.fakeLoader').addClass('display-block');}
function bookingHttpRequest(url,requestMethod=REQUEST_METHODS.GET,postData,type,event){$.ajax({dataType:'json',method:requestMethod,url,data:requestMethod!==REQUEST_METHODS.GET?JSON.stringify(postData):postData,beforeSend:function(){loaderStart();},complete:function(){loaderStop();},headers:getHeaders(),success(data){if(type===singleBranchConstant){populateBranches(data);}else if(type===branchSlotConstant){updateBranchSlot(data);}else if(type===branchSlotCapacityConstant){checkBranchSlotCapacity(data);}else if(type===allBranchesConstant){populateBranchList(data);}else if(type===buffetConstant){populateBuffetList(data);}else if(type===branchMenuConstant){populateMenuList(data,true);}else if(type===corporateVerificationConstant){showCorporateOtpScreen(data);}else if(type===corporateEmailOtpVerificationConstant){verifyCorporateEmailOtp(data);}else if(type===showCouponsConstant){populateCouponsAndVouchers(data,PROPS.COUPON_CODE);}else if(type===applyCouponsConstant){if(data&&data.message_type=="success"){if(appliedCoupon){$('.booking-remove-coupon').trigger('click');}
appliedCoupon=couponUsed;$('#booking-applied-vouchers').append(appliedVoucherHtml(couponUsed,PROPS.COUPON_CODE));buildVoucherAndCouponHtml(PROPS.COUPON_CODE);$('#coupons-vouchers-close').trigger('click');}
else if(data&&data.message_type=="failed"){if(data.message){toastr.error(data.message);}else{toastr.error('Coupon cannot be applied.');}}}else if(type===showVouchersConstant){populateCouponsAndVouchers(data,PROPS.VOUCHER_CODE);}else if(type===corporateOffersConstant){populateCouponsAndVouchers(data,corporateOffersConstant);}else if(type===createBookingConstant){handleBooking(data);}else if(type===createBookingWithAdvanceConstant){advanceBookingData=data;handleBookingWithAdvance(data);}else if(type===payAdvanceAmountConstant){proceedToBookingCheckout(data);}else if(type===payAdvanceAmountBranchConstant){proceedToBranchAdvancePaymentCheckout(data);}else if(type===checkAdvanceAmountBranchConstant){checkAdvancePaymentRequired(data);}else if(type===completeBookingConstant){toastr.success('Payment completed successfully!');if(isPayBillPage()){showBillingPaymentSuccessScreen();}else{showBookingSuccessScreen(data,true);}}else if(type===completeBookingWithAdvanceConstant){completeAdvancePayBookingCheckout(data.booking_id);}else if(type===getOccasionJoinedByConstant){buildOccasionJoinedByHtml(data);}else if(type===updateSpecialInstructionsConstant){toastr.success('Updated successfully');$('#special-request').hide();}else if(type===getLoyaltyExchangeRateUrlConstant){updateUserLoyaltyPoints(data);}else if(type===TYPE.GET_BILLING_DETAILS){setBillingData(new BillingDetails(data));}else if(type===updateAdvanceResPaymentOnCompleteConstant){if(data&&data.message_type=="Success"&&data.data.razor_pay_payment_status=="success"){showBookingSuccessScreen(advanceBookingData,true);}
else if(data&&data.message_type=="Success"&&data.data.razor_pay_payment_status=="Refund"){showRefundInitiatedScreen(advanceBookingData);}
else if(data&&data.message_type=="Failed"){Moengage.track_event("Reservation_Status",{"Reservation_booked_Status":"Failed","Error":"Unable to process your request, please try again later.",});toastr.error("Unable to process your request, please try again later.");}}else if(type===reservationRulesConstant){if(data&&data.message_type=="success"){proceedWithBooking(data);}else{toastr.error("Unable to process your request, please try again later.");}}else if(type===updateAdvanceResPaymentConstant){if(data&&data.message_type=="Success"){createBookingOnly(true);}else{showRetryAdvancePayBranchScreen();}}},error(data){if(type===corporateVerificationConstant){showCorporateOtpScreen(data,true);}else if(type===corporateEmailOtpVerificationConstant){invalidCorporateEmailOtp();}else if(type===createBookingConstant){Moengage.track_event("Reservation_Status",{"Reservation_booked_Status":"Failed","Error":data.responseJSON.fieldErrors[0].message,});toastr.error(data.responseJSON.fieldErrors[0].message);}else if(type===createBookingWithAdvanceConstant||type===completeBookingWithAdvanceConstant){completeAdvancePayBookingCheckout('failed');}else if(type===completeBookingConstant){toastr.error('Payment failed, Please contact customer care.');}else if(type===showCouponsConstant){toastr.error(data.responseJSON.fieldErrors[0].message);}else if(type===applyCouponsConstant){if(data.responseJSON.fieldErrors[0].message){toastr.error(data.responseJSON.fieldErrors[0].message);}else{toastr.error(data.fieldErrors[0].message);}}else if(type===showVouchersConstant){toastr.error(data.responseJSON.fieldErrors[0].message);}else if(type===corporateOffersConstant){toastr.error(data.responseJSON.fieldErrors[0].message);}else if(type===buffetConstant){clearMenu();}else if(type===TYPE.GET_BILLING_DETAILS){toastr.error('We are unable to fetch the bill. Please try again.');}else if(data&&data.responseJSON&&data.responseJSON.fieldErrors&&data.responseJSON.fieldErrors[0]&&data.responseJSON.fieldErrors[0].message){toastr.error(data.responseJSON.fieldErrors[0].message);}else{toastr.error("Unable to process your request");}}});}
function showBillingPaymentSuccessScreen(){$('.billing-container').hide();$('.payment-successful-wrapper').show();}
function updateUserLoyaltyPoints(data){loyaltyPoints=data.available_points;loyaltyExchangeRate=data.redeem_amount/data.redeemable_points;calculateLoyaltyPoints();}
function proceedToBookingCheckout(data){const options={key:data.key,order_id:data.order_id,amount:data.amount,currency:data.currency,name:'Barbeque Nation',image:'/themes/custom/bbq_nation/assets/images/bbqn-logo.svg',handler:((transaction)=>{completeBookingCheckout(transaction);}),prefill:{"contact":data.mobile_number,"email":data.email,},};window.rzpay=new Razorpay(options);rzpay.open();}
function buildOccasionJoinedByHtml(data){if(!specialInstructionsBuilt){let occasionHtml='';let joinedByHtml='';data.celebrating_for.forEach((occasion)=>{occasionHtml+=getOccasionJoinedByHtml(occasion.occasion_id,'occasion',occasion.occasion_name);});data.joined_by.forEach((joinedBy)=>{joinedByHtml+=getOccasionJoinedByHtml(joinedBy.relationship_id,'joined-by',joinedBy.relationship_name);});$('#occasion-list').html(occasionHtml);$('#joined-by-list').html(joinedByHtml);specialInstructionsBuilt=true;}}
$('#advance-amount').on('input',(e)=>{const amount=parseFloat(e.currentTarget.value);if(amount<=billAmount&&amount>0){$('#booking-confirmed-pay-advance-amount').prop('disabled',false);}else{$('#booking-confirmed-pay-advance-amount').prop('disabled',true);}});function saveDataInLocalStorage(){const bookingDetails={branchId:selectedBranchId,slotId:selectedSlotId,slotName:selectedSlotName,diningType:selectedDiningType,reservationDate:getFormattedReservationDate(selectedReservationDate),reservationTime:selectedReservationTime,preferredBranch:preferredBranch,branchList:branchList};localStorage.setItem('booking_details',JSON.stringify(bookingDetails));booking_info.reservationDate=getFormattedReservationDate(selectedReservationDate);}
function getFormattedDate(d){return d.format('Do MMMM, YYYY');}
function checkLocalStorageDetails(){const localBookingDetails=JSON.parse(localStorage.getItem('booking_details'));if(localBookingDetails&&localBookingDetails.branchId&&localBookingDetails.branchId!==0&&localBookingDetails.slotId&&localBookingDetails.slotName&&localBookingDetails.preferredBranch&&localBookingDetails.branchList&&localBookingDetails.reservationDate){selectedBranchId=localBookingDetails.branchId;selectedSlotId=localBookingDetails.slotId;selectedReservationTime=localBookingDetails.reservationTime;selectedSlotName=localBookingDetails.slotName;selectedDiningType=localBookingDetails.diningType;selectedReservationDate=moment(localBookingDetails.reservationDate);preferredBranch=localBookingDetails.preferredBranch;branchList=localBookingDetails.branchList;localStorage.removeItem('booking_details');return true;}
return false;}
function getBranchList(){if(branchList.length===0){let payload={"type":"reservation"};bookingHttpRequest(URL.GET_ALL_BRANCHES,REQUEST_METHODS.POST,payload,allBranchesConstant);}else{populateBranchList(branchList);}}
function updateReservationDate(date){let selectedDate;if(date instanceof moment){selectedDate=date;}else{selectedDate=moment(date,'DD/MM/YYYY');}
if(!selectedDate.isSame(selectedReservationDate,'day')){selectedReservationDate=selectedDate;setTodayTomorrowCheckBox();updateBookingInformation(selectedDate);booking_info.reservationDate=getFormattedReservationDate(selectedReservationDate);}}
function updateBookingInformation(reservationDate){bookingHttpRequest(URL.GET_NEARBY_BRANCHES,REQUEST_METHODS.POST,new SlotPostData(getFormattedReservationDate(reservationDate)),singleBranchConstant);}
function getNearbyByBranches(){const reservationDate=getFormattedReservationDate(todayDate);updateBookingInformation(reservationDate);}
function populateBranchList(data){if(branchList.length===0){branchList=data;}
const branchListValues=[];data.data.forEach((city)=>{if(city.branches.length>0){branchListValues.push(branchListSelect2Values(city));}});$('.branch-dropdown').select2({data:branchListValues,matcher:matchBranch});if(selectedBranchId&&populateNearbyBranches){getNearbyByBranches();}}
function matchBranch(params,data){if($.trim(params.term)===''){return data;}
if(typeof data.children==='undefined'){return null;}
if(data.text.toUpperCase().indexOf(params.term.toUpperCase())>-1){return $.extend({},data,true);}
const filteredChildren=[];$.each(data.children,function(idx,child){if(child.text.toUpperCase().indexOf(params.term.toUpperCase())===0){filteredChildren.push(child);}});if(filteredChildren.length){const modifiedData=$.extend({},data,true);modifiedData.children=filteredChildren;return modifiedData;}
return null;}
function branchListSelect2Values(city){return{id:city.city_code,text:city.city_name,children:city.branches.map((branch)=>{return{id:branch.branch_id,text:branch.branch_name}})};}
function refreshData(){bookingHttpRequest(URL.BUFFET_LIST,REQUEST_METHODS.POST,new MenuPostData(),buffetConstant);cleanup();}
function redirectToHomePage(time=500){setTimeout(function(){window.location.href='/';},time);}
function getOccasionJoinedByHtml(id,name,label){return `<input id="${name}-${id}" name="${name}" type="radio">
          <label for="${name}-${id}">${label}</label>`}
function getVegNonVegClass(foodType){let foodTypeClass;if(foodType==='NONVEG'){foodTypeClass='nonveg';}else if(foodType==='VEG'){foodTypeClass='veg';}
return foodTypeClass;}
function calculateTaxAmount(){let totalTax=0;let taxHtml='';let amount=getSubTotal();preferredBranch.taxDetails.forEach((tax)=>{const taxAmount=amount*(tax.taxPercentage/100);taxHtml+=getTaxHtml(tax.tax,roundTaxAmount(taxAmount));totalTax+=taxAmount;});if(preferredBranch.serviceCharge){const serviceChargeAmount=amount*(preferredBranch.serviceCharge/100);totalTax+=serviceChargeAmount;taxHtml+=getTaxHtml('Service Charge',roundTaxAmount(serviceChargeAmount));}
PROPS.TAX_AMOUNT=parseFloat(roundTaxAmount(totalTax));$('#booking-tax-details').html(taxHtml);}
function calculateVoucherMealDiscount(){let voucherMealDiscount=0;let totalVoucherBaseValueWithPax=0;let totalVoucherValueWithPax=0;let totalVouchers=0;if(voucherDiscountAppliedWithPax){totalVoucherBaseValueWithPax=voucherDiscountAppliedWithPax+(voucherDiscountAppliedWithPax*0.05);totalVoucherValueWithPax=totalVoucherBaseValueWithPax-((100*totalVoucherBaseValueWithPax)/105);totalVouchers=totalVoucherBaseValueWithPax-totalVoucherValueWithPax;voucherMealDiscount=PROPS.REMOVED_PAX_AMOUNT-totalVouchers;}
return parseFloat(voucherMealDiscount)>0?parseFloat(voucherMealDiscount):0;}
function reCalculateTaxAmount(){let amount=getGstBaseAmount();PROPS.CGST_AMOUNT=parseFloat(roundTaxAmount(amount*(PROPS.CGST_PER/100)));PROPS.SGST_AMOUNT=parseFloat(roundTaxAmount(amount*(PROPS.SGST_PER/100)));PROPS.TAX_AMOUNT=PROPS.CGST_AMOUNT+PROPS.SGST_AMOUNT+PROPS.ADDITIONAL_TAXES;}
function getTaxHtml(label,amount){return `<div class="gst">
              <h5>${label}</h5>
              <span>${buffetCurrency}${amount}</span>
            </div>`}
function roundTaxAmount(amount){return amount.toFixed(2);}
function getFormattedSlotTime(time){const H=+time.substr(0,2);let h=H%12||12;h=(h<10)?('0'+h):h;const ampm=(H<12||H===24)?'AM':'PM';return h+time.substr(2,3)+ampm;}
function generateMenuListHtml(buffetItems){let buffetItemsHtml='';buffetItems.forEach((item)=>{buffetItemsHtml+=`<div class="reservation__item-menu__block">
                          <div class="accordion" id="menu__accordion">
                            <div class="accordion-panel">
                                <div class="accordion-header">
                                    ${item.name}
                                    <span class="item__count">${item.menuItems.length} Items</span>
                                </div>
                                <div class="accordion-body">${generateMenuItemHtml(item.menuItems)}</div>
                            </div>
                          </div>
                        </div>`});return buffetItemsHtml;}
function generateMenuItemHtml(menuItems){let menuItemHtml='';menuItems.forEach((item)=>{let foodTypeClass=getVegNonVegClass(item.type);menuItemHtml+=`<div class="menu__item__card">
                        <div class="menu__item__image">
                            <img alt="" data-src="${item.image}" class="lazyload">
                        </div>
                        <div class="menu__item__content">
                          <div class="menu__item__title">
                            <div class="menu__item__category ${foodTypeClass}"></div>
                            <div class="menu__item__name">${item.name}</div>
                            <div class="menu__item__price">${getCurrencyCode(item.currency)}${item.default_price}</div>
                            ${buildTagHtml(item)}
                          </div>
                          <div class="menu__item__details">${item.description}</div>
                        </div>
                    </div>`});return menuItemHtml;}
function buildTagHtml(item){if(item.tags&&item.tags.image){return `<div class="menu__item__type">
                <img alt="" src="${item.tags.image}">
              </div>`;}
return '';}
function voucherAndCouponItemHtml(title,voucherType,code,currency,amount,tempSubTotal,type,applicability,description){let couponClass='booking-apply-coupon';let couponText;if(voucherType===PROPS.COUPON_CODE&&type&&type===corporateOffersConstant){couponText='Apply coupon';voucherType=corporateOffersConstant;if(appliedCorporateCoupon){if(code===appliedCorporateCoupon.barCode){couponClass='coupon-applied';couponText='Applied';}else{couponClass+=' anchor-disabled';}}}else if(voucherType===PROPS.COUPON_CODE){couponText='Apply coupon';if(appliedCoupon){if(code===appliedCoupon.barCode){couponClass='coupon-applied';couponText='Applied';}else{couponClass+=' anchor-disabled';}}}else if(voucherType===PROPS.VOUCHER_CODE){couponText='Apply voucher';if(appliedVouchers&&appliedVouchers.length>0){appliedVouchers.forEach((voucher)=>{if(voucher.barCode===code){couponClass='coupon-applied';couponText='Applied';}});}}
if(amount>tempSubTotal&&type!==PROPS.VOUCHER_CODE){if(couponClass.substr(0,14)!=='coupon-applied'){couponClass+=' anchor-disabled';}}
if(!applicability&&type!==corporateOffersConstant){couponClass='anchor-disabled';}
return `<div class="coupon-card row align-center space-between">
            <div class="coupon__left">
              <div class="coupon-title">${title}</div>
              <div class="coupon-description">${getCurrencyCode(currency)}${amount.toLocaleString("en")} ${' '} OFF</div>
              ${getCouponDescription(description)}
            </div>
            <div class="coupon__right">
              <div class="coupon-cta">
                <div class="${voucherType}">
                  <a id="${code}" class="${couponClass}" href="#">${couponText}</a>
                </div>
              </div>
              <div class="coupon-code hide">Code:
                <span>${code}</span>
              </div>
            </div>
          </div>`}
function handleBooking(data){bookingData=data;if(data.booking_status==='CONFIRMED'){if(data.bill_total>0){showBookingSuccessScreen(data);}else{showBookingSuccessScreen(data,true);}}
if(data.booking_status==='PENDING'){bookingId=data.booking_id;advanceAmount=data.advance_amount;billAmount=data.bill_total;bookingHttpRequest(URL.CREATE_BOOKING_RAZORPAY_ORDER,REQUEST_METHODS.POST,{'booking_id':bookingId,'amount':advanceAmount,'currency':currency},payAdvanceAmountConstant);}}
function handleBookingWithAdvance(data){let updateBooking={'booking_id':data.booking_id,'payment_id':advanceTransactionDetails?advanceTransactionDetails.razorpay_payment_id:undefined,'payment_order_id':advanceTransactionDetails?advanceTransactionDetails.razorpay_order_id:undefined,'payment_signature':advanceTransactionDetails?advanceTransactionDetails.razorpay_signature:undefined,'payment_gateway':advanceTransactionDetails?'RAZOR_PAY':undefined};bookingHttpRequest(URL.CREATE_BOOKING,REQUEST_METHODS.PUT,updateBooking,completeBookingWithAdvanceConstant);}
function completeBookingCheckout(transaction){let updateBooking={'booking_id':bookingId,'payment_id':transaction?transaction.razorpay_payment_id:undefined,'payment_order_id':transaction?transaction.razorpay_order_id:undefined,'payment_signature':transaction?transaction.razorpay_signature:undefined,'payment_gateway':transaction?'RAZOR_PAY':undefined};if(isPayBillPage()){updateBooking={...updateBooking,...{voucher_details:getVoucherDetails(),loyalty_points:applyLoyaltyPoints?Math.ceil(loyaltyPointsApplied):undefined,voucher_meal_discount:calculateVoucherMealDiscount()}};}
bookingHttpRequest(URL.CREATE_BOOKING,REQUEST_METHODS.PUT,updateBooking,completeBookingConstant);}
function getBuffetImage(buffet){let buffetImage;if(buffet.buffetCustomerType=='Child'){buffetImage='/themes/custom/bbq_nation/assets/images/kid_icon.png';}
else{if(buffet.buffetType=='VEG'){buffetImage='/themes/custom/bbq_nation/assets/images/veg_icon.png';}
else{buffetImage='/themes/custom/bbq_nation/assets/images/non_veg_icon.png';}}
return buffetImage;}
function getBuffetName(buffet){let buffetName=buffet.buffetName;if(buffet.buffetCustomerType=='Child'){buffetName='KID';if(multiKidsPack){buffetName+=' ('+buffet.buffetType+')';}}
return buffetName;}
function getBookingConfirmedItemsHtml(bookingDetails){let itemsHtml='';bookingDetails.forEach((item)=>{buffetList.buffetData.forEach((buffet)=>{if(item.buffet_id===parseInt(buffet.buffetId,10)){itemsHtml+=getBookingConfirmedBuffetItemHtml(getBuffetImage(buffet),getBuffetName(buffet),item.packs);}});});return itemsHtml;}
function getBookingConfirmedBuffetItemHtml(image,name,packs){return `<div class="reservation__success__card row align-center space-between">
            <div class="reservation__success__left row align-center">
              <div class="reservation__success__image">
                <img src="${image}" alt="">
              </div>
              <div class="reservation__success__title">${name}</div>
            </div>
            <div class="reservation__success__right">
              <div class="reservation__success__count">${packs}</div>
            </div>
          </div>`}
function appliedVoucherHtml(voucher,voucherType){if(voucher){let cssClass='remove-link';let divId;let offerText='';if(voucherType===PROPS.VOUCHER_CODE){if(!voucherDiscountApplied){voucherDiscountApplied=0;}
if(!noOfVoucherDiscountAppliedWithPax){noOfVoucherDiscountAppliedWithPax=0;}
if(!voucherDiscountAppliedWithPax){voucherDiscountAppliedWithPax=0;}
if(voucher.paxApplicable>0){noOfVoucherDiscountAppliedWithPax+=voucher.paxApplicable;voucherDiscountAppliedWithPax+=voucher.denomination;if(!isPayBillPage()){setBuffetTotal();}
setGstBaseAmount();}
else{voucherDiscountApplied+=voucher.denomination;}
divId=`applied-voucher-${voucher.barCode}`;cssClass+=' booking-remove-voucher';setAmountDetails(true);}else if(voucherType===PROPS.COUPON_CODE){if(!couponDiscountApplied){couponDiscountApplied=0;}
couponDiscountApplied+=voucher.denomination;divId=`applied-coupon-${voucher.barCode}`;cssClass+=' booking-remove-coupon';if(!isPayBillPage()){setBuffetTotal();}
setGstBaseAmount();setAmountDetails(true);}else if(voucherType===corporateOffersConstant){if(!couponDiscountApplied){couponDiscountApplied=0;}
couponDiscountApplied+=voucher.denomination;divId=`applied-coupon-${voucher.barCode}`;cssClass+=' booking-remove-corporate-coupon';if(!isPayBillPage()){setBuffetTotal();}
setGstBaseAmount();setAmountDetails(true);}
offerText=`${getCurrencyCode(voucher.currency)} ${voucher.denomination.toLocaleString("en")} ${' '} discount on the bill`;if(voucherType===PROPS.VOUCHER_CODE){if(voucher.paxApplicable>0){offerText=`- ${voucher.paxApplicable} ${' '} Packs`;}}
return `<div id=${divId} ${' '} class="left">
                <div class="heading row align-center">
                  <h5 class="coupon">${voucher.barCode}</h5>
                  <a href="#" id="${voucher.barCode}" class="${cssClass}">Remove</a>
                </div>
                <span>${offerText}</span>
             </div>`;}}
function generateBuffetItemHtml(buffet){return `<div class="reservation__item">
            <div class="reservation__item__card">
              <div class="reservarion__image"><img data-src="${getBuffetImage(buffet)}" alt="V1" class="lazyload"></div>
                <div class="reservation__item__title">
                  <h5>${getBuffetName(buffet)}</h5>
                  <span>${getCurrencyCode(buffet.buffetCurrency)}${buffet.buffetPrice}</span>
              </div>
              <input type="hidden" id="buffet-unit-price-${buffet.buffetId}" value="${buffet.buffetPrice}" />
              <div class="reservation__item__form-wrap">
              <form id="${buffet.buffetId}" class="form form--reservation">
                <div class="value-button decrease decrease-buffet-quantity"></div>
                <input type="text" class="buffet-quantity-${buffet.buffetId} number" value="0" readonly/>
                <div class="value-button increase increase-buffet-quantity"></div>
              </form>
              <span id="booking-buffet-total-${buffet.buffetId}" class="reservation__item__total"></span>
              </div>


            </div>
          </div>`}
function buildOtherMenu(item){return `<div class="accordion-panel">
            <div class="accordion-header">
              ${item.menu_title}
              <span class="item__count">${item.menu_items.length} Items</span>
            </div>
            <div class="accordion-body">${generateMenuItemHtml(item.menu_items)}</div>
          </div>`}
function buildBuffetMenuHtml(buffet){return `<div class="accordion-panel">
            <div class="accordion-header">
                <p class="item__header">${buffet.buffet_name}</p>
                <span class="item__count">${buffet.buffet_items.length} Items</span>
                <span class="item-price">${getCurrencyCode(buffetCurrency)}${buffet.buffet_price}</span>
            </div>
            <div class="accordion-body">${buildBuffetItems(buffet.buffet_items)}</div>
        </div>`}
function buildBuffetItems(buffetItems){let buffetItemHtml='';buffetItems.forEach((item)=>{buffetItemHtml+=`<div class="accordion-panel">
                        <div class="accordion-header">${item.name}
                            <span class="item__count">${item.menu_items.length} Items</span>
                        </div>
                        <div class="accordion-body">${generateMenuItemHtml(item.menu_items)}</div>
                      </div>`});return buffetItemHtml;}
$('.reservation__corporate-link').click(function(e){if(!isAnonymous()){e.preventDefault();if(appliedCoupon){toastr.error('You cannot apply corporate offer with coupon applied');}else if(getBookingTotal()<1){toastr.error('Please add more items to apply corporate offer');}else if(corporateVerified){isCorporatePageActive=true;$('#reservation-info').hide();$('#coupons-vouchers').show();let totalQuantity=0;let total=getBookingTotal();bookingList.forEach((v,k)=>{totalQuantity+=v.packs;});if(noOfVoucherDiscountAppliedWithPax){totalQuantity-=noOfVoucherDiscountAppliedWithPax;}
const corporateData={email:corporateEmail,packs:totalQuantity,reservation_date:getFormattedReservationDate(selectedReservationDate),branch_id:selectedBranchId,slot:selectedSlotId,amount:total};bookingHttpRequest(URL.GET_CORPORATE_OFFERS,REQUEST_METHODS.POST,corporateData,corporateOffersConstant);}else{$('#corporate-offer').show();$('.reservation--curtain').addClass('open-corporate-form');}}else{loginLink();}});$(document).on('click','.share-reservation',(e)=>{e.preventDefault();e.stopPropagation();if(bookingData){$('#profile-share-booking-id').val(bookingData.booking_id);}else{$('#profile-share-booking-id').val(getBookingId(e));}
$('#share-reservation-mail').removeClass('hide');});$('#profile-reservation-email-share-input').on('input',(e)=>{if(validateEmail(e.target.value)){enableShareEmailButton();}else{disableShareEmailButton();}});function disableShareEmailButton(){$('#profile-reservation-email-share-button').addClass('anchor-disabled');}
function enableShareEmailButton(){$('#profile-reservation-email-share-button').removeClass('anchor-disabled');}
function getBookingId(e){return $(e.currentTarget).closest('article').attr('id');}
$('#profile-reservation-email-share-button').click((e)=>{let booking;if(bookingData){booking=bookingData;}else{booking=profileBookingData.get($('#profile-share-booking-id').val());}
$('#share-reservation-mail').addClass('hide');window.location.href='mailto:'+$('#profile-reservation-email-share-input').val()+'?'+getEmailShareSubject(booking)+'&'+getEmailShareBody(booking);});function getEmailShareSubject(booking){return `subject=Booking #${booking.booking_id}`;}
function getEmailShareBody(booking){return `body=Hi, ${getMailLineBreak()}${getMailLineBreak()} I have placed a booking on ${formatDate(booking.reservation_date)} at ${booking.branch_name}.${getEmailBranchAddress(booking)}`;}
function getEmailBranchAddress(booking){return `${getMailLineBreak()}${getMailLineBreak()}Address: ${booking.branch_address} ${getMailLineBreak()} Directions: ${URL.GOOGLE_MAPS}${booking.lat},${booking.long} ${getMailLineBreak()} Contact Number: ${booking.branch_contact_no}`;}
function getMailLineBreak(){return '%0D%0A';}
$('#profile-reservation-email-share-close').click((e)=>{e.preventDefault();$('#share-reservation-mail').addClass('hide');});$('.select2-selection').click(function(){$(this).toggleClass('show');});$('#basic-info__card-close').click(function(e){showBasicInfoCard(e);});$('.basic-info__edit').click((e)=>{showBasicInfoCard(e);});function showBasicInfoCard(e){e.preventDefault();if((appliedVouchers&&appliedVouchers.length>0)||appliedCoupon||applyLoyaltyPoints||appliedCorporateCoupon){e.stopPropagation();toastr.error('Please remove the applied coupon/voucher and loyalty points');}else{$('.basic-info__card').hide();$('.basic-info__form').show();e.stopPropagation();}}
$('#basic-info__form-done').click(function(e){e.preventDefault();$('.basic-info__form').hide();$('.basic-info__card').show();e.stopPropagation();});$(document).on('click','.value-button',()=>{});$('#coupons-vouchers-close').click(function(e){e.preventDefault();e.stopPropagation();hideBillingPageCurtain();$("#apply-coupon-value").val('');$('#coupons-vouchers').hide();$('#reservation-info').show();isCorporatePageActive=false;});$('#corporate-offer-close').click(function(e){e.preventDefault();hideBillingPageCurtain();$('#corporate-offer').hide();$('.reservation--curtain').removeClass('open-corporate-form');isCorporatePageActive=false;});$('#advance-pay-close').click(function(){$('#advance-pay').hide();});$('.reservation__success__reschedule').click(function(){$('#reservation-info').show();$('.reschedule-block').show();$('.no__slot__available').hide();$('#reservation__success').hide();});$('.reservation__success__cancel').click(function(){$('#reservation__success').hide();$('#reservation__cancellation').show();});$('.basic-info__menu').click(function(e){e.preventDefault();$('.basic-info__menu-block').toggle();});$('#basic-info__menu-close').click(function(e){e.preventDefault();e.stopPropagation();$('.basic-info__menu-block').hide();});$('#curtain-close').click(function(e){window.location.reload();});$('#buffet-link').click(function(e){e.preventDefault();$('#a-la-carte').hide();$('#buffet').show();$('#beverages').hide();});$('#a-la-carte-link').click(function(e){e.preventDefault();$('#a-la-carte').show();$('#buffet').hide();$('#beverages').hide();});$('#beverages-link').click(function(e){e.preventDefault();$('#a-la-carte').hide();$('#buffet').hide();$('#beverages').show();});$(document).on('click','.reservation__item__menu a',(e)=>{e.preventDefault();$('.reservation__item').removeClass('expanded');$(e.target).parent().parent().parent().addClass('expanded');});$(document).on('click','.reservation__item-menu__close .close',(e)=>{e.preventDefault();$(e.target).parent().parent().parent().removeClass('expanded');});$(window).scroll(function(){if($(window).width()>1023){let scroll=$(window).scrollTop();const vouchersBlock=$('.vouchers-carousel-content-block');const branchOverviewBlock=$('.store-content');let vouchers;let position=92;if(vouchersBlock.length>0){vouchers=vouchersBlock;}else{vouchers=branchOverviewBlock;}
if(vouchers.offset()&&vouchers.offset().top){let vouchersPosition=vouchers.offset().top-position;const reservationButton=$('#reserve-button');let button=$('.input--group-button');if(scroll>vouchersPosition){$(button).addClass('sticky');reservationButton.addClass('reservation-button-scroll-top');reservationButton.prop('disabled',false);}else{$(button).removeClass('sticky');reservationButton.removeClass('reservation-button-scroll-top');disableOrEnableReserveButton();}}}});function showElement(element,property='block'){$(element).css('display',property);}
function hideElement(element){$(element).hide();}
function setBillingData(data){bookingId=data.bookingId;currency=data.currency;buffetCurrency=getCurrencyCode(currency);selectedReservationDate=data.reservationDate;selectedBranchId=data.branchId;selectedSlotId=data.slotId;booking_info.reservationDate=getFormattedReservationDate(selectedReservationDate);$('#billing-booking-id').text(data.bookingId);$('#billing-customer-name').text(data.billJson.guestName);$('#billing-receipt-number').text(data.billJson.receiptNumber);$('#billing-date').text(data.billJson.date);$('#billing-table-number').text(data.billJson.tableNumber);$('#billing-invoice-url').attr('href',data.billLink);PROPS.TOTAL_QUANTITY=data.billJson.numberOfPax;$('#billing-order-details').append(data.billJson.orderDetails.map((orderDetails)=>{PROPS.TOTAL_AMOUNT+=orderDetails.net;return getOrderDetailsHtml(orderDetails);}));orderList=data.billJson.orderDetails;setAmountBlock(data.billJson);setPaymentDetailsHtml(data.billJson);setDiscountDetailsHtml(data.billJson);if(parseInt(data.loyaltyPoints,10)){applyLoyaltyPoints=true;loyaltyPointsApplied=parseInt(data.loyaltyPoints,10);loyaltyDiscountApplied=parseFloat(data.loyaltyPointsAmount);loyaltyExchangeRate=loyaltyDiscountApplied/loyaltyPointsApplied;$('#booking-loyalty-points').hide();PROPS.HIDE_LOYALTY_BLOCK=true;}
showElement('.reservation__apply-vouchers');if(couponDiscountApplied){$('#billing-coupons-block').hide();appliedCoupon=undefined;}else{$('.reservation__corporate-offers').show();}
getUserLoyaltyPoints();}
function setPaymentDetailsHtml(billJson){if(billJson.paymentDetails&&billJson.paymentDetails.length>0){showElement('#billing-payment-details-block');$('#billing-payment-details').html(billJson.paymentDetails.map(paymentDetails=>{if(paymentDetails.voucherNumber&&paymentDetails.amount){if(paymentDetails.paxApplicable>0){if(noOfVoucherDiscountAppliedWithPax){noOfVoucherDiscountAppliedWithPax+=paymentDetails.paxApplicable;voucherDiscountAppliedWithPax+=paymentDetails.amount;}else{noOfVoucherDiscountAppliedWithPax=paymentDetails.paxApplicable;voucherDiscountAppliedWithPax=paymentDetails.amount;}}else{if(voucherDiscountApplied){voucherDiscountApplied+=paymentDetails.amount;}else{voucherDiscountApplied=paymentDetails.amount;}}
const voucherData={currency:currency,bar_code:paymentDetails.voucherNumber,denomination:paymentDetails.amount,voucher_type:PROPS.VOUCHER_CODE,title:paymentDetails.name,pax_applicable:paymentDetails.paxApplicable?paymentDetails.paxApplicable:0};appliedVouchers.push(new Voucher(voucherData));}else if(paymentDetails.amount&&paymentDetails.type!=='LOYALTY'){PROPS.ADVANCE_AMOUNT_PAID+=paymentDetails.amount;}
return paymentDiscountHtml(paymentDetails.name,paymentDetails.amount);}));}}
function setDiscountDetailsHtml(billJson){if(billJson.discountDetails&&billJson.discountDetails.length>0){showElement('#billing-discount-details-block');$('#billing-discount-details').html(billJson.discountDetails.map(discountDetails=>{if(discountDetails.type===PROPS.COUPON_TYPE&&discountDetails.couponNumber){appliedCoupon=true;if(discountDetails.name!=='MEAL_COUPON'){if(couponDiscountApplied){couponDiscountApplied+=discountDetails.amount;}else{couponDiscountApplied=discountDetails.amount;}}
const couponData={currency:currency,bar_code:discountDetails.couponNumber,denomination:discountDetails.amount,voucher_type:PROPS.COUPON_CODE,title:discountDetails.name};appliedCoupon=new Voucher(couponData);}else if(discountDetails.name!=='LOYALTY'&&discountDetails.name!=='COUPON'&&discountDetails.name!=='MEAL_COUPON'&&discountDetails.amount){PROPS.ADDITIONAL_DISCOUNTS+=discountDetails.amount;}
return paymentDiscountHtml(discountDetails.name,discountDetails.amount);}));}}
function paymentDiscountHtml(name,amount){return `<div>
              <h5>${name}</h5>
              <span>${amount}</span>
            </div>`}
function setAmountBlock(billJson){PROPS.GST_BASE_AMOUNT=billJson.gstBaseAmount;PROPS.CGST_PER=billJson.cgstPercentage;PROPS.SGST_PER=billJson.sgstPercentage;PROPS.SERVICE_CHARGE=billJson.serviceCharge;PROPS.VAT_AMOUNT=billJson.vatAmount;PROPS.SUB_TOTAL=billJson.subTotal;PROPS.TOTAL_AMOUNT=billJson.totalAmount;PROPS.NET_PAYABLE=billJson.netPayable;if(billJson.cessInPlaceOfVat||billJson.cessAmount){PROPS.CESS=billJson.cessInPlaceOfVat?billJson.cessInPlaceOfVat:billJson.cessAmount;}
PROPS.ADDITIONAL_TAXES=PROPS.SERVICE_CHARGE+PROPS.VAT_AMOUNT+PROPS.CESS;reCalculateTaxAmount();if(!billJson.netPayable||billJson.billStatus!=='PR'){$('#booking-confirmed-pay-advance-amount').addClass('anchor-disabled');}
$('#billing-net-payable').html(buffetCurrency+billJson.netPayable);$('#billing-sub-total').text(billJson.subTotal);if(PROPS.CGST_AMOUNT){showElement('#billing-tax-details-cgst-block','flex');$('#billing-tax-details-cgst').text(PROPS.CGST_AMOUNT);}
if(PROPS.SGST_AMOUNT){showElement('#billing-tax-details-sgst-block','flex');$('#billing-tax-details-sgst').text(PROPS.SGST_AMOUNT);}
if(PROPS.SERVICE_CHARGE){showElement('#billing-tax-details-service-charge-block','flex');$('#billing-tax-details-service-charge').text(PROPS.SERVICE_CHARGE);}
if(PROPS.CESS){showElement('#billing-tax-details-cess-block','flex');$('#billing-tax-details-cess').text(PROPS.CESS);}
if(PROPS.VAT_AMOUNT){showElement('#billing-tax-details-vat-block','flex');$('#billing-tax-details-vat').text(PROPS.VAT_AMOUNT);}
$('#billing-total-amount').text(billJson.totalAmount);$('#billing-final-net-payable-amount').html(buffetCurrency+billJson.netPayable);$('#advance-amount').val(billJson.netPayable);}
function getOrderDetailsHtml(orderDetails){return `<tr>
              <td>${orderDetails.description}</td>
              <td>${orderDetails.qty}</td>
              <td>${orderDetails.rate}</td>
              <td>${orderDetails.net}</td>
            </tr>`}
function getBookingDetails(bookingId){bookingHttpRequest(URL.GET_BILLING_DETAILS+bookingId,REQUEST_METHODS.GET,undefined,TYPE.GET_BILLING_DETAILS);}})(jQuery,Drupal);function formatDate(dateString){return moment(dateString).format('dddd, DD MMM, h:mm a');}
function validateEmail(email){const emailPattern=/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;return emailPattern.test(email);}
function getFormattedReservationDate(date){return moment(date).format('YYYY-MM-DD');}
function getDatePickerFormattedDate(date){return date.format('DD/MM/YYYY');};